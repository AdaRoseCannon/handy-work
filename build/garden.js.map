{"version":3,"file":"garden.js","sources":["../node_modules/three/examples/jsm/controls/OrbitControls.js","../node_modules/webxr-polyfill/build/webxr-polyfill.module.js","../node_modules/@tweenjs/tween.js/dist/tween.esm.js","../src/lib/scene.js","../node_modules/three/examples/jsm/webxr/VRButton.js","../node_modules/three/examples/jsm/loaders/GLTFLoader.js","../node_modules/three/examples/jsm/libs/motion-controllers.module.js","../node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js","../node_modules/three/examples/jsm/webxr/XRHandPrimitiveModel.js","../node_modules/three/examples/jsm/webxr/XRHandMeshModel.js","../node_modules/three/examples/jsm/webxr/XRHandModelFactory.js","../src/lib/controllers/gamepad.js","../src/lib/controllers/locomotion/fade.js","../src/lib/controllers/controllers.js","../src/garden.js"],"sourcesContent":["import {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from 'three';\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nconst _changeEvent = { type: 'change' };\nconst _startEvent = { type: 'start' };\nconst _endEvent = { type: 'end' };\n\nclass OrbitControls extends EventDispatcher {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper();\n\n\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\t\tthis.object = object;\n\t\tthis.domElement = domElement;\n\n\t\t// Set to false to disable this control\n\t\tthis.enabled = true;\n\n\t\t// \"target\" sets the location of focus, where the object orbits around\n\t\tthis.target = new Vector3();\n\n\t\t// How far you can dolly in and out ( PerspectiveCamera only )\n\t\tthis.minDistance = 0;\n\t\tthis.maxDistance = Infinity;\n\n\t\t// How far you can zoom in and out ( OrthographicCamera only )\n\t\tthis.minZoom = 0;\n\t\tthis.maxZoom = Infinity;\n\n\t\t// How far you can orbit vertically, upper and lower limits.\n\t\t// Range is 0 to Math.PI radians.\n\t\tthis.minPolarAngle = 0; // radians\n\t\tthis.maxPolarAngle = Math.PI; // radians\n\n\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\t\tthis.minAzimuthAngle = - Infinity; // radians\n\t\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t\t// Set to true to enable damping (inertia)\n\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\t\tthis.enableDamping = false;\n\t\tthis.dampingFactor = 0.05;\n\n\t\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t// Set to false to disable zooming\n\t\tthis.enableZoom = true;\n\t\tthis.zoomSpeed = 1.0;\n\n\t\t// Set to false to disable rotating\n\t\tthis.enableRotate = true;\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t// Set to false to disable panning\n\t\tthis.enablePan = true;\n\t\tthis.panSpeed = 1.0;\n\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\t\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t\t// Set to true to automatically rotate around the target\n\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\t\tthis.autoRotate = false;\n\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\n\t\t// The four arrow keys\n\t\tthis.keys = { LEFT: 'ArrowLeft', UP: 'ArrowUp', RIGHT: 'ArrowRight', BOTTOM: 'ArrowDown' };\n\n\t\t// Mouse buttons\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t// Touch fingers\n\t\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t\t// for reset\n\t\tthis.target0 = this.target.clone();\n\t\tthis.position0 = this.object.position.clone();\n\t\tthis.zoom0 = this.object.zoom;\n\n\t\t// the target DOM element for key events\n\t\tthis._domElementKeyEvents = null;\n\n\t\t//\n\t\t// public methods\n\t\t//\n\n\t\tthis.getPolarAngle = function () {\n\n\t\t\treturn spherical.phi;\n\n\t\t};\n\n\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\treturn spherical.theta;\n\n\t\t};\n\n\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t};\n\n\t\tthis.saveState = function () {\n\n\t\t\tscope.target0.copy( scope.target );\n\t\t\tscope.position0.copy( scope.object.position );\n\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t};\n\n\t\tthis.reset = function () {\n\n\t\t\tscope.target.copy( scope.target0 );\n\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\tscope.object.zoom = scope.zoom0;\n\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\tscope.update();\n\n\t\t\tstate = STATE.NONE;\n\n\t\t};\n\n\t\t// this method is exposed, but perhaps it would be better if we can make it private...\n\t\tthis.update = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\t// so camera.up is the orbit axis\n\t\t\tconst quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\t\tconst quatInverse = quat.clone().invert();\n\n\t\t\tconst lastPosition = new Vector3();\n\t\t\tconst lastQuaternion = new Quaternion();\n\n\t\t\tconst twoPI = 2 * Math.PI;\n\n\t\t\treturn function update() {\n\n\t\t\t\tconst position = scope.object.position;\n\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t\t// angle from z-axis around y-axis\n\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t}\n\n\t\t\t\t// restrict theta to be between desired limits\n\n\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// restrict phi to be between desired limits\n\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\t\tspherical.makeSafe();\n\n\n\t\t\t\tspherical.radius *= scale;\n\n\t\t\t\t// restrict radius to be between desired limits\n\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t\t// move target to panned location\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t}\n\n\t\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t\tscale = 1;\n\n\t\t\t\t// update condition is:\n\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\tif ( zoomChanged ||\n\t\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\n\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\tzoomChanged = false;\n\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t};\n\n\t\t}();\n\n\t\tthis.dispose = function () {\n\n\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\n\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\n\t\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart );\n\t\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd );\n\t\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove );\n\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\n\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t}\n\n\t\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t};\n\n\t\t//\n\t\t// internals\n\t\t//\n\n\t\tconst scope = this;\n\n\t\tconst STATE = {\n\t\t\tNONE: - 1,\n\t\t\tROTATE: 0,\n\t\t\tDOLLY: 1,\n\t\t\tPAN: 2,\n\t\t\tTOUCH_ROTATE: 3,\n\t\t\tTOUCH_PAN: 4,\n\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t};\n\n\t\tlet state = STATE.NONE;\n\n\t\tconst EPS = 0.000001;\n\n\t\t// current position in spherical coordinates\n\t\tconst spherical = new Spherical();\n\t\tconst sphericalDelta = new Spherical();\n\n\t\tlet scale = 1;\n\t\tconst panOffset = new Vector3();\n\t\tlet zoomChanged = false;\n\n\t\tconst rotateStart = new Vector2();\n\t\tconst rotateEnd = new Vector2();\n\t\tconst rotateDelta = new Vector2();\n\n\t\tconst panStart = new Vector2();\n\t\tconst panEnd = new Vector2();\n\t\tconst panDelta = new Vector2();\n\n\t\tconst dollyStart = new Vector2();\n\t\tconst dollyEnd = new Vector2();\n\t\tconst dollyDelta = new Vector2();\n\n\t\tfunction getAutoRotationAngle() {\n\n\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t}\n\n\t\tfunction getZoomScale() {\n\n\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t}\n\n\t\tfunction rotateLeft( angle ) {\n\n\t\t\tsphericalDelta.theta -= angle;\n\n\t\t}\n\n\t\tfunction rotateUp( angle ) {\n\n\t\t\tsphericalDelta.phi -= angle;\n\n\t\t}\n\n\t\tconst panLeft = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\t\tv.multiplyScalar( - distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\tconst panUp = function () {\n\n\t\t\tconst v = new Vector3();\n\n\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t}\n\n\t\t\t\tv.multiplyScalar( distance );\n\n\t\t\t\tpanOffset.add( v );\n\n\t\t\t};\n\n\t\t}();\n\n\t\t// deltaX and deltaY are in pixels; right and down are positive\n\t\tconst pan = function () {\n\n\t\t\tconst offset = new Vector3();\n\n\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t// perspective\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\tlet targetDistance = offset.length();\n\n\t\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t// orthographic\n\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}();\n\n\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale /= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\tscale *= dollyScale;\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tzoomChanged = true;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\tscope.enableZoom = false;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\t\t// event callbacks - update the object state\n\t\t//\n\n\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t}\n\n\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t\t// no-op\n\n\t\t}\n\n\t\tfunction handleMouseWheel( event ) {\n\n\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t}\n\n\t\t\tscope.update();\n\n\t\t}\n\n\t\tfunction handleKeyDown( event ) {\n\n\t\t\tlet needsUpdate = false;\n\n\t\t\tswitch ( event.code ) {\n\n\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\tevent.preventDefault();\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tfunction handleTouchStartRotate( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\trotateStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartPan( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\tpanStart.set( x, y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction handleTouchStartDolly( event ) {\n\n\t\t\tconst dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tconst dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyStart.set( 0, distance );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t\t}\n\n\t\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\t\tconst element = scope.domElement;\n\n\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\t\trotateStart.copy( rotateEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\tif ( event.touches.length == 1 ) {\n\n\t\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t\t} else {\n\n\t\t\t\tconst x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\t\tconst y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t}\n\n\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\t\tpan( panDelta.x, panDelta.y );\n\n\t\t\tpanStart.copy( panEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\tconst dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\t\tconst dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tdollyEnd.set( 0, distance );\n\n\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\t\tdollyOut( dollyDelta.y );\n\n\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t}\n\n\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t}\n\n\t\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t\t// no-op\n\n\t\t}\n\n\t\t//\n\t\t// event handlers - FSM: listen for events and reset state\n\t\t//\n\n\t\tfunction onPointerDown( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.pointerType ) {\n\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseDown( event );\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO touch\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tswitch ( event.pointerType ) {\n\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseMove( event );\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO touch\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onPointerUp( event ) {\n\n\t\t\tswitch ( event.pointerType ) {\n\n\t\t\t\tcase 'mouse':\n\t\t\t\tcase 'pen':\n\t\t\t\t\tonMouseUp( event );\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO touch\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseDown( event ) {\n\n\t\t\t// Prevent the browser from scrolling.\n\t\t\tevent.preventDefault();\n\n\t\t\t// Manually set the focus since calling preventDefault above\n\t\t\t// prevents the browser from setting it automatically.\n\n\t\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\t\tlet mouseAction;\n\n\t\t\tswitch ( event.button ) {\n\n\t\t\t\tcase 0:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t}\n\n\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MOUSE.PAN:\n\n\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.ownerDocument.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.DOLLY:\n\n\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onMouseUp( event ) {\n\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointermove', onPointerMove );\n\t\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleMouseUp( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onMouseWheel( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\thandleMouseWheel( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t}\n\n\t\tfunction onKeyDown( event ) {\n\n\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\n\t\t\thandleKeyDown( event );\n\n\t\t}\n\n\t\tfunction onTouchStart( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault(); // prevent scrolling\n\n\t\t\tswitch ( event.touches.length ) {\n\n\t\t\t\tcase 1:\n\n\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2:\n\n\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchMove( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault(); // prevent scrolling\n\n\t\t\tswitch ( state ) {\n\n\t\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\t\tscope.update();\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onTouchEnd( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\thandleTouchEnd( event );\n\n\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tfunction onContextMenu( event ) {\n\n\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\tevent.preventDefault();\n\n\t\t}\n\n\t\t//\n\n\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\n\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, { passive: false } );\n\n\t\tscope.domElement.addEventListener( 'touchstart', onTouchStart, { passive: false } );\n\t\tscope.domElement.addEventListener( 'touchend', onTouchEnd );\n\t\tscope.domElement.addEventListener( 'touchmove', onTouchMove, { passive: false } );\n\n\t\t// force an update at start\n\n\t\tthis.update();\n\n\t}\n\n}\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nclass MapControls extends OrbitControls {\n\n\tconstructor( object, domElement ) {\n\n\t\tsuper( object, domElement );\n\n\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\t\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\t\tthis.touches.ONE = TOUCH.PAN;\n\t\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n\t}\n\n}\n\nexport { OrbitControls, MapControls };\n","/**\n * @license\n * webxr-polyfill\n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * cardboard-vr-display\n * Copyright (c) 2015-2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * webvr-polyfill-dpdb \n * Copyright (c) 2017 Google\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * @license\n * wglu-preserve-state\n * Copyright (c) 2016, Brandon Jones.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\n/**\n * @license\n * nosleep.js\n * Copyright (c) 2017, Rich Tibbett\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n\nconst _global = typeof global !== 'undefined' ? global :\n                typeof self !== 'undefined' ? self :\n                typeof window !== 'undefined' ? window : {};\n\nconst PRIVATE = Symbol('@@webxr-polyfill/EventTarget');\nclass EventTarget {\n  constructor() {\n    this[PRIVATE] = {\n      listeners: new Map(),\n    };\n  }\n  addEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    typedListeners.push(listener);\n    this[PRIVATE].listeners.set(type, typedListeners);\n  }\n  removeEventListener(type, listener) {\n    if (typeof type !== 'string') { throw new Error('`type` must be a string'); }\n    if (typeof listener !== 'function') { throw new Error('`listener` must be a function'); }\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    for (let i = typedListeners.length; i >= 0; i--) {\n      if (typedListeners[i] === listener) {\n        typedListeners.pop();\n      }\n    }\n  }\n  dispatchEvent(type, event) {\n    const typedListeners = this[PRIVATE].listeners.get(type) || [];\n    const queue = [];\n    for (let i = 0; i < typedListeners.length; i++) {\n      queue[i] = typedListeners[i];\n    }\n    for (let listener of queue) {\n      listener(event);\n    }\n    if (typeof this[`on${type}`] === 'function') {\n      this[`on${type}`](event);\n    }\n  }\n}\n\nconst EPSILON = 0.000001;\nlet ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n\n\nconst degree = Math.PI / 180;\n\nfunction create() {\n  let out = new ARRAY_TYPE(16);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\nfunction copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n\nfunction identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\nfunction invert(out, a) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b00 = a00 * a11 - a01 * a10;\n  let b01 = a00 * a12 - a02 * a10;\n  let b02 = a00 * a13 - a03 * a10;\n  let b03 = a01 * a12 - a02 * a11;\n  let b04 = a01 * a13 - a03 * a11;\n  let b05 = a02 * a13 - a03 * a12;\n  let b06 = a20 * a31 - a21 * a30;\n  let b07 = a20 * a32 - a22 * a30;\n  let b08 = a20 * a33 - a23 * a30;\n  let b09 = a21 * a32 - a22 * a31;\n  let b10 = a21 * a33 - a23 * a31;\n  let b11 = a22 * a33 - a23 * a32;\n  let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\n\nfunction multiply(out, a, b) {\n  let a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3];\n  let a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7];\n  let a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11];\n  let a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n  let b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n  out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n  out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n  out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n  out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n  out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n  out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n  out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\nfunction fromRotationTranslation(out, q, v) {\n  let x = q[0], y = q[1], z = q[2], w = q[3];\n  let x2 = x + x;\n  let y2 = y + y;\n  let z2 = z + z;\n  let xx = x * x2;\n  let xy = x * y2;\n  let xz = x * z2;\n  let yy = y * y2;\n  let yz = y * z2;\n  let zz = z * z2;\n  let wx = w * x2;\n  let wy = w * y2;\n  let wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\nfunction getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n\nfunction getRotation(out, mat) {\n  let trace = mat[0] + mat[5] + mat[10];\n  let S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (mat[6] - mat[9]) / S;\n    out[1] = (mat[8] - mat[2]) / S;\n    out[2] = (mat[1] - mat[4]) / S;\n  } else if ((mat[0] > mat[5]) && (mat[0] > mat[10])) {\n    S = Math.sqrt(1.0 + mat[0] - mat[5] - mat[10]) * 2;\n    out[3] = (mat[6] - mat[9]) / S;\n    out[0] = 0.25 * S;\n    out[1] = (mat[1] + mat[4]) / S;\n    out[2] = (mat[8] + mat[2]) / S;\n  } else if (mat[5] > mat[10]) {\n    S = Math.sqrt(1.0 + mat[5] - mat[0] - mat[10]) * 2;\n    out[3] = (mat[8] - mat[2]) / S;\n    out[0] = (mat[1] + mat[4]) / S;\n    out[1] = 0.25 * S;\n    out[2] = (mat[6] + mat[9]) / S;\n  } else {\n    S = Math.sqrt(1.0 + mat[10] - mat[0] - mat[5]) * 2;\n    out[3] = (mat[1] - mat[4]) / S;\n    out[0] = (mat[8] + mat[2]) / S;\n    out[1] = (mat[6] + mat[9]) / S;\n    out[2] = 0.25 * S;\n  }\n  return out;\n}\n\n\n\n\nfunction perspective(out, fovy, aspect, near, far) {\n  let f = 1.0 / Math.tan(fovy / 2), nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = (2 * far * near) * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\nfunction create$1() {\n  let out = new ARRAY_TYPE(3);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\nfunction clone$1(a) {\n  var out = new ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\nfunction length(a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  return Math.sqrt(x*x + y*y + z*z);\n}\nfunction fromValues$1(x, y, z) {\n  let out = new ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\nfunction copy$1(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\nfunction add$1(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n\n\n\n\n\n\n\nfunction scale$1(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n\n\n\n\n\nfunction normalize(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let len = x*x + y*y + z*z;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n  }\n  return out;\n}\nfunction dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\nfunction cross(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2];\n  let bx = b[0], by = b[1], bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n\n\n\n\n\nfunction transformQuat(out, a, q) {\n    let qx = q[0], qy = q[1], qz = q[2], qw = q[3];\n    let x = a[0], y = a[1], z = a[2];\n    let uvx = qy * z - qz * y,\n        uvy = qz * x - qx * z,\n        uvz = qx * y - qy * x;\n    let uuvx = qy * uvz - qz * uvy,\n        uuvy = qz * uvx - qx * uvz,\n        uuvz = qx * uvy - qy * uvx;\n    let w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n\n\n\nfunction angle(a, b) {\n  let tempA = fromValues$1(a[0], a[1], a[2]);\n  let tempB = fromValues$1(b[0], b[1], b[2]);\n  normalize(tempA, tempA);\n  normalize(tempB, tempB);\n  let cosine = dot(tempA, tempB);\n  if(cosine > 1.0) {\n    return 0;\n  }\n  else if(cosine < -1.0) {\n    return Math.PI;\n  } else {\n    return Math.acos(cosine);\n  }\n}\n\n\n\n\n\n\n\n\nconst len = length;\n\nconst forEach = (function() {\n  let vec = create$1();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 3;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n    }\n    return a;\n  };\n})();\n\nfunction create$2() {\n  let out = new ARRAY_TYPE(9);\n  if(ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\nfunction create$3() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\nfunction clone$3(a) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\nfunction fromValues$3(x, y, z, w) {\n  let out = new ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\nfunction copy$3(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction normalize$1(out, a) {\n  let x = a[0];\n  let y = a[1];\n  let z = a[2];\n  let w = a[3];\n  let len = x*x + y*y + z*z + w*w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n  }\n  return out;\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst forEach$1 = (function() {\n  let vec = create$3();\n  return function(a, stride, offset, count, fn, arg) {\n    let i, l;\n    if(!stride) {\n      stride = 4;\n    }\n    if(!offset) {\n      offset = 0;\n    }\n    if(count) {\n      l = Math.min((count * stride) + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for(i = offset; i < l; i += stride) {\n      vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n      fn(vec, vec, arg);\n      a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n    }\n    return a;\n  };\n})();\n\nfunction create$4() {\n  let out = new ARRAY_TYPE(4);\n  if(ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\nfunction setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  let s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\nfunction multiply$4(out, a, b) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n\n\n\nfunction slerp(out, a, b, t) {\n  let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n  let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n  let omega, cosom, sinom, scale0, scale1;\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  if ( cosom < 0.0 ) {\n    cosom = -cosom;\n    bx = - bx;\n    by = - by;\n    bz = - bz;\n    bw = - bw;\n  }\n  if ( (1.0 - cosom) > EPSILON ) {\n    omega  = Math.acos(cosom);\n    sinom  = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n\nfunction invert$2(out, a) {\n  let a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n  let dot$$1 = a0*a0 + a1*a1 + a2*a2 + a3*a3;\n  let invDot = dot$$1 ? 1.0/dot$$1 : 0;\n  out[0] = -a0*invDot;\n  out[1] = -a1*invDot;\n  out[2] = -a2*invDot;\n  out[3] = a3*invDot;\n  return out;\n}\n\nfunction fromMat3(out, m) {\n  let fTrace = m[0] + m[4] + m[8];\n  let fRoot;\n  if ( fTrace > 0.0 ) {\n    fRoot = Math.sqrt(fTrace + 1.0);\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5/fRoot;\n    out[0] = (m[5]-m[7])*fRoot;\n    out[1] = (m[6]-m[2])*fRoot;\n    out[2] = (m[1]-m[3])*fRoot;\n  } else {\n    let i = 0;\n    if ( m[4] > m[0] )\n      i = 1;\n    if ( m[8] > m[i*3+i] )\n      i = 2;\n    let j = (i+1)%3;\n    let k = (i+2)%3;\n    fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n    out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n    out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n  }\n  return out;\n}\nfunction fromEuler(out, x, y, z) {\n    let halfToRad = 0.5 * Math.PI / 180.0;\n    x *= halfToRad;\n    y *= halfToRad;\n    z *= halfToRad;\n    let sx = Math.sin(x);\n    let cx = Math.cos(x);\n    let sy = Math.sin(y);\n    let cy = Math.cos(y);\n    let sz = Math.sin(z);\n    let cz = Math.cos(z);\n    out[0] = sx * cy * cz - cx * sy * sz;\n    out[1] = cx * sy * cz + sx * cy * sz;\n    out[2] = cx * cy * sz - sx * sy * cz;\n    out[3] = cx * cy * cz + sx * sy * sz;\n    return out;\n}\n\nconst clone$4 = clone$3;\nconst fromValues$4 = fromValues$3;\nconst copy$4 = copy$3;\n\n\n\n\n\n\n\n\n\n\nconst normalize$2 = normalize$1;\n\n\nconst rotationTo = (function() {\n  let tmpvec3 = create$1();\n  let xUnitVec3 = fromValues$1(1,0,0);\n  let yUnitVec3 = fromValues$1(0,1,0);\n  return function(out, a, b) {\n    let dot$$1 = dot(a, b);\n    if (dot$$1 < -0.999999) {\n      cross(tmpvec3, xUnitVec3, a);\n      if (len(tmpvec3) < 0.000001)\n        cross(tmpvec3, yUnitVec3, a);\n      normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot$$1 > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot$$1;\n      return normalize$2(out, out);\n    }\n  };\n})();\nconst sqlerp = (function () {\n  let temp1 = create$4();\n  let temp2 = create$4();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}());\nconst setAxes = (function() {\n  let matr = create$2();\n  return function(out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize$2(out, fromMat3(out, matr));\n  };\n})();\n\nconst PRIVATE$1 = Symbol('@@webxr-polyfill/XRRigidTransform');\nclass XRRigidTransform$1 {\n  constructor() {\n    this[PRIVATE$1] = {\n      matrix: null,\n      position: null,\n      orientation: null,\n      inverse: null,\n    };\n    if (arguments.length === 0) {\n      this[PRIVATE$1].matrix = identity(new Float32Array(16));\n    } else if (arguments.length === 1) {\n      if (arguments[0] instanceof Float32Array) {\n        this[PRIVATE$1].matrix = arguments[0];\n      } else {\n        this[PRIVATE$1].position = this._getPoint(arguments[0]);\n        this[PRIVATE$1].orientation = DOMPointReadOnly.fromPoint({\n            x: 0, y: 0, z: 0, w: 1\n        });\n      }\n    } else if (arguments.length === 2) {\n      this[PRIVATE$1].position = this._getPoint(arguments[0]);\n      this[PRIVATE$1].orientation = this._getPoint(arguments[1]);\n    } else {\n      throw new Error(\"Too many arguments!\");\n    }\n    if (this[PRIVATE$1].matrix) {\n        let position = create$1();\n        getTranslation(position, this[PRIVATE$1].matrix);\n        this[PRIVATE$1].position = DOMPointReadOnly.fromPoint({\n            x: position[0],\n            y: position[1],\n            z: position[2]\n        });\n        let orientation = create$4();\n        getRotation(orientation, this[PRIVATE$1].matrix);\n        this[PRIVATE$1].orientation = DOMPointReadOnly.fromPoint({\n          x: orientation[0],\n          y: orientation[1],\n          z: orientation[2],\n          w: orientation[3]\n        });\n    } else {\n        this[PRIVATE$1].matrix = identity(new Float32Array(16));\n        fromRotationTranslation(\n          this[PRIVATE$1].matrix,\n          fromValues$4(\n            this[PRIVATE$1].orientation.x,\n            this[PRIVATE$1].orientation.y,\n            this[PRIVATE$1].orientation.z,\n            this[PRIVATE$1].orientation.w),\n          fromValues$1(\n            this[PRIVATE$1].position.x,\n            this[PRIVATE$1].position.y,\n            this[PRIVATE$1].position.z)\n        );\n    }\n  }\n  _getPoint(arg) {\n    if (arg instanceof DOMPointReadOnly) {\n      return arg;\n    }\n    return DOMPointReadOnly.fromPoint(arg);\n  }\n  get matrix() { return this[PRIVATE$1].matrix; }\n  get position() { return this[PRIVATE$1].position; }\n  get orientation() { return this[PRIVATE$1].orientation; }\n  get inverse() {\n    if (this[PRIVATE$1].inverse === null) {\n      let invMatrix = identity(new Float32Array(16));\n      invert(invMatrix, this[PRIVATE$1].matrix);\n      this[PRIVATE$1].inverse = new XRRigidTransform$1(invMatrix);\n      this[PRIVATE$1].inverse[PRIVATE$1].inverse = this;\n    }\n    return this[PRIVATE$1].inverse;\n  }\n}\n\nconst PRIVATE$2 = Symbol('@@webxr-polyfill/XRSpace');\n\nclass XRSpace {\n  constructor(specialType = null, inputSource = null) {\n    this[PRIVATE$2] = {\n      specialType,\n      inputSource,\n      baseMatrix: null,\n      inverseBaseMatrix: null,\n      lastFrameId: -1\n    };\n  }\n  get _specialType() {\n    return this[PRIVATE$2].specialType;\n  }\n  get _inputSource() {\n    return this[PRIVATE$2].inputSource;\n  }\n  _ensurePoseUpdated(device, frameId) {\n    if (frameId == this[PRIVATE$2].lastFrameId) return;\n    this[PRIVATE$2].lastFrameId = frameId;\n    this._onPoseUpdate(device);\n  }\n  _onPoseUpdate(device) {\n    if (this[PRIVATE$2].specialType == 'viewer') {\n      this._baseMatrix = device.getBasePoseMatrix();\n    }\n  }\n  set _baseMatrix(matrix) {\n    this[PRIVATE$2].baseMatrix = matrix;\n    this[PRIVATE$2].inverseBaseMatrix = null;\n  }\n  get _baseMatrix() {\n    if (!this[PRIVATE$2].baseMatrix) {\n      if (this[PRIVATE$2].inverseBaseMatrix) {\n        this[PRIVATE$2].baseMatrix = new Float32Array(16);\n        invert(this[PRIVATE$2].baseMatrix, this[PRIVATE$2].inverseBaseMatrix);\n      }\n    }\n    return this[PRIVATE$2].baseMatrix;\n  }\n  set _inverseBaseMatrix(matrix) {\n    this[PRIVATE$2].inverseBaseMatrix = matrix;\n    this[PRIVATE$2].baseMatrix = null;\n  }\n  get _inverseBaseMatrix() {\n    if (!this[PRIVATE$2].inverseBaseMatrix) {\n      if (this[PRIVATE$2].baseMatrix) {\n        this[PRIVATE$2].inverseBaseMatrix = new Float32Array(16);\n        invert(this[PRIVATE$2].inverseBaseMatrix, this[PRIVATE$2].baseMatrix);\n      }\n    }\n    return this[PRIVATE$2].inverseBaseMatrix;\n  }\n  _getSpaceRelativeTransform(space) {\n    if (!this._inverseBaseMatrix || !space._baseMatrix) {\n      return null;\n    }\n    let out = new Float32Array(16);\n    multiply(out, this._inverseBaseMatrix, space._baseMatrix);\n    return new XRRigidTransform$1(out);\n  }\n}\n\nconst DEFAULT_EMULATION_HEIGHT = 1.6;\nconst PRIVATE$3 = Symbol('@@webxr-polyfill/XRReferenceSpace');\nconst XRReferenceSpaceTypes = [\n  'viewer',\n  'local',\n  'local-floor',\n  'bounded-floor',\n  'unbounded'\n];\nfunction isFloor(type) {\n  return type === 'bounded-floor' || type === 'local-floor';\n}\nclass XRReferenceSpace extends XRSpace {\n  constructor(type, transform = null) {\n    if (!XRReferenceSpaceTypes.includes(type)) {\n      throw new Error(`XRReferenceSpaceType must be one of ${XRReferenceSpaceTypes}`);\n    }\n    super(type);\n    if (type === 'bounded-floor' && !transform) {\n      throw new Error(`XRReferenceSpace cannot use 'bounded-floor' type if the platform does not provide the floor level`);\n    }\n    if (isFloor(type) && !transform) {\n      transform = identity(new Float32Array(16));\n      transform[13] = DEFAULT_EMULATION_HEIGHT;\n    }\n    this._inverseBaseMatrix = transform || identity(new Float32Array(16));\n    this[PRIVATE$3] = {\n      type,\n      transform,\n      originOffset : identity(new Float32Array(16)),\n    };\n  }\n  _transformBasePoseMatrix(out, pose) {\n    multiply(out, this._inverseBaseMatrix, pose);\n  }\n  _originOffsetMatrix() {\n    return this[PRIVATE$3].originOffset;\n  }\n  _adjustForOriginOffset(transformMatrix) {\n    let inverseOriginOffsetMatrix = new Float32Array(16);\n    invert(inverseOriginOffsetMatrix, this[PRIVATE$3].originOffset);\n    multiply(transformMatrix, inverseOriginOffsetMatrix, transformMatrix);\n  }\n  _getSpaceRelativeTransform(space) {\n    let transform = super._getSpaceRelativeTransform(space);\n    this._adjustForOriginOffset(transform.matrix);\n    return new XRRigidTransform(transform.matrix);\n  }\n  getOffsetReferenceSpace(additionalOffset) {\n    let newSpace = new XRReferenceSpace(\n      this[PRIVATE$3].type,\n      this[PRIVATE$3].transform,\n      this[PRIVATE$3].bounds);\n    multiply(newSpace[PRIVATE$3].originOffset, this[PRIVATE$3].originOffset, additionalOffset.matrix);\n    return newSpace;\n  }\n}\n\nconst PRIVATE$4 = Symbol('@@webxr-polyfill/XR');\nconst XRSessionModes = ['inline', 'immersive-vr', 'immersive-ar'];\nconst DEFAULT_SESSION_OPTIONS = {\n  'inline': {\n    requiredFeatures: ['viewer'],\n    optionalFeatures: [],\n  },\n  'immersive-vr': {\n    requiredFeatures: ['viewer', 'local'],\n    optionalFeatures: [],\n  },\n  'immersive-ar': {\n    requiredFeatures: ['viewer', 'local'],\n    optionalFeatures: [],\n  }\n};\nconst POLYFILL_REQUEST_SESSION_ERROR =\n`Polyfill Error: Must call navigator.xr.isSessionSupported() with any XRSessionMode\nor navigator.xr.requestSession('inline') prior to requesting an immersive\nsession. This is a limitation specific to the WebXR Polyfill and does not apply\nto native implementations of the API.`;\nclass XRSystem extends EventTarget {\n  constructor(devicePromise) {\n    super();\n    this[PRIVATE$4] = {\n      device: null,\n      devicePromise,\n      immersiveSession: null,\n      inlineSessions: new Set(),\n    };\n    devicePromise.then((device) => { this[PRIVATE$4].device = device; });\n  }\n  async isSessionSupported(mode) {\n    if (!this[PRIVATE$4].device) {\n      await this[PRIVATE$4].devicePromise;\n    }\n    if (mode != 'inline') {\n      return Promise.resolve(this[PRIVATE$4].device.isSessionSupported(mode));\n    }\n    return Promise.resolve(true);\n  }\n  async requestSession(mode, options) {\n    if (!this[PRIVATE$4].device) {\n      if (mode != 'inline') {\n        throw new Error(POLYFILL_REQUEST_SESSION_ERROR);\n      } else {\n        await this[PRIVATE$4].devicePromise;\n      }\n    }\n    if (!XRSessionModes.includes(mode)) {\n      throw new TypeError(\n          `The provided value '${mode}' is not a valid enum value of type XRSessionMode`);\n    }\n    const defaultOptions = DEFAULT_SESSION_OPTIONS[mode];\n    const requiredFeatures = defaultOptions.requiredFeatures.concat(\n        options && options.requiredFeatures ? options.requiredFeatures : []);\n    const optionalFeatures = defaultOptions.optionalFeatures.concat(\n        options && options.optionalFeatures ? options.optionalFeatures : []);\n    const enabledFeatures = new Set();\n    let requirementsFailed = false;\n    for (let feature of requiredFeatures) {\n      if (!this[PRIVATE$4].device.isFeatureSupported(feature)) {\n        console.error(`The required feature '${feature}' is not supported`);\n        requirementsFailed = true;\n      } else {\n        enabledFeatures.add(feature);\n      }\n    }\n    if (requirementsFailed) {\n      throw new DOMException('Session does not support some required features', 'NotSupportedError');\n    }\n    for (let feature of optionalFeatures) {\n      if (!this[PRIVATE$4].device.isFeatureSupported(feature)) {\n        console.log(`The optional feature '${feature}' is not supported`);\n      } else {\n        enabledFeatures.add(feature);\n      }\n    }\n    const sessionId = await this[PRIVATE$4].device.requestSession(mode, enabledFeatures);\n    const session = new XRSession(this[PRIVATE$4].device, mode, sessionId);\n    if (mode == 'inline') {\n      this[PRIVATE$4].inlineSessions.add(session);\n    } else {\n      this[PRIVATE$4].immersiveSession = session;\n    }\n    const onSessionEnd = () => {\n      if (mode == 'inline') {\n        this[PRIVATE$4].inlineSessions.delete(session);\n      } else {\n        this[PRIVATE$4].immersiveSession = null;\n      }\n      session.removeEventListener('end', onSessionEnd);\n    };\n    session.addEventListener('end', onSessionEnd);\n    return session;\n  }\n}\n\nlet now;\nif ('performance' in _global === false) {\n  let startTime = Date.now();\n  now = () => Date.now() - startTime;\n} else {\n  now = () => performance.now();\n}\nvar now$1 = now;\n\nconst PRIVATE$5 = Symbol('@@webxr-polyfill/XRPose');\nclass XRPose$1 {\n  constructor(transform, emulatedPosition) {\n    this[PRIVATE$5] = {\n      transform,\n      emulatedPosition,\n    };\n  }\n  get transform() { return this[PRIVATE$5].transform; }\n  get emulatedPosition() { return this[PRIVATE$5].emulatedPosition; }\n}\n\nconst PRIVATE$6 = Symbol('@@webxr-polyfill/XRViewerPose');\nclass XRViewerPose extends XRPose$1 {\n  constructor(transform, views, emulatedPosition = false) {\n    super(transform, emulatedPosition);\n    this[PRIVATE$6] = {\n      views\n    };\n  }\n  get views() {\n    return this[PRIVATE$6].views;\n  }\n}\n\nconst PRIVATE$7 = Symbol('@@webxr-polyfill/XRViewport');\nclass XRViewport {\n  constructor(target) {\n    this[PRIVATE$7] = { target };\n  }\n  get x() { return this[PRIVATE$7].target.x; }\n  get y() { return this[PRIVATE$7].target.y; }\n  get width() { return this[PRIVATE$7].target.width; }\n  get height() { return this[PRIVATE$7].target.height; }\n}\n\nconst XREyes = ['left', 'right', 'none'];\nconst PRIVATE$8 = Symbol('@@webxr-polyfill/XRView');\nclass XRView {\n  constructor(device, transform, eye, sessionId) {\n    if (!XREyes.includes(eye)) {\n      throw new Error(`XREye must be one of: ${XREyes}`);\n    }\n    const temp = Object.create(null);\n    const viewport = new XRViewport(temp);\n    this[PRIVATE$8] = {\n      device,\n      eye,\n      viewport,\n      temp,\n      sessionId,\n      transform,\n    };\n  }\n  get eye() { return this[PRIVATE$8].eye; }\n  get projectionMatrix() { return this[PRIVATE$8].device.getProjectionMatrix(this.eye); }\n  get transform() { return this[PRIVATE$8].transform; }\n  _getViewport(layer) {\n    if (this[PRIVATE$8].device.getViewport(this[PRIVATE$8].sessionId,\n                                           this.eye,\n                                           layer,\n                                           this[PRIVATE$8].temp)) {\n      return this[PRIVATE$8].viewport;\n    }\n    return undefined;\n  }\n}\n\nconst PRIVATE$9 = Symbol('@@webxr-polyfill/XRFrame');\nconst NON_ACTIVE_MSG = \"XRFrame access outside the callback that produced it is invalid.\";\nconst NON_ANIMFRAME_MSG = \"getViewerPose can only be called on XRFrame objects passed to XRSession.requestAnimationFrame callbacks.\";\nlet NEXT_FRAME_ID = 0;\nclass XRFrame {\n  constructor(device, session, sessionId) {\n    this[PRIVATE$9] = {\n      id: ++NEXT_FRAME_ID,\n      active: false,\n      animationFrame: false,\n      device,\n      session,\n      sessionId\n    };\n  }\n  get session() { return this[PRIVATE$9].session; }\n  getViewerPose(referenceSpace) {\n    if (!this[PRIVATE$9].animationFrame) {\n      throw new DOMException(NON_ANIMFRAME_MSG, 'InvalidStateError');\n    }\n    if (!this[PRIVATE$9].active) {\n      throw new DOMException(NON_ACTIVE_MSG, 'InvalidStateError');\n    }\n    const device = this[PRIVATE$9].device;\n    const session = this[PRIVATE$9].session;\n    session[PRIVATE$15].viewerSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n    referenceSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n    let viewerTransform = referenceSpace._getSpaceRelativeTransform(session[PRIVATE$15].viewerSpace);\n    const views = [];\n    for (let viewSpace of session[PRIVATE$15].viewSpaces) {\n      viewSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      let viewTransform = referenceSpace._getSpaceRelativeTransform(viewSpace);\n      let view = new XRView(device, viewTransform, viewSpace.eye, this[PRIVATE$9].sessionId);\n      views.push(view);\n    }\n    let viewerPose = new XRViewerPose(viewerTransform, views, false                             );\n    return viewerPose;\n  }\n  getPose(space, baseSpace) {\n    if (!this[PRIVATE$9].active) {\n      throw new DOMException(NON_ACTIVE_MSG, 'InvalidStateError');\n    }\n    const device = this[PRIVATE$9].device;\n    if (space._specialType === \"target-ray\" || space._specialType === \"grip\") {\n      return device.getInputPose(\n        space._inputSource, baseSpace, space._specialType);\n    } else {\n      space._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      baseSpace._ensurePoseUpdated(device, this[PRIVATE$9].id);\n      let transform = baseSpace._getSpaceRelativeTransform(space);\n      if (!transform) { return null; }\n      return new XRPose(transform, false                             );\n    }\n    return null;\n  }\n}\n\nconst PRIVATE$10 = Symbol('@@webxr-polyfill/XRRenderState');\nconst XRRenderStateInit = Object.freeze({\n  depthNear: 0.1,\n  depthFar: 1000.0,\n  inlineVerticalFieldOfView: null,\n  baseLayer: null\n});\nclass XRRenderState {\n  constructor(stateInit = {}) {\n    const config = Object.assign({}, XRRenderStateInit, stateInit);\n    this[PRIVATE$10] = { config };\n  }\n  get depthNear() { return this[PRIVATE$10].config.depthNear; }\n  get depthFar() { return this[PRIVATE$10].config.depthFar; }\n  get inlineVerticalFieldOfView() { return this[PRIVATE$10].config.inlineVerticalFieldOfView; }\n  get baseLayer() { return this[PRIVATE$10].config.baseLayer; }\n}\n\nconst POLYFILLED_XR_COMPATIBLE = Symbol('@@webxr-polyfill/polyfilled-xr-compatible');\nconst XR_COMPATIBLE = Symbol('@@webxr-polyfill/xr-compatible');\n\nconst PRIVATE$11 = Symbol('@@webxr-polyfill/XRWebGLLayer');\nconst XRWebGLLayerInit = Object.freeze({\n  antialias: true,\n  depth: false,\n  stencil: false,\n  alpha: true,\n  multiview: false,\n  ignoreDepthValues: false,\n  framebufferScaleFactor: 1.0,\n});\nclass XRWebGLLayer {\n  constructor(session, context, layerInit={}) {\n    const config = Object.assign({}, XRWebGLLayerInit, layerInit);\n    if (!(session instanceof XRSession$1)) {\n      throw new Error('session must be a XRSession');\n    }\n    if (session.ended) {\n      throw new Error(`InvalidStateError`);\n    }\n    if (context[POLYFILLED_XR_COMPATIBLE]) {\n      if (context[XR_COMPATIBLE] !== true) {\n        throw new Error(`InvalidStateError`);\n      }\n    }\n    const framebuffer = context.getParameter(context.FRAMEBUFFER_BINDING);\n    this[PRIVATE$11] = {\n      context,\n      config,\n      framebuffer,\n      session,\n    };\n  }\n  get context() { return this[PRIVATE$11].context; }\n  get antialias() { return this[PRIVATE$11].config.antialias; }\n  get ignoreDepthValues() { return true; }\n  get framebuffer() { return this[PRIVATE$11].framebuffer; }\n  get framebufferWidth() { return this[PRIVATE$11].context.drawingBufferWidth; }\n  get framebufferHeight() { return this[PRIVATE$11].context.drawingBufferHeight; }\n  get _session() { return this[PRIVATE$11].session; }\n  getViewport(view) {\n    return view._getViewport(this);\n  }\n  static getNativeFramebufferScaleFactor(session) {\n    if (!session) {\n      throw new TypeError('getNativeFramebufferScaleFactor must be passed a session.')\n    }\n    if (session[PRIVATE$15].ended) { return 0.0; }\n    return 1.0;\n  }\n}\n\nconst PRIVATE$12 = Symbol('@@webxr-polyfill/XRInputSourceEvent');\nclass XRInputSourceEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$12] = {\n      frame: eventInitDict.frame,\n      inputSource: eventInitDict.inputSource\n    };\n    Object.setPrototypeOf(this, XRInputSourceEvent.prototype);\n  }\n  get frame() { return this[PRIVATE$12].frame; }\n  get inputSource() { return this[PRIVATE$12].inputSource; }\n}\n\nconst PRIVATE$13 = Symbol('@@webxr-polyfill/XRSessionEvent');\nclass XRSessionEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$13] = {\n      session: eventInitDict.session\n    };\n    Object.setPrototypeOf(this, XRSessionEvent.prototype);\n  }\n  get session() { return this[PRIVATE$13].session; }\n}\n\nconst PRIVATE$14 = Symbol('@@webxr-polyfill/XRInputSourcesChangeEvent');\nclass XRInputSourcesChangeEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$14] = {\n      session: eventInitDict.session,\n      added: eventInitDict.added,\n      removed: eventInitDict.removed\n    };\n    Object.setPrototypeOf(this, XRInputSourcesChangeEvent.prototype);\n  }\n  get session() { return this[PRIVATE$14].session; }\n  get added() { return this[PRIVATE$14].added; }\n  get removed() { return this[PRIVATE$14].removed; }\n}\n\nconst PRIVATE$15 = Symbol('@@webxr-polyfill/XRSession');\nclass XRViewSpace extends XRSpace {\n  constructor(eye) {\n    super(eye);\n  }\n  get eye() {\n    return this._specialType;\n  }\n  _onPoseUpdate(device) {\n    this._inverseBaseMatrix = device.getBaseViewMatrix(this._specialType);\n  }\n}\nclass XRSession$1 extends EventTarget {\n  constructor(device, mode, id) {\n    super();\n    let immersive = mode != 'inline';\n    let initialRenderState = new XRRenderState({\n      inlineVerticalFieldOfView: immersive ? null : Math.PI * 0.5\n    });\n    this[PRIVATE$15] = {\n      device,\n      mode,\n      immersive,\n      ended: false,\n      suspended: false,\n      frameCallbacks: [],\n      currentFrameCallbacks: null,\n      frameHandle: 0,\n      deviceFrameHandle: null,\n      id,\n      activeRenderState: initialRenderState,\n      pendingRenderState: null,\n      viewerSpace: new XRReferenceSpace(\"viewer\"),\n      viewSpaces: [],\n      currentInputSources: []\n    };\n    if (immersive) {\n      this[PRIVATE$15].viewSpaces.push(new XRViewSpace('left'),\n                                    new XRViewSpace('right'));\n    } else {\n      this[PRIVATE$15].viewSpaces.push(new XRViewSpace('none'));\n    }\n    this[PRIVATE$15].onDeviceFrame = () => {\n      if (this[PRIVATE$15].ended || this[PRIVATE$15].suspended) {\n        return;\n      }\n      this[PRIVATE$15].deviceFrameHandle = null;\n      this[PRIVATE$15].startDeviceFrameLoop();\n      if (this[PRIVATE$15].pendingRenderState !== null) {\n        this[PRIVATE$15].activeRenderState = new XRRenderState(this[PRIVATE$15].pendingRenderState);\n        this[PRIVATE$15].pendingRenderState = null;\n        if (this[PRIVATE$15].activeRenderState.baseLayer) {\n          this[PRIVATE$15].device.onBaseLayerSet(\n            this[PRIVATE$15].id,\n            this[PRIVATE$15].activeRenderState.baseLayer);\n        }\n      }\n      if (this[PRIVATE$15].activeRenderState.baseLayer === null) {\n        return;\n      }\n      const frame = new XRFrame(device, this, this[PRIVATE$15].id);\n      const callbacks = this[PRIVATE$15].currentFrameCallbacks = this[PRIVATE$15].frameCallbacks;\n      this[PRIVATE$15].frameCallbacks = [];\n      frame[PRIVATE$9].active = true;\n      frame[PRIVATE$9].animationFrame = true;\n      this[PRIVATE$15].device.onFrameStart(this[PRIVATE$15].id, this[PRIVATE$15].activeRenderState);\n      this._checkInputSourcesChange();\n      const rightNow = now$1();\n      for (let i = 0; i < callbacks.length; i++) {\n        try {\n          if (!callbacks[i].cancelled && typeof callbacks[i].callback === 'function') {\n            callbacks[i].callback(rightNow, frame);\n          }\n        } catch(err) {\n          console.error(err);\n        }\n      }\n      this[PRIVATE$15].currentFrameCallbacks = null;\n      frame[PRIVATE$9].active = false;\n      this[PRIVATE$15].device.onFrameEnd(this[PRIVATE$15].id);\n    };\n    this[PRIVATE$15].startDeviceFrameLoop = () => {\n      if (this[PRIVATE$15].deviceFrameHandle === null) {\n        this[PRIVATE$15].deviceFrameHandle = this[PRIVATE$15].device.requestAnimationFrame(\n          this[PRIVATE$15].onDeviceFrame\n        );\n      }\n    };\n    this[PRIVATE$15].stopDeviceFrameLoop = () => {\n      const handle = this[PRIVATE$15].deviceFrameHandle;\n      if (handle !== null) {\n        this[PRIVATE$15].device.cancelAnimationFrame(handle);\n        this[PRIVATE$15].deviceFrameHandle = null;\n      }\n    };\n    this[PRIVATE$15].onPresentationEnd = sessionId => {\n      if (sessionId !== this[PRIVATE$15].id) {\n        this[PRIVATE$15].suspended = false;\n        this[PRIVATE$15].startDeviceFrameLoop();\n        this.dispatchEvent('focus', { session: this });\n        return;\n      }\n      this[PRIVATE$15].ended = true;\n      this[PRIVATE$15].stopDeviceFrameLoop();\n      device.removeEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$15].onPresentationEnd);\n      device.removeEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$15].onPresentationStart);\n      device.removeEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$15].onSelectStart);\n      device.removeEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$15].onSelectEnd);\n      this.dispatchEvent('end', new XRSessionEvent('end', { session: this }));\n    };\n    device.addEventListener('@@webxr-polyfill/vr-present-end', this[PRIVATE$15].onPresentationEnd);\n    this[PRIVATE$15].onPresentationStart = sessionId => {\n      if (sessionId === this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].suspended = true;\n      this[PRIVATE$15].stopDeviceFrameLoop();\n      this.dispatchEvent('blur', { session: this });\n    };\n    device.addEventListener('@@webxr-polyfill/vr-present-start', this[PRIVATE$15].onPresentationStart);\n    this[PRIVATE$15].onSelectStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('selectstart',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-select-start', this[PRIVATE$15].onSelectStart);\n    this[PRIVATE$15].onSelectEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('selectend',  evt.inputSource);\n      this[PRIVATE$15].dispatchInputSourceEvent('select',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-select-end', this[PRIVATE$15].onSelectEnd);\n    this[PRIVATE$15].onSqueezeStart = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('squeezestart',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-squeeze-start', this[PRIVATE$15].onSqueezeStart);\n    this[PRIVATE$15].onSqueezeEnd = evt => {\n      if (evt.sessionId !== this[PRIVATE$15].id) {\n        return;\n      }\n      this[PRIVATE$15].dispatchInputSourceEvent('squeezeend',  evt.inputSource);\n      this[PRIVATE$15].dispatchInputSourceEvent('squeeze',  evt.inputSource);\n    };\n    device.addEventListener('@@webxr-polyfill/input-squeeze-end', this[PRIVATE$15].onSqueezeEnd);\n    this[PRIVATE$15].dispatchInputSourceEvent = (type, inputSource) => {\n      const frame = new XRFrame(device, this, this[PRIVATE$15].id);\n      const event = new XRInputSourceEvent(type, { frame, inputSource });\n      frame[PRIVATE$9].active = true;\n      this.dispatchEvent(type, event);\n      frame[PRIVATE$9].active = false;\n    };\n    this[PRIVATE$15].startDeviceFrameLoop();\n    this.onblur = undefined;\n    this.onfocus = undefined;\n    this.onresetpose = undefined;\n    this.onend = undefined;\n    this.onselect = undefined;\n    this.onselectstart = undefined;\n    this.onselectend = undefined;\n  }\n  get renderState() { return this[PRIVATE$15].activeRenderState; }\n  get environmentBlendMode() {\n    return this[PRIVATE$15].device.environmentBlendMode || 'opaque';\n  }\n  async requestReferenceSpace(type) {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    if (!XRReferenceSpaceTypes.includes(type)) {\n      throw new TypeError(`XRReferenceSpaceType must be one of ${XRReferenceSpaceTypes}`);\n    }\n    if (!this[PRIVATE$15].device.doesSessionSupportReferenceSpace(this[PRIVATE$15].id, type)) {\n      throw new DOMException(`The ${type} reference space is not supported by this session.`, 'NotSupportedError');\n    }\n    if (type === 'viewer') {\n      return this[PRIVATE$15].viewerSpace;\n    }\n    let transform = await this[PRIVATE$15].device.requestFrameOfReferenceTransform(type);\n    if (type === 'bounded-floor') {\n      if (!transform) {\n        throw new DOMException(`${type} XRReferenceSpace not supported by this device.`, 'NotSupportedError');\n      }\n      let bounds = this[PRIVATE$15].device.requestStageBounds();\n      if (!bounds) {\n        throw new DOMException(`${type} XRReferenceSpace not supported by this device.`, 'NotSupportedError');\n      }\n      throw new DOMException(`The WebXR polyfill does not support the ${type} reference space yet.`, 'NotSupportedError');\n    }\n    return new XRReferenceSpace(type, transform);\n  }\n  requestAnimationFrame(callback) {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    const handle = ++this[PRIVATE$15].frameHandle;\n    this[PRIVATE$15].frameCallbacks.push({\n      handle,\n      callback,\n      cancelled: false\n    });\n    return handle;\n  }\n  cancelAnimationFrame(handle) {\n    let callbacks = this[PRIVATE$15].frameCallbacks;\n    let index = callbacks.findIndex(d => d && d.handle === handle);\n    if (index > -1) {\n      callbacks[index].cancelled = true;\n      callbacks.splice(index, 1);\n    }\n    callbacks = this[PRIVATE$15].currentFrameCallbacks;\n    if (callbacks) {\n      index = callbacks.findIndex(d => d && d.handle === handle);\n      if (index > -1) {\n        callbacks[index].cancelled = true;\n      }\n    }\n  }\n  get inputSources() {\n    return this[PRIVATE$15].device.getInputSources();\n  }\n  async end() {\n    if (this[PRIVATE$15].ended) {\n      return;\n    }\n    if (this[PRIVATE$15].immersive) {\n      this[PRIVATE$15].ended = true;\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/vr-present-start',\n                                                 this[PRIVATE$15].onPresentationStart);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/vr-present-end',\n                                                 this[PRIVATE$15].onPresentationEnd);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/input-select-start',\n                                                 this[PRIVATE$15].onSelectStart);\n      this[PRIVATE$15].device.removeEventListener('@@webxr-polyfill/input-select-end',\n                                                 this[PRIVATE$15].onSelectEnd);\n      this.dispatchEvent('end', new XRSessionEvent('end', { session: this }));\n    }\n    this[PRIVATE$15].stopDeviceFrameLoop();\n    return this[PRIVATE$15].device.endSession(this[PRIVATE$15].id);\n  }\n  updateRenderState(newState) {\n    if (this[PRIVATE$15].ended) {\n      const message = \"Can't call updateRenderState on an XRSession \" +\n                      \"that has already ended.\";\n      throw new Error(message);\n    }\n    if (newState.baseLayer && (newState.baseLayer._session !== this)) {\n      const message = \"Called updateRenderState with a base layer that was \" +\n                      \"created by a different session.\";\n      throw new Error(message);\n    }\n    const fovSet = (newState.inlineVerticalFieldOfView !== null) &&\n                   (newState.inlineVerticalFieldOfView !== undefined);\n    if (fovSet) {\n      if (this[PRIVATE$15].immersive) {\n        const message = \"inlineVerticalFieldOfView must not be set for an \" +\n                        \"XRRenderState passed to updateRenderState for an \" +\n                        \"immersive session.\";\n        throw new Error(message);\n      } else {\n        newState.inlineVerticalFieldOfView = Math.min(\n          3.13, Math.max(0.01, newState.inlineVerticalFieldOfView));\n      }\n    }\n    if (this[PRIVATE$15].pendingRenderState === null) {\n      const activeRenderState = this[PRIVATE$15].activeRenderState;\n      this[PRIVATE$15].pendingRenderState = {\n        depthNear: activeRenderState.depthNear,\n        depthFar: activeRenderState.depthFar,\n        inlineVerticalFieldOfView: activeRenderState.inlineVerticalFieldOfView,\n        baseLayer: activeRenderState.baseLayer\n      };\n    }\n    Object.assign(this[PRIVATE$15].pendingRenderState, newState);\n  }\n  _checkInputSourcesChange() {\n    const added = [];\n    const removed = [];\n    const newInputSources = this.inputSources;\n    const oldInputSources = this[PRIVATE$15].currentInputSources;\n    for (const newInputSource of newInputSources) {\n      if (!oldInputSources.includes(newInputSource)) {\n        added.push(newInputSource);\n      }\n    }\n    for (const oldInputSource of oldInputSources) {\n      if (!newInputSources.includes(oldInputSource)) {\n        removed.push(oldInputSource);\n      }\n    }\n    if (added.length > 0 || removed.length > 0) {\n      this.dispatchEvent('inputsourceschange', new XRInputSourcesChangeEvent('inputsourceschange', {\n        session: this,\n        added: added,\n        removed: removed\n      }));\n    }\n    this[PRIVATE$15].currentInputSources.length = 0;\n    for (const newInputSource of newInputSources) {\n      this[PRIVATE$15].currentInputSources.push(newInputSource);\n    }\n  }\n}\n\nconst PRIVATE$16 = Symbol('@@webxr-polyfill/XRInputSource');\nclass XRInputSource {\n  constructor(impl) {\n    this[PRIVATE$16] = {\n      impl,\n      gripSpace: new XRSpace(\"grip\", this),\n      targetRaySpace: new XRSpace(\"target-ray\", this)\n    };\n  }\n  get handedness() { return this[PRIVATE$16].impl.handedness; }\n  get targetRayMode() { return this[PRIVATE$16].impl.targetRayMode; }\n  get gripSpace() {\n    let mode = this[PRIVATE$16].impl.targetRayMode;\n    if (mode === \"gaze\" || mode === \"screen\") {\n      return null;\n    }\n    return this[PRIVATE$16].gripSpace;\n  }\n  get targetRaySpace() { return this[PRIVATE$16].targetRaySpace; }\n  get profiles() { return this[PRIVATE$16].impl.profiles; }\n  get gamepad() { return this[PRIVATE$16].impl.gamepad; }\n}\n\nconst PRIVATE$17 = Symbol('@@webxr-polyfill/XRReferenceSpaceEvent');\nclass XRReferenceSpaceEvent extends Event {\n  constructor(type, eventInitDict) {\n    super(type, eventInitDict);\n    this[PRIVATE$17] = {\n      referenceSpace: eventInitDict.referenceSpace,\n      transform: eventInitDict.transform || null\n    };\n    Object.setPrototypeOf(this, XRReferenceSpaceEvent.prototype);\n  }\n  get referenceSpace() { return this[PRIVATE$17].referenceSpace; }\n  get transform() { return this[PRIVATE$17].transform; }\n}\n\nvar API = {\n  XRSystem,\n  XRSession: XRSession$1,\n  XRSessionEvent,\n  XRFrame,\n  XRView,\n  XRViewport,\n  XRViewerPose,\n  XRWebGLLayer,\n  XRSpace,\n  XRReferenceSpace,\n  XRReferenceSpaceEvent,\n  XRInputSource,\n  XRInputSourceEvent,\n  XRInputSourcesChangeEvent,\n  XRRenderState,\n  XRRigidTransform: XRRigidTransform$1,\n  XRPose: XRPose$1,\n};\n\nconst polyfillMakeXRCompatible = Context => {\n  if (typeof Context.prototype.makeXRCompatible === 'function') {\n    return false;\n  }\n  Context.prototype.makeXRCompatible = function () {\n    this[XR_COMPATIBLE] = true;\n    return Promise.resolve();\n  };\n  return true;\n};\nconst polyfillGetContext = (Canvas) => {\n  const getContext = Canvas.prototype.getContext;\n  Canvas.prototype.getContext = function (contextType, glAttribs) {\n    const ctx = getContext.call(this, contextType, glAttribs);\n    if (ctx) {\n      ctx[POLYFILLED_XR_COMPATIBLE] = true;\n      if (glAttribs && ('xrCompatible' in glAttribs)) {\n        ctx[XR_COMPATIBLE] = glAttribs.xrCompatible;\n      }\n    }\n    return ctx;\n  };\n};\n\nconst isImageBitmapSupported = global =>\n  !!(global.ImageBitmapRenderingContext &&\n     global.createImageBitmap);\nconst isMobile = global => {\n  var check = false;\n  (function(a){if(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0,4)))check = true;})(global.navigator.userAgent||global.navigator.vendor||global.opera);\n  return check;\n};\nconst applyCanvasStylesForMinimalRendering = canvas => {\n  canvas.style.display = 'block';\n  canvas.style.position = 'absolute';\n  canvas.style.width = canvas.style.height = '1px';\n  canvas.style.top = canvas.style.left = '0px';\n};\n\nvar commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n\n\nfunction unwrapExports (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar cardboardVrDisplay = createCommonjsModule(function (module, exports) {\n(function (global, factory) {\n\tmodule.exports = factory();\n}(commonjsGlobal, (function () { var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n    return _arr;\n  }\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\nvar MIN_TIMESTEP = 0.001;\nvar MAX_TIMESTEP = 1;\nvar dataUri = function dataUri(mimeType, svg) {\n  return 'data:' + mimeType + ',' + encodeURIComponent(svg);\n};\nvar lerp = function lerp(a, b, t) {\n  return a + (b - a) * t;\n};\nvar isIOS = function () {\n  var isIOS = /iPad|iPhone|iPod/.test(navigator.platform);\n  return function () {\n    return isIOS;\n  };\n}();\nvar isWebViewAndroid = function () {\n  var isWebViewAndroid = navigator.userAgent.indexOf('Version') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && navigator.userAgent.indexOf('Chrome') !== -1;\n  return function () {\n    return isWebViewAndroid;\n  };\n}();\nvar isSafari = function () {\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  return function () {\n    return isSafari;\n  };\n}();\nvar isFirefoxAndroid = function () {\n  var isFirefoxAndroid = navigator.userAgent.indexOf('Firefox') !== -1 && navigator.userAgent.indexOf('Android') !== -1;\n  return function () {\n    return isFirefoxAndroid;\n  };\n}();\nvar getChromeVersion = function () {\n  var match = navigator.userAgent.match(/.*Chrome\\/([0-9]+)/);\n  var value = match ? parseInt(match[1], 10) : null;\n  return function () {\n    return value;\n  };\n}();\nvar isSafariWithoutDeviceMotion = function () {\n  var value = false;\n  value = isIOS() && isSafari() && navigator.userAgent.indexOf('13_4') !== -1;\n  return function () {\n    return value;\n  };\n}();\nvar isChromeWithoutDeviceMotion = function () {\n  var value = false;\n  if (getChromeVersion() === 65) {\n    var match = navigator.userAgent.match(/.*Chrome\\/([0-9\\.]*)/);\n    if (match) {\n      var _match$1$split = match[1].split('.'),\n          _match$1$split2 = slicedToArray(_match$1$split, 4),\n          major = _match$1$split2[0],\n          minor = _match$1$split2[1],\n          branch = _match$1$split2[2],\n          build = _match$1$split2[3];\n      value = parseInt(branch, 10) === 3325 && parseInt(build, 10) < 148;\n    }\n  }\n  return function () {\n    return value;\n  };\n}();\nvar isR7 = function () {\n  var isR7 = navigator.userAgent.indexOf('R7 Build') !== -1;\n  return function () {\n    return isR7;\n  };\n}();\nvar isLandscapeMode = function isLandscapeMode() {\n  var rtn = window.orientation == 90 || window.orientation == -90;\n  return isR7() ? !rtn : rtn;\n};\nvar isTimestampDeltaValid = function isTimestampDeltaValid(timestampDeltaS) {\n  if (isNaN(timestampDeltaS)) {\n    return false;\n  }\n  if (timestampDeltaS <= MIN_TIMESTEP) {\n    return false;\n  }\n  if (timestampDeltaS > MAX_TIMESTEP) {\n    return false;\n  }\n  return true;\n};\nvar getScreenWidth = function getScreenWidth() {\n  return Math.max(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar getScreenHeight = function getScreenHeight() {\n  return Math.min(window.screen.width, window.screen.height) * window.devicePixelRatio;\n};\nvar requestFullscreen = function requestFullscreen(element) {\n  if (isWebViewAndroid()) {\n    return false;\n  }\n  if (element.requestFullscreen) {\n    element.requestFullscreen();\n  } else if (element.webkitRequestFullscreen) {\n    element.webkitRequestFullscreen();\n  } else if (element.mozRequestFullScreen) {\n    element.mozRequestFullScreen();\n  } else if (element.msRequestFullscreen) {\n    element.msRequestFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar exitFullscreen = function exitFullscreen() {\n  if (document.exitFullscreen) {\n    document.exitFullscreen();\n  } else if (document.webkitExitFullscreen) {\n    document.webkitExitFullscreen();\n  } else if (document.mozCancelFullScreen) {\n    document.mozCancelFullScreen();\n  } else if (document.msExitFullscreen) {\n    document.msExitFullscreen();\n  } else {\n    return false;\n  }\n  return true;\n};\nvar getFullscreenElement = function getFullscreenElement() {\n  return document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement;\n};\nvar linkProgram = function linkProgram(gl, vertexSource, fragmentSource, attribLocationMap) {\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, vertexSource);\n  gl.compileShader(vertexShader);\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, fragmentSource);\n  gl.compileShader(fragmentShader);\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  for (var attribName in attribLocationMap) {\n    gl.bindAttribLocation(program, attribLocationMap[attribName], attribName);\n  }gl.linkProgram(program);\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n  return program;\n};\nvar getProgramUniforms = function getProgramUniforms(gl, program) {\n  var uniforms = {};\n  var uniformCount = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  var uniformName = '';\n  for (var i = 0; i < uniformCount; i++) {\n    var uniformInfo = gl.getActiveUniform(program, i);\n    uniformName = uniformInfo.name.replace('[0]', '');\n    uniforms[uniformName] = gl.getUniformLocation(program, uniformName);\n  }\n  return uniforms;\n};\nvar orthoMatrix = function orthoMatrix(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right),\n      bt = 1 / (bottom - top),\n      nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n};\nvar isMobile = function isMobile() {\n  var check = false;\n  (function (a) {\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(a.substr(0, 4))) check = true;\n  })(navigator.userAgent || navigator.vendor || window.opera);\n  return check;\n};\nvar extend = function extend(dest, src) {\n  for (var key in src) {\n    if (src.hasOwnProperty(key)) {\n      dest[key] = src[key];\n    }\n  }\n  return dest;\n};\nvar safariCssSizeWorkaround = function safariCssSizeWorkaround(canvas) {\n  if (isIOS()) {\n    var width = canvas.style.width;\n    var height = canvas.style.height;\n    canvas.style.width = parseInt(width) + 1 + 'px';\n    canvas.style.height = parseInt(height) + 'px';\n    setTimeout(function () {\n      canvas.style.width = width;\n      canvas.style.height = height;\n    }, 100);\n  }\n  window.canvas = canvas;\n};\nvar frameDataFromPose = function () {\n  var piOver180 = Math.PI / 180.0;\n  var rad45 = Math.PI * 0.25;\n  function mat4_perspectiveFromFieldOfView(out, fov, near, far) {\n    var upTan = Math.tan(fov ? fov.upDegrees * piOver180 : rad45),\n        downTan = Math.tan(fov ? fov.downDegrees * piOver180 : rad45),\n        leftTan = Math.tan(fov ? fov.leftDegrees * piOver180 : rad45),\n        rightTan = Math.tan(fov ? fov.rightDegrees * piOver180 : rad45),\n        xScale = 2.0 / (leftTan + rightTan),\n        yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = far * near / (near - far);\n    out[15] = 0.0;\n    return out;\n  }\n  function mat4_fromRotationTranslation(out, q, v) {\n    var x = q[0],\n        y = q[1],\n        z = q[2],\n        w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n  }\n  function mat4_translate(out, a, v) {\n    var x = v[0],\n        y = v[1],\n        z = v[2],\n        a00,\n        a01,\n        a02,\n        a03,\n        a10,\n        a11,\n        a12,\n        a13,\n        a20,\n        a21,\n        a22,\n        a23;\n    if (a === out) {\n      out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n      out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n      out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n      out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n      a00 = a[0];a01 = a[1];a02 = a[2];a03 = a[3];\n      a10 = a[4];a11 = a[5];a12 = a[6];a13 = a[7];\n      a20 = a[8];a21 = a[9];a22 = a[10];a23 = a[11];\n      out[0] = a00;out[1] = a01;out[2] = a02;out[3] = a03;\n      out[4] = a10;out[5] = a11;out[6] = a12;out[7] = a13;\n      out[8] = a20;out[9] = a21;out[10] = a22;out[11] = a23;\n      out[12] = a00 * x + a10 * y + a20 * z + a[12];\n      out[13] = a01 * x + a11 * y + a21 * z + a[13];\n      out[14] = a02 * x + a12 * y + a22 * z + a[14];\n      out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n  }\n  function mat4_invert(out, a) {\n    var a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11],\n        a30 = a[12],\n        a31 = a[13],\n        a32 = a[14],\n        a33 = a[15],\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n    det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n      return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n  }\n  var defaultOrientation = new Float32Array([0, 0, 0, 1]);\n  var defaultPosition = new Float32Array([0, 0, 0]);\n  function updateEyeMatrices(projection, view, pose, fov, offset, vrDisplay) {\n    mat4_perspectiveFromFieldOfView(projection, fov || null, vrDisplay.depthNear, vrDisplay.depthFar);\n    var orientation = pose.orientation || defaultOrientation;\n    var position = pose.position || defaultPosition;\n    mat4_fromRotationTranslation(view, orientation, position);\n    if (offset) mat4_translate(view, view, offset);\n    mat4_invert(view, view);\n  }\n  return function (frameData, pose, vrDisplay) {\n    if (!frameData || !pose) return false;\n    frameData.pose = pose;\n    frameData.timestamp = pose.timestamp;\n    updateEyeMatrices(frameData.leftProjectionMatrix, frameData.leftViewMatrix, pose, vrDisplay._getFieldOfView(\"left\"), vrDisplay._getEyeOffset(\"left\"), vrDisplay);\n    updateEyeMatrices(frameData.rightProjectionMatrix, frameData.rightViewMatrix, pose, vrDisplay._getFieldOfView(\"right\"), vrDisplay._getEyeOffset(\"right\"), vrDisplay);\n    return true;\n  };\n}();\nvar isInsideCrossOriginIFrame = function isInsideCrossOriginIFrame() {\n  var isFramed = window.self !== window.top;\n  var refOrigin = getOriginFromUrl(document.referrer);\n  var thisOrigin = getOriginFromUrl(window.location.href);\n  return isFramed && refOrigin !== thisOrigin;\n};\nvar getOriginFromUrl = function getOriginFromUrl(url) {\n  var domainIdx;\n  var protoSepIdx = url.indexOf(\"://\");\n  if (protoSepIdx !== -1) {\n    domainIdx = protoSepIdx + 3;\n  } else {\n    domainIdx = 0;\n  }\n  var domainEndIdx = url.indexOf('/', domainIdx);\n  if (domainEndIdx === -1) {\n    domainEndIdx = url.length;\n  }\n  return url.substring(0, domainEndIdx);\n};\nvar getQuaternionAngle = function getQuaternionAngle(quat) {\n  if (quat.w > 1) {\n    console.warn('getQuaternionAngle: w > 1');\n    return 0;\n  }\n  var angle = 2 * Math.acos(quat.w);\n  return angle;\n};\nvar warnOnce = function () {\n  var observedWarnings = {};\n  return function (key, message) {\n    if (observedWarnings[key] === undefined) {\n      console.warn('webvr-polyfill: ' + message);\n      observedWarnings[key] = true;\n    }\n  };\n}();\nvar deprecateWarning = function deprecateWarning(deprecated, suggested) {\n  var alternative = suggested ? 'Please use ' + suggested + ' instead.' : '';\n  warnOnce(deprecated, deprecated + ' has been deprecated. ' + 'This may not work on native WebVR displays. ' + alternative);\n};\nfunction WGLUPreserveGLState(gl, bindings, callback) {\n  if (!bindings) {\n    callback(gl);\n    return;\n  }\n  var boundValues = [];\n  var activeTexture = null;\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    switch (binding) {\n      case gl.TEXTURE_BINDING_2D:\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31) {\n          console.error(\"TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit\");\n          boundValues.push(null, null);\n          break;\n        }\n        if (!activeTexture) {\n          activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        }\n        gl.activeTexture(textureUnit);\n        boundValues.push(gl.getParameter(binding), null);\n        break;\n      case gl.ACTIVE_TEXTURE:\n        activeTexture = gl.getParameter(gl.ACTIVE_TEXTURE);\n        boundValues.push(null);\n        break;\n      default:\n        boundValues.push(gl.getParameter(binding));\n        break;\n    }\n  }\n  callback(gl);\n  for (var i = 0; i < bindings.length; ++i) {\n    var binding = bindings[i];\n    var boundValue = boundValues[i];\n    switch (binding) {\n      case gl.ACTIVE_TEXTURE:\n        break;\n      case gl.ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ARRAY_BUFFER, boundValue);\n        break;\n      case gl.COLOR_CLEAR_VALUE:\n        gl.clearColor(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.COLOR_WRITEMASK:\n        gl.colorMask(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.CURRENT_PROGRAM:\n        gl.useProgram(boundValue);\n        break;\n      case gl.ELEMENT_ARRAY_BUFFER_BINDING:\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, boundValue);\n        break;\n      case gl.FRAMEBUFFER_BINDING:\n        gl.bindFramebuffer(gl.FRAMEBUFFER, boundValue);\n        break;\n      case gl.RENDERBUFFER_BINDING:\n        gl.bindRenderbuffer(gl.RENDERBUFFER, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_2D:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_2D, boundValue);\n        break;\n      case gl.TEXTURE_BINDING_CUBE_MAP:\n        var textureUnit = bindings[++i];\n        if (textureUnit < gl.TEXTURE0 || textureUnit > gl.TEXTURE31)\n          break;\n        gl.activeTexture(textureUnit);\n        gl.bindTexture(gl.TEXTURE_CUBE_MAP, boundValue);\n        break;\n      case gl.VIEWPORT:\n        gl.viewport(boundValue[0], boundValue[1], boundValue[2], boundValue[3]);\n        break;\n      case gl.BLEND:\n      case gl.CULL_FACE:\n      case gl.DEPTH_TEST:\n      case gl.SCISSOR_TEST:\n      case gl.STENCIL_TEST:\n        if (boundValue) {\n          gl.enable(binding);\n        } else {\n          gl.disable(binding);\n        }\n        break;\n      default:\n        console.log(\"No GL restore behavior for 0x\" + binding.toString(16));\n        break;\n    }\n    if (activeTexture) {\n      gl.activeTexture(activeTexture);\n    }\n  }\n}\nvar glPreserveState = WGLUPreserveGLState;\nvar distortionVS = ['attribute vec2 position;', 'attribute vec3 texCoord;', 'varying vec2 vTexCoord;', 'uniform vec4 viewportOffsetScale[2];', 'void main() {', '  vec4 viewport = viewportOffsetScale[int(texCoord.z)];', '  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;', '  gl_Position = vec4( position, 1.0, 1.0 );', '}'].join('\\n');\nvar distortionFS = ['precision mediump float;', 'uniform sampler2D diffuse;', 'varying vec2 vTexCoord;', 'void main() {', '  gl_FragColor = texture2D(diffuse, vTexCoord);', '}'].join('\\n');\nfunction CardboardDistorter(gl, cardboardUI, bufferScale, dirtySubmitFrameBindings) {\n  this.gl = gl;\n  this.cardboardUI = cardboardUI;\n  this.bufferScale = bufferScale;\n  this.dirtySubmitFrameBindings = dirtySubmitFrameBindings;\n  this.ctxAttribs = gl.getContextAttributes();\n  this.instanceExt = gl.getExtension('ANGLE_instanced_arrays');\n  this.meshWidth = 20;\n  this.meshHeight = 20;\n  this.bufferWidth = gl.drawingBufferWidth;\n  this.bufferHeight = gl.drawingBufferHeight;\n  this.realBindFramebuffer = gl.bindFramebuffer;\n  this.realEnable = gl.enable;\n  this.realDisable = gl.disable;\n  this.realColorMask = gl.colorMask;\n  this.realClearColor = gl.clearColor;\n  this.realViewport = gl.viewport;\n  if (!isIOS()) {\n    this.realCanvasWidth = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'width');\n    this.realCanvasHeight = Object.getOwnPropertyDescriptor(gl.canvas.__proto__, 'height');\n  }\n  this.isPatched = false;\n  this.lastBoundFramebuffer = null;\n  this.cullFace = false;\n  this.depthTest = false;\n  this.blend = false;\n  this.scissorTest = false;\n  this.stencilTest = false;\n  this.viewport = [0, 0, 0, 0];\n  this.colorMask = [true, true, true, true];\n  this.clearColor = [0, 0, 0, 0];\n  this.attribs = {\n    position: 0,\n    texCoord: 1\n  };\n  this.program = linkProgram(gl, distortionVS, distortionFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.viewportOffsetScale = new Float32Array(8);\n  this.setTextureBounds();\n  this.vertexBuffer = gl.createBuffer();\n  this.indexBuffer = gl.createBuffer();\n  this.indexCount = 0;\n  this.renderTarget = gl.createTexture();\n  this.framebuffer = gl.createFramebuffer();\n  this.depthStencilBuffer = null;\n  this.depthBuffer = null;\n  this.stencilBuffer = null;\n  if (this.ctxAttribs.depth && this.ctxAttribs.stencil) {\n    this.depthStencilBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.depth) {\n    this.depthBuffer = gl.createRenderbuffer();\n  } else if (this.ctxAttribs.stencil) {\n    this.stencilBuffer = gl.createRenderbuffer();\n  }\n  this.patch();\n  this.onResize();\n}\nCardboardDistorter.prototype.destroy = function () {\n  var gl = this.gl;\n  this.unpatch();\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n  gl.deleteBuffer(this.indexBuffer);\n  gl.deleteTexture(this.renderTarget);\n  gl.deleteFramebuffer(this.framebuffer);\n  if (this.depthStencilBuffer) {\n    gl.deleteRenderbuffer(this.depthStencilBuffer);\n  }\n  if (this.depthBuffer) {\n    gl.deleteRenderbuffer(this.depthBuffer);\n  }\n  if (this.stencilBuffer) {\n    gl.deleteRenderbuffer(this.stencilBuffer);\n  }\n  if (this.cardboardUI) {\n    this.cardboardUI.destroy();\n  }\n};\nCardboardDistorter.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.RENDERBUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0];\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.realClearColor.call(gl, 0, 0, 0, 1);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.framebuffer);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.texImage2D(gl.TEXTURE_2D, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, self.bufferWidth, self.bufferHeight, 0, self.ctxAttribs.alpha ? gl.RGBA : gl.RGB, gl.UNSIGNED_BYTE, null);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n    gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, self.renderTarget, 0);\n    if (self.ctxAttribs.depth && self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthStencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_STENCIL, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.depthStencilBuffer);\n    } else if (self.ctxAttribs.depth) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.depthBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.DEPTH_COMPONENT16, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.DEPTH_ATTACHMENT, gl.RENDERBUFFER, self.depthBuffer);\n    } else if (self.ctxAttribs.stencil) {\n      gl.bindRenderbuffer(gl.RENDERBUFFER, self.stencilBuffer);\n      gl.renderbufferStorage(gl.RENDERBUFFER, gl.STENCIL_INDEX8, self.bufferWidth, self.bufferHeight);\n      gl.framebufferRenderbuffer(gl.FRAMEBUFFER, gl.STENCIL_ATTACHMENT, gl.RENDERBUFFER, self.stencilBuffer);\n    }\n    if (!gl.checkFramebufferStatus(gl.FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      console.error('Framebuffer incomplete!');\n    }\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    self.realClearColor.apply(gl, self.clearColor);\n  });\n  if (this.cardboardUI) {\n    this.cardboardUI.onResize();\n  }\n};\nCardboardDistorter.prototype.patch = function () {\n  if (this.isPatched) {\n    return;\n  }\n  var self = this;\n  var canvas = this.gl.canvas;\n  var gl = this.gl;\n  if (!isIOS()) {\n    canvas.width = getScreenWidth() * this.bufferScale;\n    canvas.height = getScreenHeight() * this.bufferScale;\n    Object.defineProperty(canvas, 'width', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferWidth;\n      },\n      set: function set(value) {\n        self.bufferWidth = value;\n        self.realCanvasWidth.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n    Object.defineProperty(canvas, 'height', {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        return self.bufferHeight;\n      },\n      set: function set(value) {\n        self.bufferHeight = value;\n        self.realCanvasHeight.set.call(canvas, value);\n        self.onResize();\n      }\n    });\n  }\n  this.lastBoundFramebuffer = gl.getParameter(gl.FRAMEBUFFER_BINDING);\n  if (this.lastBoundFramebuffer == null) {\n    this.lastBoundFramebuffer = this.framebuffer;\n    this.gl.bindFramebuffer(gl.FRAMEBUFFER, this.framebuffer);\n  }\n  this.gl.bindFramebuffer = function (target, framebuffer) {\n    self.lastBoundFramebuffer = framebuffer ? framebuffer : self.framebuffer;\n    self.realBindFramebuffer.call(gl, target, self.lastBoundFramebuffer);\n  };\n  this.cullFace = gl.getParameter(gl.CULL_FACE);\n  this.depthTest = gl.getParameter(gl.DEPTH_TEST);\n  this.blend = gl.getParameter(gl.BLEND);\n  this.scissorTest = gl.getParameter(gl.SCISSOR_TEST);\n  this.stencilTest = gl.getParameter(gl.STENCIL_TEST);\n  gl.enable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = true;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = true;break;\n      case gl.BLEND:\n        self.blend = true;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = true;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = true;break;\n    }\n    self.realEnable.call(gl, pname);\n  };\n  gl.disable = function (pname) {\n    switch (pname) {\n      case gl.CULL_FACE:\n        self.cullFace = false;break;\n      case gl.DEPTH_TEST:\n        self.depthTest = false;break;\n      case gl.BLEND:\n        self.blend = false;break;\n      case gl.SCISSOR_TEST:\n        self.scissorTest = false;break;\n      case gl.STENCIL_TEST:\n        self.stencilTest = false;break;\n    }\n    self.realDisable.call(gl, pname);\n  };\n  this.colorMask = gl.getParameter(gl.COLOR_WRITEMASK);\n  gl.colorMask = function (r, g, b, a) {\n    self.colorMask[0] = r;\n    self.colorMask[1] = g;\n    self.colorMask[2] = b;\n    self.colorMask[3] = a;\n    self.realColorMask.call(gl, r, g, b, a);\n  };\n  this.clearColor = gl.getParameter(gl.COLOR_CLEAR_VALUE);\n  gl.clearColor = function (r, g, b, a) {\n    self.clearColor[0] = r;\n    self.clearColor[1] = g;\n    self.clearColor[2] = b;\n    self.clearColor[3] = a;\n    self.realClearColor.call(gl, r, g, b, a);\n  };\n  this.viewport = gl.getParameter(gl.VIEWPORT);\n  gl.viewport = function (x, y, w, h) {\n    self.viewport[0] = x;\n    self.viewport[1] = y;\n    self.viewport[2] = w;\n    self.viewport[3] = h;\n    self.realViewport.call(gl, x, y, w, h);\n  };\n  this.isPatched = true;\n  safariCssSizeWorkaround(canvas);\n};\nCardboardDistorter.prototype.unpatch = function () {\n  if (!this.isPatched) {\n    return;\n  }\n  var gl = this.gl;\n  var canvas = this.gl.canvas;\n  if (!isIOS()) {\n    Object.defineProperty(canvas, 'width', this.realCanvasWidth);\n    Object.defineProperty(canvas, 'height', this.realCanvasHeight);\n  }\n  canvas.width = this.bufferWidth;\n  canvas.height = this.bufferHeight;\n  gl.bindFramebuffer = this.realBindFramebuffer;\n  gl.enable = this.realEnable;\n  gl.disable = this.realDisable;\n  gl.colorMask = this.realColorMask;\n  gl.clearColor = this.realClearColor;\n  gl.viewport = this.realViewport;\n  if (this.lastBoundFramebuffer == this.framebuffer) {\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n  }\n  this.isPatched = false;\n  setTimeout(function () {\n    safariCssSizeWorkaround(canvas);\n  }, 1);\n};\nCardboardDistorter.prototype.setTextureBounds = function (leftBounds, rightBounds) {\n  if (!leftBounds) {\n    leftBounds = [0, 0, 0.5, 1];\n  }\n  if (!rightBounds) {\n    rightBounds = [0.5, 0, 0.5, 1];\n  }\n  this.viewportOffsetScale[0] = leftBounds[0];\n  this.viewportOffsetScale[1] = leftBounds[1];\n  this.viewportOffsetScale[2] = leftBounds[2];\n  this.viewportOffsetScale[3] = leftBounds[3];\n  this.viewportOffsetScale[4] = rightBounds[0];\n  this.viewportOffsetScale[5] = rightBounds[1];\n  this.viewportOffsetScale[6] = rightBounds[2];\n  this.viewportOffsetScale[7] = rightBounds[3];\n};\nCardboardDistorter.prototype.submitFrame = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [];\n  if (!this.dirtySubmitFrameBindings) {\n    glState.push(gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING, gl.TEXTURE_BINDING_2D, gl.TEXTURE0);\n  }\n  glPreserveState(gl, glState, function (gl) {\n    self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, null);\n    var positionDivisor = 0;\n    var texCoordDivisor = 0;\n    if (self.instanceExt) {\n      positionDivisor = gl.getVertexAttrib(self.attribs.position, self.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n      texCoordDivisor = gl.getVertexAttrib(self.attribs.texCoord, self.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE);\n    }\n    if (self.cullFace) {\n      self.realDisable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realDisable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realDisable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realDisable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realDisable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.call(gl, true, true, true, true);\n    self.realViewport.call(gl, 0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    if (self.ctxAttribs.alpha || isIOS()) {\n      self.realClearColor.call(gl, 0, 0, 0, 1);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    gl.useProgram(self.program);\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.enableVertexAttribArray(self.attribs.position);\n    gl.enableVertexAttribArray(self.attribs.texCoord);\n    gl.vertexAttribPointer(self.attribs.position, 2, gl.FLOAT, false, 20, 0);\n    gl.vertexAttribPointer(self.attribs.texCoord, 3, gl.FLOAT, false, 20, 8);\n    if (self.instanceExt) {\n      if (positionDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.position, 0);\n      }\n      if (texCoordDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.texCoord, 0);\n      }\n    }\n    gl.activeTexture(gl.TEXTURE0);\n    gl.uniform1i(self.uniforms.diffuse, 0);\n    gl.bindTexture(gl.TEXTURE_2D, self.renderTarget);\n    gl.uniform4fv(self.uniforms.viewportOffsetScale, self.viewportOffsetScale);\n    gl.drawElements(gl.TRIANGLES, self.indexCount, gl.UNSIGNED_SHORT, 0);\n    if (self.cardboardUI) {\n      self.cardboardUI.renderNoState();\n    }\n    self.realBindFramebuffer.call(self.gl, gl.FRAMEBUFFER, self.framebuffer);\n    if (!self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.call(gl, 0, 0, 0, 0);\n      gl.clear(gl.COLOR_BUFFER_BIT);\n    }\n    if (!self.dirtySubmitFrameBindings) {\n      self.realBindFramebuffer.call(gl, gl.FRAMEBUFFER, self.lastBoundFramebuffer);\n    }\n    if (self.cullFace) {\n      self.realEnable.call(gl, gl.CULL_FACE);\n    }\n    if (self.depthTest) {\n      self.realEnable.call(gl, gl.DEPTH_TEST);\n    }\n    if (self.blend) {\n      self.realEnable.call(gl, gl.BLEND);\n    }\n    if (self.scissorTest) {\n      self.realEnable.call(gl, gl.SCISSOR_TEST);\n    }\n    if (self.stencilTest) {\n      self.realEnable.call(gl, gl.STENCIL_TEST);\n    }\n    self.realColorMask.apply(gl, self.colorMask);\n    self.realViewport.apply(gl, self.viewport);\n    if (self.ctxAttribs.alpha || !self.ctxAttribs.preserveDrawingBuffer) {\n      self.realClearColor.apply(gl, self.clearColor);\n    }\n    if (self.instanceExt) {\n      if (positionDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.position, positionDivisor);\n      }\n      if (texCoordDivisor != 0) {\n        self.instanceExt.vertexAttribDivisorANGLE(self.attribs.texCoord, texCoordDivisor);\n      }\n    }\n  });\n  if (isIOS()) {\n    var canvas = gl.canvas;\n    if (canvas.width != self.bufferWidth || canvas.height != self.bufferHeight) {\n      self.bufferWidth = canvas.width;\n      self.bufferHeight = canvas.height;\n      self.onResize();\n    }\n  }\n};\nCardboardDistorter.prototype.updateDeviceInfo = function (deviceInfo) {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING, gl.ELEMENT_ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = self.computeMeshVertices_(self.meshWidth, self.meshHeight, deviceInfo);\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);\n    if (!self.indexCount) {\n      var indices = self.computeMeshIndices_(self.meshWidth, self.meshHeight);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, self.indexBuffer);\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n      self.indexCount = indices.length;\n    }\n  });\n};\nCardboardDistorter.prototype.computeMeshVertices_ = function (width, height, deviceInfo) {\n  var vertices = new Float32Array(2 * width * height * 5);\n  var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n  var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n  var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n  var vidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        var u = i / (width - 1);\n        var v = j / (height - 1);\n        var s = u;\n        var t = v;\n        var x = lerp(lensFrustum[0], lensFrustum[2], u);\n        var y = lerp(lensFrustum[3], lensFrustum[1], v);\n        var d = Math.sqrt(x * x + y * y);\n        var r = deviceInfo.distortion.distortInverse(d);\n        var p = x * r / d;\n        var q = y * r / d;\n        u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n        v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n        u = (viewport.x + u * viewport.width - 0.5) * 2.0;\n        v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n        vertices[vidx * 5 + 0] = u;\n        vertices[vidx * 5 + 1] = v;\n        vertices[vidx * 5 + 2] = s;\n        vertices[vidx * 5 + 3] = t;\n        vertices[vidx * 5 + 4] = e;\n      }\n    }\n    var w = lensFrustum[2] - lensFrustum[0];\n    lensFrustum[0] = -(w + lensFrustum[0]);\n    lensFrustum[2] = w - lensFrustum[2];\n    w = noLensFrustum[2] - noLensFrustum[0];\n    noLensFrustum[0] = -(w + noLensFrustum[0]);\n    noLensFrustum[2] = w - noLensFrustum[2];\n    viewport.x = 1 - (viewport.x + viewport.width);\n  }\n  return vertices;\n};\nCardboardDistorter.prototype.computeMeshIndices_ = function (width, height) {\n  var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n  var halfwidth = width / 2;\n  var halfheight = height / 2;\n  var vidx = 0;\n  var iidx = 0;\n  for (var e = 0; e < 2; e++) {\n    for (var j = 0; j < height; j++) {\n      for (var i = 0; i < width; i++, vidx++) {\n        if (i == 0 || j == 0) continue;\n        if (i <= halfwidth == j <= halfheight) {\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - width - 1;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - 1;\n        } else {\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx;\n          indices[iidx++] = vidx - width;\n          indices[iidx++] = vidx - 1;\n          indices[iidx++] = vidx - width - 1;\n        }\n      }\n    }\n  }\n  return indices;\n};\nCardboardDistorter.prototype.getOwnPropertyDescriptor_ = function (proto, attrName) {\n  var descriptor = Object.getOwnPropertyDescriptor(proto, attrName);\n  if (descriptor.get === undefined || descriptor.set === undefined) {\n    descriptor.configurable = true;\n    descriptor.enumerable = true;\n    descriptor.get = function () {\n      return this.getAttribute(attrName);\n    };\n    descriptor.set = function (val) {\n      this.setAttribute(attrName, val);\n    };\n  }\n  return descriptor;\n};\nvar uiVS = ['attribute vec2 position;', 'uniform mat4 projectionMat;', 'void main() {', '  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );', '}'].join('\\n');\nvar uiFS = ['precision mediump float;', 'uniform vec4 color;', 'void main() {', '  gl_FragColor = color;', '}'].join('\\n');\nvar DEG2RAD = Math.PI / 180.0;\nvar kAnglePerGearSection = 60;\nvar kOuterRimEndAngle = 12;\nvar kInnerRimBeginAngle = 20;\nvar kOuterRadius = 1;\nvar kMiddleRadius = 0.75;\nvar kInnerRadius = 0.3125;\nvar kCenterLineThicknessDp = 4;\nvar kButtonWidthDp = 28;\nvar kTouchSlopFactor = 1.5;\nfunction CardboardUI(gl) {\n  this.gl = gl;\n  this.attribs = {\n    position: 0\n  };\n  this.program = linkProgram(gl, uiVS, uiFS, this.attribs);\n  this.uniforms = getProgramUniforms(gl, this.program);\n  this.vertexBuffer = gl.createBuffer();\n  this.gearOffset = 0;\n  this.gearVertexCount = 0;\n  this.arrowOffset = 0;\n  this.arrowVertexCount = 0;\n  this.projMat = new Float32Array(16);\n  this.listener = null;\n  this.onResize();\n}\nCardboardUI.prototype.destroy = function () {\n  var gl = this.gl;\n  if (this.listener) {\n    gl.canvas.removeEventListener('click', this.listener, false);\n  }\n  gl.deleteProgram(this.program);\n  gl.deleteBuffer(this.vertexBuffer);\n};\nCardboardUI.prototype.listen = function (optionsCallback, backCallback) {\n  var canvas = this.gl.canvas;\n  this.listener = function (event) {\n    var midline = canvas.clientWidth / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor;\n    if (event.clientX > midline - buttonSize && event.clientX < midline + buttonSize && event.clientY > canvas.clientHeight - buttonSize) {\n      optionsCallback(event);\n    }\n    else if (event.clientX < buttonSize && event.clientY < buttonSize) {\n        backCallback(event);\n      }\n  };\n  canvas.addEventListener('click', this.listener, false);\n};\nCardboardUI.prototype.onResize = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    var vertices = [];\n    var midline = gl.drawingBufferWidth / 2;\n    var physicalPixels = Math.max(screen.width, screen.height) * window.devicePixelRatio;\n    var scalingRatio = gl.drawingBufferWidth / physicalPixels;\n    var dps = scalingRatio * window.devicePixelRatio;\n    var lineWidth = kCenterLineThicknessDp * dps / 2;\n    var buttonSize = kButtonWidthDp * kTouchSlopFactor * dps;\n    var buttonScale = kButtonWidthDp * dps / 2;\n    var buttonBorder = (kButtonWidthDp * kTouchSlopFactor - kButtonWidthDp) * dps;\n    vertices.push(midline - lineWidth, buttonSize);\n    vertices.push(midline - lineWidth, gl.drawingBufferHeight);\n    vertices.push(midline + lineWidth, buttonSize);\n    vertices.push(midline + lineWidth, gl.drawingBufferHeight);\n    self.gearOffset = vertices.length / 2;\n    function addGearSegment(theta, r) {\n      var angle = (90 - theta) * DEG2RAD;\n      var x = Math.cos(angle);\n      var y = Math.sin(angle);\n      vertices.push(kInnerRadius * x * buttonScale + midline, kInnerRadius * y * buttonScale + buttonScale);\n      vertices.push(r * x * buttonScale + midline, r * y * buttonScale + buttonScale);\n    }\n    for (var i = 0; i <= 6; i++) {\n      var segmentTheta = i * kAnglePerGearSection;\n      addGearSegment(segmentTheta, kOuterRadius);\n      addGearSegment(segmentTheta + kOuterRimEndAngle, kOuterRadius);\n      addGearSegment(segmentTheta + kInnerRimBeginAngle, kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kInnerRimBeginAngle), kMiddleRadius);\n      addGearSegment(segmentTheta + (kAnglePerGearSection - kOuterRimEndAngle), kOuterRadius);\n    }\n    self.gearVertexCount = vertices.length / 2 - self.gearOffset;\n    self.arrowOffset = vertices.length / 2;\n    function addArrowVertex(x, y) {\n      vertices.push(buttonBorder + x, gl.drawingBufferHeight - buttonBorder - y);\n    }\n    var angledLineWidth = lineWidth / Math.sin(45 * DEG2RAD);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, 0);\n    addArrowVertex(buttonScale + angledLineWidth, angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(buttonScale, buttonScale * 2);\n    addArrowVertex(buttonScale + angledLineWidth, buttonScale * 2 - angledLineWidth);\n    addArrowVertex(angledLineWidth, buttonScale - angledLineWidth);\n    addArrowVertex(0, buttonScale);\n    addArrowVertex(angledLineWidth, buttonScale - lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale - lineWidth);\n    addArrowVertex(angledLineWidth, buttonScale + lineWidth);\n    addArrowVertex(kButtonWidthDp * dps, buttonScale + lineWidth);\n    self.arrowVertexCount = vertices.length / 2 - self.arrowOffset;\n    gl.bindBuffer(gl.ARRAY_BUFFER, self.vertexBuffer);\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n  });\n};\nCardboardUI.prototype.render = function () {\n  var gl = this.gl;\n  var self = this;\n  var glState = [gl.CULL_FACE, gl.DEPTH_TEST, gl.BLEND, gl.SCISSOR_TEST, gl.STENCIL_TEST, gl.COLOR_WRITEMASK, gl.VIEWPORT, gl.CURRENT_PROGRAM, gl.ARRAY_BUFFER_BINDING];\n  glPreserveState(gl, glState, function (gl) {\n    gl.disable(gl.CULL_FACE);\n    gl.disable(gl.DEPTH_TEST);\n    gl.disable(gl.BLEND);\n    gl.disable(gl.SCISSOR_TEST);\n    gl.disable(gl.STENCIL_TEST);\n    gl.colorMask(true, true, true, true);\n    gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n    self.renderNoState();\n  });\n};\nCardboardUI.prototype.renderNoState = function () {\n  var gl = this.gl;\n  gl.useProgram(this.program);\n  gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n  gl.enableVertexAttribArray(this.attribs.position);\n  gl.vertexAttribPointer(this.attribs.position, 2, gl.FLOAT, false, 8, 0);\n  gl.uniform4f(this.uniforms.color, 1.0, 1.0, 1.0, 1.0);\n  orthoMatrix(this.projMat, 0, gl.drawingBufferWidth, 0, gl.drawingBufferHeight, 0.1, 1024.0);\n  gl.uniformMatrix4fv(this.uniforms.projectionMat, false, this.projMat);\n  gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.gearOffset, this.gearVertexCount);\n  gl.drawArrays(gl.TRIANGLE_STRIP, this.arrowOffset, this.arrowVertexCount);\n};\nfunction Distortion(coefficients) {\n  this.coefficients = coefficients;\n}\nDistortion.prototype.distortInverse = function (radius) {\n  var r0 = 0;\n  var r1 = 1;\n  var dr0 = radius - this.distort(r0);\n  while (Math.abs(r1 - r0) > 0.0001             ) {\n    var dr1 = radius - this.distort(r1);\n    var r2 = r1 - dr1 * ((r1 - r0) / (dr1 - dr0));\n    r0 = r1;\n    r1 = r2;\n    dr0 = dr1;\n  }\n  return r1;\n};\nDistortion.prototype.distort = function (radius) {\n  var r2 = radius * radius;\n  var ret = 0;\n  for (var i = 0; i < this.coefficients.length; i++) {\n    ret = r2 * (ret + this.coefficients[i]);\n  }\n  return (ret + 1) * radius;\n};\nvar degToRad = Math.PI / 180;\nvar radToDeg = 180 / Math.PI;\nvar Vector3 = function Vector3(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\nVector3.prototype = {\n  constructor: Vector3,\n  set: function set(x, y, z) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    return this;\n  },\n  copy: function copy(v) {\n    this.x = v.x;\n    this.y = v.y;\n    this.z = v.z;\n    return this;\n  },\n  length: function length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n  },\n  normalize: function normalize() {\n    var scalar = this.length();\n    if (scalar !== 0) {\n      var invScalar = 1 / scalar;\n      this.multiplyScalar(invScalar);\n    } else {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n    }\n    return this;\n  },\n  multiplyScalar: function multiplyScalar(scalar) {\n    this.x *= scalar;\n    this.y *= scalar;\n    this.z *= scalar;\n  },\n  applyQuaternion: function applyQuaternion(q) {\n    var x = this.x;\n    var y = this.y;\n    var z = this.z;\n    var qx = q.x;\n    var qy = q.y;\n    var qz = q.z;\n    var qw = q.w;\n    var ix = qw * x + qy * z - qz * y;\n    var iy = qw * y + qz * x - qx * z;\n    var iz = qw * z + qx * y - qy * x;\n    var iw = -qx * x - qy * y - qz * z;\n    this.x = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    this.y = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    this.z = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return this;\n  },\n  dot: function dot(v) {\n    return this.x * v.x + this.y * v.y + this.z * v.z;\n  },\n  crossVectors: function crossVectors(a, b) {\n    var ax = a.x,\n        ay = a.y,\n        az = a.z;\n    var bx = b.x,\n        by = b.y,\n        bz = b.z;\n    this.x = ay * bz - az * by;\n    this.y = az * bx - ax * bz;\n    this.z = ax * by - ay * bx;\n    return this;\n  }\n};\nvar Quaternion = function Quaternion(x, y, z, w) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n  this.w = w !== undefined ? w : 1;\n};\nQuaternion.prototype = {\n  constructor: Quaternion,\n  set: function set(x, y, z, w) {\n    this.x = x;\n    this.y = y;\n    this.z = z;\n    this.w = w;\n    return this;\n  },\n  copy: function copy(quaternion) {\n    this.x = quaternion.x;\n    this.y = quaternion.y;\n    this.z = quaternion.z;\n    this.w = quaternion.w;\n    return this;\n  },\n  setFromEulerXYZ: function setFromEulerXYZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 + s1 * s2 * c3;\n    this.w = c1 * c2 * c3 - s1 * s2 * s3;\n    return this;\n  },\n  setFromEulerYXZ: function setFromEulerYXZ(x, y, z) {\n    var c1 = Math.cos(x / 2);\n    var c2 = Math.cos(y / 2);\n    var c3 = Math.cos(z / 2);\n    var s1 = Math.sin(x / 2);\n    var s2 = Math.sin(y / 2);\n    var s3 = Math.sin(z / 2);\n    this.x = s1 * c2 * c3 + c1 * s2 * s3;\n    this.y = c1 * s2 * c3 - s1 * c2 * s3;\n    this.z = c1 * c2 * s3 - s1 * s2 * c3;\n    this.w = c1 * c2 * c3 + s1 * s2 * s3;\n    return this;\n  },\n  setFromAxisAngle: function setFromAxisAngle(axis, angle) {\n    var halfAngle = angle / 2,\n        s = Math.sin(halfAngle);\n    this.x = axis.x * s;\n    this.y = axis.y * s;\n    this.z = axis.z * s;\n    this.w = Math.cos(halfAngle);\n    return this;\n  },\n  multiply: function multiply(q) {\n    return this.multiplyQuaternions(this, q);\n  },\n  multiplyQuaternions: function multiplyQuaternions(a, b) {\n    var qax = a.x,\n        qay = a.y,\n        qaz = a.z,\n        qaw = a.w;\n    var qbx = b.x,\n        qby = b.y,\n        qbz = b.z,\n        qbw = b.w;\n    this.x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n    this.y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n    this.z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n    this.w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n    return this;\n  },\n  inverse: function inverse() {\n    this.x *= -1;\n    this.y *= -1;\n    this.z *= -1;\n    this.normalize();\n    return this;\n  },\n  normalize: function normalize() {\n    var l = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w);\n    if (l === 0) {\n      this.x = 0;\n      this.y = 0;\n      this.z = 0;\n      this.w = 1;\n    } else {\n      l = 1 / l;\n      this.x = this.x * l;\n      this.y = this.y * l;\n      this.z = this.z * l;\n      this.w = this.w * l;\n    }\n    return this;\n  },\n  slerp: function slerp(qb, t) {\n    if (t === 0) return this;\n    if (t === 1) return this.copy(qb);\n    var x = this.x,\n        y = this.y,\n        z = this.z,\n        w = this.w;\n    var cosHalfTheta = w * qb.w + x * qb.x + y * qb.y + z * qb.z;\n    if (cosHalfTheta < 0) {\n      this.w = -qb.w;\n      this.x = -qb.x;\n      this.y = -qb.y;\n      this.z = -qb.z;\n      cosHalfTheta = -cosHalfTheta;\n    } else {\n      this.copy(qb);\n    }\n    if (cosHalfTheta >= 1.0) {\n      this.w = w;\n      this.x = x;\n      this.y = y;\n      this.z = z;\n      return this;\n    }\n    var halfTheta = Math.acos(cosHalfTheta);\n    var sinHalfTheta = Math.sqrt(1.0 - cosHalfTheta * cosHalfTheta);\n    if (Math.abs(sinHalfTheta) < 0.001) {\n      this.w = 0.5 * (w + this.w);\n      this.x = 0.5 * (x + this.x);\n      this.y = 0.5 * (y + this.y);\n      this.z = 0.5 * (z + this.z);\n      return this;\n    }\n    var ratioA = Math.sin((1 - t) * halfTheta) / sinHalfTheta,\n        ratioB = Math.sin(t * halfTheta) / sinHalfTheta;\n    this.w = w * ratioA + this.w * ratioB;\n    this.x = x * ratioA + this.x * ratioB;\n    this.y = y * ratioA + this.y * ratioB;\n    this.z = z * ratioA + this.z * ratioB;\n    return this;\n  },\n  setFromUnitVectors: function () {\n    var v1, r;\n    var EPS = 0.000001;\n    return function (vFrom, vTo) {\n      if (v1 === undefined) v1 = new Vector3();\n      r = vFrom.dot(vTo) + 1;\n      if (r < EPS) {\n        r = 0;\n        if (Math.abs(vFrom.x) > Math.abs(vFrom.z)) {\n          v1.set(-vFrom.y, vFrom.x, 0);\n        } else {\n          v1.set(0, -vFrom.z, vFrom.y);\n        }\n      } else {\n        v1.crossVectors(vFrom, vTo);\n      }\n      this.x = v1.x;\n      this.y = v1.y;\n      this.z = v1.z;\n      this.w = r;\n      this.normalize();\n      return this;\n    };\n  }()\n};\nfunction Device(params) {\n  this.width = params.width || getScreenWidth();\n  this.height = params.height || getScreenHeight();\n  this.widthMeters = params.widthMeters;\n  this.heightMeters = params.heightMeters;\n  this.bevelMeters = params.bevelMeters;\n}\nvar DEFAULT_ANDROID = new Device({\n  widthMeters: 0.110,\n  heightMeters: 0.062,\n  bevelMeters: 0.004\n});\nvar DEFAULT_IOS = new Device({\n  widthMeters: 0.1038,\n  heightMeters: 0.0584,\n  bevelMeters: 0.004\n});\nvar Viewers = {\n  CardboardV1: new CardboardViewer({\n    id: 'CardboardV1',\n    label: 'Cardboard I/O 2014',\n    fov: 40,\n    interLensDistance: 0.060,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.042,\n    distortionCoefficients: [0.441, 0.156],\n    inverseCoefficients: [-0.4410035, 0.42756155, -0.4804439, 0.5460139, -0.58821183, 0.5733938, -0.48303202, 0.33299083, -0.17573841, 0.0651772, -0.01488963, 0.001559834]\n  }),\n  CardboardV2: new CardboardViewer({\n    id: 'CardboardV2',\n    label: 'Cardboard I/O 2015',\n    fov: 60,\n    interLensDistance: 0.064,\n    baselineLensDistance: 0.035,\n    screenLensDistance: 0.039,\n    distortionCoefficients: [0.34, 0.55],\n    inverseCoefficients: [-0.33836704, -0.18162185, 0.862655, -1.2462051, 1.0560602, -0.58208317, 0.21609078, -0.05444823, 0.009177956, -9.904169E-4, 6.183535E-5, -1.6981803E-6]\n  })\n};\nfunction DeviceInfo(deviceParams, additionalViewers) {\n  this.viewer = Viewers.CardboardV2;\n  this.updateDeviceParams(deviceParams);\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n  for (var i = 0; i < additionalViewers.length; i++) {\n    var viewer = additionalViewers[i];\n    Viewers[viewer.id] = new CardboardViewer(viewer);\n  }\n}\nDeviceInfo.prototype.updateDeviceParams = function (deviceParams) {\n  this.device = this.determineDevice_(deviceParams) || this.device;\n};\nDeviceInfo.prototype.getDevice = function () {\n  return this.device;\n};\nDeviceInfo.prototype.setViewer = function (viewer) {\n  this.viewer = viewer;\n  this.distortion = new Distortion(this.viewer.distortionCoefficients);\n};\nDeviceInfo.prototype.determineDevice_ = function (deviceParams) {\n  if (!deviceParams) {\n    if (isIOS()) {\n      console.warn('Using fallback iOS device measurements.');\n      return DEFAULT_IOS;\n    } else {\n      console.warn('Using fallback Android device measurements.');\n      return DEFAULT_ANDROID;\n    }\n  }\n  var METERS_PER_INCH = 0.0254;\n  var metersPerPixelX = METERS_PER_INCH / deviceParams.xdpi;\n  var metersPerPixelY = METERS_PER_INCH / deviceParams.ydpi;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  return new Device({\n    widthMeters: metersPerPixelX * width,\n    heightMeters: metersPerPixelY * height,\n    bevelMeters: deviceParams.bevelMm * 0.001\n  });\n};\nDeviceInfo.prototype.getDistortedFieldOfViewLeftEye = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var outerDist = (device.widthMeters - viewer.interLensDistance) / 2;\n  var innerDist = viewer.interLensDistance / 2;\n  var bottomDist = viewer.baselineLensDistance - device.bevelMeters;\n  var topDist = device.heightMeters - bottomDist;\n  var outerAngle = radToDeg * Math.atan(distortion.distort(outerDist / eyeToScreenDistance));\n  var innerAngle = radToDeg * Math.atan(distortion.distort(innerDist / eyeToScreenDistance));\n  var bottomAngle = radToDeg * Math.atan(distortion.distort(bottomDist / eyeToScreenDistance));\n  var topAngle = radToDeg * Math.atan(distortion.distort(topDist / eyeToScreenDistance));\n  return {\n    leftDegrees: Math.min(outerAngle, viewer.fov),\n    rightDegrees: Math.min(innerAngle, viewer.fov),\n    downDegrees: Math.min(bottomAngle, viewer.fov),\n    upDegrees: Math.min(topAngle, viewer.fov)\n  };\n};\nDeviceInfo.prototype.getLeftEyeVisibleTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var fovLeft = Math.tan(-degToRad * viewer.fov);\n  var fovTop = Math.tan(degToRad * viewer.fov);\n  var fovRight = Math.tan(degToRad * viewer.fov);\n  var fovBottom = Math.tan(-degToRad * viewer.fov);\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = distortion.distort((centerX - halfWidth) / centerZ);\n  var screenTop = distortion.distort((centerY + halfHeight) / centerZ);\n  var screenRight = distortion.distort((centerX + halfWidth) / centerZ);\n  var screenBottom = distortion.distort((centerY - halfHeight) / centerZ);\n  var result = new Float32Array(4);\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeNoLensTanAngles = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var result = new Float32Array(4);\n  var fovLeft = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var fovTop = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovRight = distortion.distortInverse(Math.tan(degToRad * viewer.fov));\n  var fovBottom = distortion.distortInverse(Math.tan(-degToRad * viewer.fov));\n  var halfWidth = device.widthMeters / 4;\n  var halfHeight = device.heightMeters / 2;\n  var verticalLensOffset = viewer.baselineLensDistance - device.bevelMeters - halfHeight;\n  var centerX = viewer.interLensDistance / 2 - halfWidth;\n  var centerY = -verticalLensOffset;\n  var centerZ = viewer.screenLensDistance;\n  var screenLeft = (centerX - halfWidth) / centerZ;\n  var screenTop = (centerY + halfHeight) / centerZ;\n  var screenRight = (centerX + halfWidth) / centerZ;\n  var screenBottom = (centerY - halfHeight) / centerZ;\n  result[0] = Math.max(fovLeft, screenLeft);\n  result[1] = Math.min(fovTop, screenTop);\n  result[2] = Math.min(fovRight, screenRight);\n  result[3] = Math.max(fovBottom, screenBottom);\n  return result;\n};\nDeviceInfo.prototype.getLeftEyeVisibleScreenRect = function (undistortedFrustum) {\n  var viewer = this.viewer;\n  var device = this.device;\n  var dist = viewer.screenLensDistance;\n  var eyeX = (device.widthMeters - viewer.interLensDistance) / 2;\n  var eyeY = viewer.baselineLensDistance - device.bevelMeters;\n  var left = (undistortedFrustum[0] * dist + eyeX) / device.widthMeters;\n  var top = (undistortedFrustum[1] * dist + eyeY) / device.heightMeters;\n  var right = (undistortedFrustum[2] * dist + eyeX) / device.widthMeters;\n  var bottom = (undistortedFrustum[3] * dist + eyeY) / device.heightMeters;\n  return {\n    x: left,\n    y: bottom,\n    width: right - left,\n    height: top - bottom\n  };\n};\nDeviceInfo.prototype.getFieldOfViewLeftEye = function (opt_isUndistorted) {\n  return opt_isUndistorted ? this.getUndistortedFieldOfViewLeftEye() : this.getDistortedFieldOfViewLeftEye();\n};\nDeviceInfo.prototype.getFieldOfViewRightEye = function (opt_isUndistorted) {\n  var fov = this.getFieldOfViewLeftEye(opt_isUndistorted);\n  return {\n    leftDegrees: fov.rightDegrees,\n    rightDegrees: fov.leftDegrees,\n    upDegrees: fov.upDegrees,\n    downDegrees: fov.downDegrees\n  };\n};\nDeviceInfo.prototype.getUndistortedFieldOfViewLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  return {\n    leftDegrees: radToDeg * Math.atan(p.outerDist),\n    rightDegrees: radToDeg * Math.atan(p.innerDist),\n    downDegrees: radToDeg * Math.atan(p.bottomDist),\n    upDegrees: radToDeg * Math.atan(p.topDist)\n  };\n};\nDeviceInfo.prototype.getUndistortedViewportLeftEye = function () {\n  var p = this.getUndistortedParams_();\n  var viewer = this.viewer;\n  var device = this.device;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var xPxPerTanAngle = device.width / screenWidth;\n  var yPxPerTanAngle = device.height / screenHeight;\n  var x = Math.round((p.eyePosX - p.outerDist) * xPxPerTanAngle);\n  var y = Math.round((p.eyePosY - p.bottomDist) * yPxPerTanAngle);\n  return {\n    x: x,\n    y: y,\n    width: Math.round((p.eyePosX + p.innerDist) * xPxPerTanAngle) - x,\n    height: Math.round((p.eyePosY + p.topDist) * yPxPerTanAngle) - y\n  };\n};\nDeviceInfo.prototype.getUndistortedParams_ = function () {\n  var viewer = this.viewer;\n  var device = this.device;\n  var distortion = this.distortion;\n  var eyeToScreenDistance = viewer.screenLensDistance;\n  var halfLensDistance = viewer.interLensDistance / 2 / eyeToScreenDistance;\n  var screenWidth = device.widthMeters / eyeToScreenDistance;\n  var screenHeight = device.heightMeters / eyeToScreenDistance;\n  var eyePosX = screenWidth / 2 - halfLensDistance;\n  var eyePosY = (viewer.baselineLensDistance - device.bevelMeters) / eyeToScreenDistance;\n  var maxFov = viewer.fov;\n  var viewerMax = distortion.distortInverse(Math.tan(degToRad * maxFov));\n  var outerDist = Math.min(eyePosX, viewerMax);\n  var innerDist = Math.min(halfLensDistance, viewerMax);\n  var bottomDist = Math.min(eyePosY, viewerMax);\n  var topDist = Math.min(screenHeight - eyePosY, viewerMax);\n  return {\n    outerDist: outerDist,\n    innerDist: innerDist,\n    topDist: topDist,\n    bottomDist: bottomDist,\n    eyePosX: eyePosX,\n    eyePosY: eyePosY\n  };\n};\nfunction CardboardViewer(params) {\n  this.id = params.id;\n  this.label = params.label;\n  this.fov = params.fov;\n  this.interLensDistance = params.interLensDistance;\n  this.baselineLensDistance = params.baselineLensDistance;\n  this.screenLensDistance = params.screenLensDistance;\n  this.distortionCoefficients = params.distortionCoefficients;\n  this.inverseCoefficients = params.inverseCoefficients;\n}\nDeviceInfo.Viewers = Viewers;\nvar format = 1;\nvar last_updated = \"2019-11-09T17:36:14Z\";\nvar devices = [{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/Nexus 7/*\"},{\"ua\":\"Nexus 7\"}],\"dpi\":[320.8,323],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X00PD/*\"},{\"ua\":\"ASUS_X00PD\"}],\"dpi\":245,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_X008D/*\"},{\"ua\":\"ASUS_X008D\"}],\"dpi\":282,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"asus/*/ASUS_Z00AD/*\"},{\"ua\":\"ASUS_Z00AD\"}],\"dpi\":[403,404.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2 XL/*\"},{\"ua\":\"Pixel 2 XL\"}],\"dpi\":537.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3 XL/*\"},{\"ua\":\"Pixel 3 XL\"}],\"dpi\":[558.5,553.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel XL/*\"},{\"ua\":\"Pixel XL\"}],\"dpi\":[537.9,533],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 3/*\"},{\"ua\":\"Pixel 3\"}],\"dpi\":442.4,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel 2/*\"},{\"ua\":\"Pixel 2\"}],\"dpi\":441,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Google/*/Pixel/*\"},{\"ua\":\"Pixel\"}],\"dpi\":[432.6,436.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC6435LVW/*\"},{\"ua\":\"HTC6435LVW\"}],\"dpi\":[449.7,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One XL/*\"},{\"ua\":\"HTC One XL\"}],\"dpi\":[315.3,314.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"htc/*/Nexus 9/*\"},{\"ua\":\"Nexus 9\"}],\"dpi\":289,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One M9/*\"},{\"ua\":\"HTC One M9\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One_M8/*\"},{\"ua\":\"HTC One_M8\"}],\"dpi\":[449.7,447.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"HTC/*/HTC One/*\"},{\"ua\":\"HTC One\"}],\"dpi\":472.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/Nexus 6P/*\"},{\"ua\":\"Nexus 6P\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BLN-L24/*\"},{\"ua\":\"HONORBLN-L24\"}],\"dpi\":480,\"bw\":4,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/BKL-L09/*\"},{\"ua\":\"BKL-L09\"}],\"dpi\":403,\"bw\":3.47,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LENOVO/*/Lenovo PB2-690Y/*\"},{\"ua\":\"Lenovo PB2-690Y\"}],\"dpi\":[457.2,454.713],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5X/*\"},{\"ua\":\"Nexus 5X\"}],\"dpi\":[422,419.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS345/*\"},{\"ua\":\"LGMS345\"}],\"dpi\":[221.7,219.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D800/*\"},{\"ua\":\"LG-D800\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-D850/*\"},{\"ua\":\"LG-D850\"}],\"dpi\":[537.9,541.9],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/VS985 4G/*\"},{\"ua\":\"VS985 4G\"}],\"dpi\":[537.9,535.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 5/*\"},{\"ua\":\"Nexus 5 B\"}],\"dpi\":[442.4,444.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/Nexus 4/*\"},{\"ua\":\"Nexus 4\"}],\"dpi\":[319.8,318.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LG-P769/*\"},{\"ua\":\"LG-P769\"}],\"dpi\":[240.6,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGMS323/*\"},{\"ua\":\"LGMS323\"}],\"dpi\":[206.6,204.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"LGE/*/LGLS996/*\"},{\"ua\":\"LGLS996\"}],\"dpi\":[403.4,401.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/4560MMX/*\"},{\"ua\":\"4560MMX\"}],\"dpi\":[240,219.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/A250/*\"},{\"ua\":\"Micromax A250\"}],\"dpi\":[480,446.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Micromax/*/Micromax AQ4501/*\"},{\"ua\":\"Micromax AQ4501\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G5/*\"},{\"ua\":\"Moto G (5) Plus\"}],\"dpi\":[403.4,403],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/DROID RAZR/*\"},{\"ua\":\"DROID RAZR\"}],\"dpi\":[368.1,256.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT830C/*\"},{\"ua\":\"XT830C\"}],\"dpi\":[254,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1021/*\"},{\"ua\":\"XT1021\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1023/*\"},{\"ua\":\"XT1023\"}],\"dpi\":[254,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1028/*\"},{\"ua\":\"XT1028\"}],\"dpi\":[326.6,327.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1034/*\"},{\"ua\":\"XT1034\"}],\"dpi\":[326.6,328.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1053/*\"},{\"ua\":\"XT1053\"}],\"dpi\":[315.3,316.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1562/*\"},{\"ua\":\"XT1562\"}],\"dpi\":[403.4,402.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/Nexus 6/*\"},{\"ua\":\"Nexus 6 B\"}],\"dpi\":[494.3,489.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1063/*\"},{\"ua\":\"XT1063\"}],\"dpi\":[295,296.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1064/*\"},{\"ua\":\"XT1064\"}],\"dpi\":[295,295.6],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1092/*\"},{\"ua\":\"XT1092\"}],\"dpi\":[422,424.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/XT1095/*\"},{\"ua\":\"XT1095\"}],\"dpi\":[422,423.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"motorola/*/G4/*\"},{\"ua\":\"Moto G (4)\"}],\"dpi\":401,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/A0001/*\"},{\"ua\":\"A0001\"}],\"dpi\":[403.4,401],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1001/*\"},{\"ua\":\"ONE E1001\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1003/*\"},{\"ua\":\"ONE E1003\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE E1005/*\"},{\"ua\":\"ONE E1005\"}],\"dpi\":[442.4,441.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2001/*\"},{\"ua\":\"ONE A2001\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2003/*\"},{\"ua\":\"ONE A2003\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A2005/*\"},{\"ua\":\"ONE A2005\"}],\"dpi\":[391.9,405.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3000/*\"},{\"ua\":\"ONEPLUS A3000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3003/*\"},{\"ua\":\"ONEPLUS A3003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A3010/*\"},{\"ua\":\"ONEPLUS A3010\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A5000/*\"},{\"ua\":\"ONEPLUS A5000 \"}],\"dpi\":[403.411,399.737],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONE A5010/*\"},{\"ua\":\"ONEPLUS A5010\"}],\"dpi\":[403,400],\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6000/*\"},{\"ua\":\"ONEPLUS A6000\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6003/*\"},{\"ua\":\"ONEPLUS A6003\"}],\"dpi\":401,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6010/*\"},{\"ua\":\"ONEPLUS A6010\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OnePlus/*/ONEPLUS A6013/*\"},{\"ua\":\"ONEPLUS A6013\"}],\"dpi\":401,\"bw\":2,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"OPPO/*/X909/*\"},{\"ua\":\"X909\"}],\"dpi\":[442.4,444.1],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9082/*\"},{\"ua\":\"GT-I9082\"}],\"dpi\":[184.7,185.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G360P/*\"},{\"ua\":\"SM-G360P\"}],\"dpi\":[196.7,205.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Nexus S/*\"},{\"ua\":\"Nexus S\"}],\"dpi\":[234.5,229.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[304.8,303.9],\"bw\":5,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T230NU/*\"},{\"ua\":\"SM-T230NU\"}],\"dpi\":216,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-T399/*\"},{\"ua\":\"SGH-T399\"}],\"dpi\":[217.7,231.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SGH-M919/*\"},{\"ua\":\"SGH-M919\"}],\"dpi\":[440.8,437.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N9005/*\"},{\"ua\":\"SM-N9005\"}],\"dpi\":[386.4,387],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SM-N900A/*\"},{\"ua\":\"SAMSUNG-SM-N900A\"}],\"dpi\":[386.4,387.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9500/*\"},{\"ua\":\"GT-I9500\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9505/*\"},{\"ua\":\"GT-I9505\"}],\"dpi\":439.4,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900F/*\"},{\"ua\":\"SM-G900F\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G900M/*\"},{\"ua\":\"SM-G900M\"}],\"dpi\":[415.6,431.6],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G800F/*\"},{\"ua\":\"SM-G800F\"}],\"dpi\":326.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G906S/*\"},{\"ua\":\"SM-G906S\"}],\"dpi\":[562.7,572.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300/*\"},{\"ua\":\"GT-I9300\"}],\"dpi\":[306.7,304.8],\"bw\":5,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-T535/*\"},{\"ua\":\"SM-T535\"}],\"dpi\":[142.6,136.4],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920C/*\"},{\"ua\":\"SM-N920C\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920P/*\"},{\"ua\":\"SM-N920P\"}],\"dpi\":[386.3655,390.144],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N920W8/*\"},{\"ua\":\"SM-N920W8\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9300I/*\"},{\"ua\":\"GT-I9300I\"}],\"dpi\":[304.8,305.8],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-I9195/*\"},{\"ua\":\"GT-I9195\"}],\"dpi\":[249.4,256.7],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-L520/*\"},{\"ua\":\"SPH-L520\"}],\"dpi\":[249.4,255.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SAMSUNG-SGH-I717/*\"},{\"ua\":\"SAMSUNG-SGH-I717\"}],\"dpi\":285.8,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SPH-D710/*\"},{\"ua\":\"SPH-D710\"}],\"dpi\":[217.7,204.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/GT-N7100/*\"},{\"ua\":\"GT-N7100\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SCH-I605/*\"},{\"ua\":\"SCH-I605\"}],\"dpi\":265.1,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/Galaxy Nexus/*\"},{\"ua\":\"Galaxy Nexus\"}],\"dpi\":[315.3,314.2],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910H/*\"},{\"ua\":\"SM-N910H\"}],\"dpi\":[515.1,518],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-N910C/*\"},{\"ua\":\"SM-N910C\"}],\"dpi\":[515.2,520.2],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G130M/*\"},{\"ua\":\"SM-G130M\"}],\"dpi\":[165.9,164.8],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G928I/*\"},{\"ua\":\"SM-G928I\"}],\"dpi\":[515.1,518.4],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920F/*\"},{\"ua\":\"SM-G920F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G920P/*\"},{\"ua\":\"SM-G920P\"}],\"dpi\":[522.5,577],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925F/*\"},{\"ua\":\"SM-G925F\"}],\"dpi\":580.6,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G925V/*\"},{\"ua\":\"SM-G925V\"}],\"dpi\":[522.5,576.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G930F/*\"},{\"ua\":\"SM-G930F\"}],\"dpi\":576.6,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G935F/*\"},{\"ua\":\"SM-G935F\"}],\"dpi\":533,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G950F/*\"},{\"ua\":\"SM-G950F\"}],\"dpi\":[562.707,565.293],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955U/*\"},{\"ua\":\"SM-G955U\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G955F/*\"},{\"ua\":\"SM-G955F\"}],\"dpi\":[522.514,525.762],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960F/*\"},{\"ua\":\"SM-G960F\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9600/*\"},{\"ua\":\"SM-G9600\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960T/*\"},{\"ua\":\"SM-G960T\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960N/*\"},{\"ua\":\"SM-G960N\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960U/*\"},{\"ua\":\"SM-G960U\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G9608/*\"},{\"ua\":\"SM-G9608\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960FD/*\"},{\"ua\":\"SM-G960FD\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G960W/*\"},{\"ua\":\"SM-G960W\"}],\"dpi\":[569.575,571.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G965F/*\"},{\"ua\":\"SM-G965F\"}],\"dpi\":529,\"bw\":2,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/C6903/*\"},{\"ua\":\"C6903\"}],\"dpi\":[442.5,443.3],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/D6653/*\"},{\"ua\":\"D6653\"}],\"dpi\":[428.6,427.6],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6653/*\"},{\"ua\":\"E6653\"}],\"dpi\":[428.6,425.7],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/E6853/*\"},{\"ua\":\"E6853\"}],\"dpi\":[403.4,401.9],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Sony/*/SGP321/*\"},{\"ua\":\"SGP321\"}],\"dpi\":[224.7,224.1],\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"TCT/*/ALCATEL ONE TOUCH Fierce/*\"},{\"ua\":\"ALCATEL ONE TOUCH Fierce\"}],\"dpi\":[240,247.5],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"THL/*/thl 5000/*\"},{\"ua\":\"thl 5000\"}],\"dpi\":[480,443.3],\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Fly/*/IQ4412/*\"},{\"ua\":\"IQ4412\"}],\"dpi\":307.9,\"bw\":3,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"ZTE/*/ZTE Blade L2/*\"},{\"ua\":\"ZTE Blade L2\"}],\"dpi\":240,\"bw\":3,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"BENEVE/*/VR518/*\"},{\"ua\":\"VR518\"}],\"dpi\":480,\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[640,960]}],\"dpi\":[325.1,328.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[640,1136]}],\"dpi\":[317.1,320.2],\"bw\":3,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[750,1334]}],\"dpi\":326.4,\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2208]}],\"dpi\":[453.6,458.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2001]}],\"dpi\":[410.9,415.4],\"bw\":4,\"ac\":1000},{\"type\":\"ios\",\"rules\":[{\"res\":[1125,2436]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Huawei/*/EML-L29/*\"},{\"ua\":\"EML-L29\"}],\"dpi\":428,\"bw\":3.45,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"Nokia/*/Nokia 7.1/*\"},{\"ua\":\"Nokia 7.1\"}],\"dpi\":[432,431.9],\"bw\":3,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[1242,2688]}],\"dpi\":458,\"bw\":4,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G570M/*\"},{\"ua\":\"SM-G570M\"}],\"dpi\":320,\"bw\":3.684,\"ac\":1000},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G970F/*\"},{\"ua\":\"SM-G970F\"}],\"dpi\":438,\"bw\":2.281,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G973F/*\"},{\"ua\":\"SM-G973F\"}],\"dpi\":550,\"bw\":2.002,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G975F/*\"},{\"ua\":\"SM-G975F\"}],\"dpi\":522,\"bw\":2.054,\"ac\":500},{\"type\":\"android\",\"rules\":[{\"mdmh\":\"samsung/*/SM-G977F/*\"},{\"ua\":\"SM-G977F\"}],\"dpi\":505,\"bw\":2.334,\"ac\":500},{\"type\":\"ios\",\"rules\":[{\"res\":[828,1792]}],\"dpi\":326,\"bw\":5,\"ac\":500}];\nvar DPDB_CACHE = {\n\tformat: format,\n\tlast_updated: last_updated,\n\tdevices: devices\n};\nfunction Dpdb(url, onDeviceParamsUpdated) {\n  this.dpdb = DPDB_CACHE;\n  this.recalculateDeviceParams_();\n  if (url) {\n    this.onDeviceParamsUpdated = onDeviceParamsUpdated;\n    var xhr = new XMLHttpRequest();\n    var obj = this;\n    xhr.open('GET', url, true);\n    xhr.addEventListener('load', function () {\n      obj.loading = false;\n      if (xhr.status >= 200 && xhr.status <= 299) {\n        obj.dpdb = JSON.parse(xhr.response);\n        obj.recalculateDeviceParams_();\n      } else {\n        console.error('Error loading online DPDB!');\n      }\n    });\n    xhr.send();\n  }\n}\nDpdb.prototype.getDeviceParams = function () {\n  return this.deviceParams;\n};\nDpdb.prototype.recalculateDeviceParams_ = function () {\n  var newDeviceParams = this.calcDeviceParams_();\n  if (newDeviceParams) {\n    this.deviceParams = newDeviceParams;\n    if (this.onDeviceParamsUpdated) {\n      this.onDeviceParamsUpdated(this.deviceParams);\n    }\n  } else {\n    console.error('Failed to recalculate device parameters.');\n  }\n};\nDpdb.prototype.calcDeviceParams_ = function () {\n  var db = this.dpdb;\n  if (!db) {\n    console.error('DPDB not available.');\n    return null;\n  }\n  if (db.format != 1) {\n    console.error('DPDB has unexpected format version.');\n    return null;\n  }\n  if (!db.devices || !db.devices.length) {\n    console.error('DPDB does not have a devices section.');\n    return null;\n  }\n  var userAgent = navigator.userAgent || navigator.vendor || window.opera;\n  var width = getScreenWidth();\n  var height = getScreenHeight();\n  if (!db.devices) {\n    console.error('DPDB has no devices section.');\n    return null;\n  }\n  for (var i = 0; i < db.devices.length; i++) {\n    var device = db.devices[i];\n    if (!device.rules) {\n      console.warn('Device[' + i + '] has no rules section.');\n      continue;\n    }\n    if (device.type != 'ios' && device.type != 'android') {\n      console.warn('Device[' + i + '] has invalid type.');\n      continue;\n    }\n    if (isIOS() != (device.type == 'ios')) continue;\n    var matched = false;\n    for (var j = 0; j < device.rules.length; j++) {\n      var rule = device.rules[j];\n      if (this.ruleMatches_(rule, userAgent, width, height)) {\n        matched = true;\n        break;\n      }\n    }\n    if (!matched) continue;\n    var xdpi = device.dpi[0] || device.dpi;\n    var ydpi = device.dpi[1] || device.dpi;\n    return new DeviceParams({ xdpi: xdpi, ydpi: ydpi, bevelMm: device.bw });\n  }\n  console.warn('No DPDB device match.');\n  return null;\n};\nDpdb.prototype.ruleMatches_ = function (rule, ua, screenWidth, screenHeight) {\n  if (!rule.ua && !rule.res) return false;\n  if (rule.ua && rule.ua.substring(0, 2) === 'SM') rule.ua = rule.ua.substring(0, 7);\n  if (rule.ua && ua.indexOf(rule.ua) < 0) return false;\n  if (rule.res) {\n    if (!rule.res[0] || !rule.res[1]) return false;\n    var resX = rule.res[0];\n    var resY = rule.res[1];\n    if (Math.min(screenWidth, screenHeight) != Math.min(resX, resY) || Math.max(screenWidth, screenHeight) != Math.max(resX, resY)) {\n      return false;\n    }\n  }\n  return true;\n};\nfunction DeviceParams(params) {\n  this.xdpi = params.xdpi;\n  this.ydpi = params.ydpi;\n  this.bevelMm = params.bevelMm;\n}\nfunction SensorSample(sample, timestampS) {\n  this.set(sample, timestampS);\n}\nSensorSample.prototype.set = function (sample, timestampS) {\n  this.sample = sample;\n  this.timestampS = timestampS;\n};\nSensorSample.prototype.copy = function (sensorSample) {\n  this.set(sensorSample.sample, sensorSample.timestampS);\n};\nfunction ComplementaryFilter(kFilter, isDebug) {\n  this.kFilter = kFilter;\n  this.isDebug = isDebug;\n  this.currentAccelMeasurement = new SensorSample();\n  this.currentGyroMeasurement = new SensorSample();\n  this.previousGyroMeasurement = new SensorSample();\n  if (isIOS()) {\n    this.filterQ = new Quaternion(-1, 0, 0, 1);\n  } else {\n    this.filterQ = new Quaternion(1, 0, 0, 1);\n  }\n  this.previousFilterQ = new Quaternion();\n  this.previousFilterQ.copy(this.filterQ);\n  this.accelQ = new Quaternion();\n  this.isOrientationInitialized = false;\n  this.estimatedGravity = new Vector3();\n  this.measuredGravity = new Vector3();\n  this.gyroIntegralQ = new Quaternion();\n}\nComplementaryFilter.prototype.addAccelMeasurement = function (vector, timestampS) {\n  this.currentAccelMeasurement.set(vector, timestampS);\n};\nComplementaryFilter.prototype.addGyroMeasurement = function (vector, timestampS) {\n  this.currentGyroMeasurement.set(vector, timestampS);\n  var deltaT = timestampS - this.previousGyroMeasurement.timestampS;\n  if (isTimestampDeltaValid(deltaT)) {\n    this.run_();\n  }\n  this.previousGyroMeasurement.copy(this.currentGyroMeasurement);\n};\nComplementaryFilter.prototype.run_ = function () {\n  if (!this.isOrientationInitialized) {\n    this.accelQ = this.accelToQuaternion_(this.currentAccelMeasurement.sample);\n    this.previousFilterQ.copy(this.accelQ);\n    this.isOrientationInitialized = true;\n    return;\n  }\n  var deltaT = this.currentGyroMeasurement.timestampS - this.previousGyroMeasurement.timestampS;\n  var gyroDeltaQ = this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample, deltaT);\n  this.gyroIntegralQ.multiply(gyroDeltaQ);\n  this.filterQ.copy(this.previousFilterQ);\n  this.filterQ.multiply(gyroDeltaQ);\n  var invFilterQ = new Quaternion();\n  invFilterQ.copy(this.filterQ);\n  invFilterQ.inverse();\n  this.estimatedGravity.set(0, 0, -1);\n  this.estimatedGravity.applyQuaternion(invFilterQ);\n  this.estimatedGravity.normalize();\n  this.measuredGravity.copy(this.currentAccelMeasurement.sample);\n  this.measuredGravity.normalize();\n  var deltaQ = new Quaternion();\n  deltaQ.setFromUnitVectors(this.estimatedGravity, this.measuredGravity);\n  deltaQ.inverse();\n  if (this.isDebug) {\n    console.log('Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)', radToDeg * getQuaternionAngle(deltaQ), this.estimatedGravity.x.toFixed(1), this.estimatedGravity.y.toFixed(1), this.estimatedGravity.z.toFixed(1), this.measuredGravity.x.toFixed(1), this.measuredGravity.y.toFixed(1), this.measuredGravity.z.toFixed(1));\n  }\n  var targetQ = new Quaternion();\n  targetQ.copy(this.filterQ);\n  targetQ.multiply(deltaQ);\n  this.filterQ.slerp(targetQ, 1 - this.kFilter);\n  this.previousFilterQ.copy(this.filterQ);\n};\nComplementaryFilter.prototype.getOrientation = function () {\n  return this.filterQ;\n};\nComplementaryFilter.prototype.accelToQuaternion_ = function (accel) {\n  var normAccel = new Vector3();\n  normAccel.copy(accel);\n  normAccel.normalize();\n  var quat = new Quaternion();\n  quat.setFromUnitVectors(new Vector3(0, 0, -1), normAccel);\n  quat.inverse();\n  return quat;\n};\nComplementaryFilter.prototype.gyroToQuaternionDelta_ = function (gyro, dt) {\n  var quat = new Quaternion();\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  quat.setFromAxisAngle(axis, gyro.length() * dt);\n  return quat;\n};\nfunction PosePredictor(predictionTimeS, isDebug) {\n  this.predictionTimeS = predictionTimeS;\n  this.isDebug = isDebug;\n  this.previousQ = new Quaternion();\n  this.previousTimestampS = null;\n  this.deltaQ = new Quaternion();\n  this.outQ = new Quaternion();\n}\nPosePredictor.prototype.getPrediction = function (currentQ, gyro, timestampS) {\n  if (!this.previousTimestampS) {\n    this.previousQ.copy(currentQ);\n    this.previousTimestampS = timestampS;\n    return currentQ;\n  }\n  var axis = new Vector3();\n  axis.copy(gyro);\n  axis.normalize();\n  var angularSpeed = gyro.length();\n  if (angularSpeed < degToRad * 20) {\n    if (this.isDebug) {\n      console.log('Moving slowly, at %s deg/s: no prediction', (radToDeg * angularSpeed).toFixed(1));\n    }\n    this.outQ.copy(currentQ);\n    this.previousQ.copy(currentQ);\n    return this.outQ;\n  }\n  var predictAngle = angularSpeed * this.predictionTimeS;\n  this.deltaQ.setFromAxisAngle(axis, predictAngle);\n  this.outQ.copy(this.previousQ);\n  this.outQ.multiply(this.deltaQ);\n  this.previousQ.copy(currentQ);\n  this.previousTimestampS = timestampS;\n  return this.outQ;\n};\nfunction FusionPoseSensor(kFilter, predictionTime, yawOnly, isDebug) {\n  this.yawOnly = yawOnly;\n  this.accelerometer = new Vector3();\n  this.gyroscope = new Vector3();\n  this.filter = new ComplementaryFilter(kFilter, isDebug);\n  this.posePredictor = new PosePredictor(predictionTime, isDebug);\n  this.isFirefoxAndroid = isFirefoxAndroid();\n  this.isIOS = isIOS();\n  var chromeVersion = getChromeVersion();\n  this.isDeviceMotionInRadians = !this.isIOS && chromeVersion && chromeVersion < 66;\n  this.isWithoutDeviceMotion = isChromeWithoutDeviceMotion() || isSafariWithoutDeviceMotion();\n  this.filterToWorldQ = new Quaternion();\n  if (isIOS()) {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), Math.PI / 2);\n  } else {\n    this.filterToWorldQ.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n  }\n  this.inverseWorldToScreenQ = new Quaternion();\n  this.worldToScreenQ = new Quaternion();\n  this.originalPoseAdjustQ = new Quaternion();\n  this.originalPoseAdjustQ.setFromAxisAngle(new Vector3(0, 0, 1), -window.orientation * Math.PI / 180);\n  this.setScreenTransform_();\n  if (isLandscapeMode()) {\n    this.filterToWorldQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ = new Quaternion();\n  this.orientationOut_ = new Float32Array(4);\n  this.start();\n}\nFusionPoseSensor.prototype.getPosition = function () {\n  return null;\n};\nFusionPoseSensor.prototype.getOrientation = function () {\n  var orientation = void 0;\n  if (this.isWithoutDeviceMotion && this._deviceOrientationQ) {\n    this.deviceOrientationFixQ = this.deviceOrientationFixQ || function () {\n      var z = new Quaternion().setFromAxisAngle(new Vector3(0, 0, -1), 0);\n      var y = new Quaternion();\n      if (window.orientation === -90) {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / -2);\n      } else {\n        y.setFromAxisAngle(new Vector3(0, 1, 0), Math.PI / 2);\n      }\n      return z.multiply(y);\n    }();\n    this.deviceOrientationFilterToWorldQ = this.deviceOrientationFilterToWorldQ || function () {\n      var q = new Quaternion();\n      q.setFromAxisAngle(new Vector3(1, 0, 0), -Math.PI / 2);\n      return q;\n    }();\n    orientation = this._deviceOrientationQ;\n    var out = new Quaternion();\n    out.copy(orientation);\n    out.multiply(this.deviceOrientationFilterToWorldQ);\n    out.multiply(this.resetQ);\n    out.multiply(this.worldToScreenQ);\n    out.multiplyQuaternions(this.deviceOrientationFixQ, out);\n    if (this.yawOnly) {\n      out.x = 0;\n      out.z = 0;\n      out.normalize();\n    }\n    this.orientationOut_[0] = out.x;\n    this.orientationOut_[1] = out.y;\n    this.orientationOut_[2] = out.z;\n    this.orientationOut_[3] = out.w;\n    return this.orientationOut_;\n  } else {\n    var filterOrientation = this.filter.getOrientation();\n    orientation = this.posePredictor.getPrediction(filterOrientation, this.gyroscope, this.previousTimestampS);\n  }\n  var out = new Quaternion();\n  out.copy(this.filterToWorldQ);\n  out.multiply(this.resetQ);\n  out.multiply(orientation);\n  out.multiply(this.worldToScreenQ);\n  if (this.yawOnly) {\n    out.x = 0;\n    out.z = 0;\n    out.normalize();\n  }\n  this.orientationOut_[0] = out.x;\n  this.orientationOut_[1] = out.y;\n  this.orientationOut_[2] = out.z;\n  this.orientationOut_[3] = out.w;\n  return this.orientationOut_;\n};\nFusionPoseSensor.prototype.resetPose = function () {\n  this.resetQ.copy(this.filter.getOrientation());\n  this.resetQ.x = 0;\n  this.resetQ.y = 0;\n  this.resetQ.z *= -1;\n  this.resetQ.normalize();\n  if (isLandscapeMode()) {\n    this.resetQ.multiply(this.inverseWorldToScreenQ);\n  }\n  this.resetQ.multiply(this.originalPoseAdjustQ);\n};\nFusionPoseSensor.prototype.onDeviceOrientation_ = function (e) {\n  this._deviceOrientationQ = this._deviceOrientationQ || new Quaternion();\n  var alpha = e.alpha,\n      beta = e.beta,\n      gamma = e.gamma;\n  alpha = (alpha || 0) * Math.PI / 180;\n  beta = (beta || 0) * Math.PI / 180;\n  gamma = (gamma || 0) * Math.PI / 180;\n  this._deviceOrientationQ.setFromEulerYXZ(beta, alpha, -gamma);\n};\nFusionPoseSensor.prototype.onDeviceMotion_ = function (deviceMotion) {\n  this.updateDeviceMotion_(deviceMotion);\n};\nFusionPoseSensor.prototype.updateDeviceMotion_ = function (deviceMotion) {\n  var accGravity = deviceMotion.accelerationIncludingGravity;\n  var rotRate = deviceMotion.rotationRate;\n  var timestampS = deviceMotion.timeStamp / 1000;\n  var deltaS = timestampS - this.previousTimestampS;\n  if (deltaS < 0) {\n    warnOnce('fusion-pose-sensor:invalid:non-monotonic', 'Invalid timestamps detected: non-monotonic timestamp from devicemotion');\n    this.previousTimestampS = timestampS;\n    return;\n  } else if (deltaS <= MIN_TIMESTEP || deltaS > MAX_TIMESTEP) {\n    warnOnce('fusion-pose-sensor:invalid:outside-threshold', 'Invalid timestamps detected: Timestamp from devicemotion outside expected range.');\n    this.previousTimestampS = timestampS;\n    return;\n  }\n  this.accelerometer.set(-accGravity.x, -accGravity.y, -accGravity.z);\n  if (rotRate) {\n    if (isR7()) {\n      this.gyroscope.set(-rotRate.beta, rotRate.alpha, rotRate.gamma);\n    } else {\n      this.gyroscope.set(rotRate.alpha, rotRate.beta, rotRate.gamma);\n    }\n    if (!this.isDeviceMotionInRadians) {\n      this.gyroscope.multiplyScalar(Math.PI / 180);\n    }\n    this.filter.addGyroMeasurement(this.gyroscope, timestampS);\n  }\n  this.filter.addAccelMeasurement(this.accelerometer, timestampS);\n  this.previousTimestampS = timestampS;\n};\nFusionPoseSensor.prototype.onOrientationChange_ = function (screenOrientation) {\n  this.setScreenTransform_();\n};\nFusionPoseSensor.prototype.onMessage_ = function (event) {\n  var message = event.data;\n  if (!message || !message.type) {\n    return;\n  }\n  var type = message.type.toLowerCase();\n  if (type !== 'devicemotion') {\n    return;\n  }\n  this.updateDeviceMotion_(message.deviceMotionEvent);\n};\nFusionPoseSensor.prototype.setScreenTransform_ = function () {\n  this.worldToScreenQ.set(0, 0, 0, 1);\n  switch (window.orientation) {\n    case 0:\n      break;\n    case 90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), -Math.PI / 2);\n      break;\n    case -90:\n      this.worldToScreenQ.setFromAxisAngle(new Vector3(0, 0, 1), Math.PI / 2);\n      break;\n    case 180:\n      break;\n  }\n  this.inverseWorldToScreenQ.copy(this.worldToScreenQ);\n  this.inverseWorldToScreenQ.inverse();\n};\nFusionPoseSensor.prototype.start = function () {\n  this.onDeviceMotionCallback_ = this.onDeviceMotion_.bind(this);\n  this.onOrientationChangeCallback_ = this.onOrientationChange_.bind(this);\n  this.onMessageCallback_ = this.onMessage_.bind(this);\n  this.onDeviceOrientationCallback_ = this.onDeviceOrientation_.bind(this);\n  if (isIOS() && isInsideCrossOriginIFrame()) {\n    window.addEventListener('message', this.onMessageCallback_);\n  }\n  window.addEventListener('orientationchange', this.onOrientationChangeCallback_);\n  if (this.isWithoutDeviceMotion) {\n    window.addEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  } else {\n    window.addEventListener('devicemotion', this.onDeviceMotionCallback_);\n  }\n};\nFusionPoseSensor.prototype.stop = function () {\n  window.removeEventListener('devicemotion', this.onDeviceMotionCallback_);\n  window.removeEventListener('deviceorientation', this.onDeviceOrientationCallback_);\n  window.removeEventListener('orientationchange', this.onOrientationChangeCallback_);\n  window.removeEventListener('message', this.onMessageCallback_);\n};\nvar SENSOR_FREQUENCY = 60;\nvar X_AXIS = new Vector3(1, 0, 0);\nvar Z_AXIS = new Vector3(0, 0, 1);\nvar SENSOR_TO_VR = new Quaternion();\nSENSOR_TO_VR.setFromAxisAngle(X_AXIS, -Math.PI / 2);\nSENSOR_TO_VR.multiply(new Quaternion().setFromAxisAngle(Z_AXIS, Math.PI / 2));\nvar PoseSensor = function () {\n  function PoseSensor(config) {\n    classCallCheck(this, PoseSensor);\n    this.config = config;\n    this.sensor = null;\n    this.fusionSensor = null;\n    this._out = new Float32Array(4);\n    this.api = null;\n    this.errors = [];\n    this._sensorQ = new Quaternion();\n    this._outQ = new Quaternion();\n    this._onSensorRead = this._onSensorRead.bind(this);\n    this._onSensorError = this._onSensorError.bind(this);\n    this.init();\n  }\n  createClass(PoseSensor, [{\n    key: 'init',\n    value: function init() {\n      var sensor = null;\n      try {\n        sensor = new RelativeOrientationSensor({\n          frequency: SENSOR_FREQUENCY,\n          referenceFrame: 'screen'\n        });\n        sensor.addEventListener('error', this._onSensorError);\n      } catch (error) {\n        this.errors.push(error);\n        if (error.name === 'SecurityError') {\n          console.error('Cannot construct sensors due to the Feature Policy');\n          console.warn('Attempting to fall back using \"devicemotion\"; however this will ' + 'fail in the future without correct permissions.');\n          this.useDeviceMotion();\n        } else if (error.name === 'ReferenceError') {\n          this.useDeviceMotion();\n        } else {\n          console.error(error);\n        }\n      }\n      if (sensor) {\n        this.api = 'sensor';\n        this.sensor = sensor;\n        this.sensor.addEventListener('reading', this._onSensorRead);\n        this.sensor.start();\n      }\n    }\n  }, {\n    key: 'useDeviceMotion',\n    value: function useDeviceMotion() {\n      this.api = 'devicemotion';\n      this.fusionSensor = new FusionPoseSensor(this.config.K_FILTER, this.config.PREDICTION_TIME_S, this.config.YAW_ONLY, this.config.DEBUG);\n      if (this.sensor) {\n        this.sensor.removeEventListener('reading', this._onSensorRead);\n        this.sensor.removeEventListener('error', this._onSensorError);\n        this.sensor = null;\n      }\n    }\n  }, {\n    key: 'getOrientation',\n    value: function getOrientation() {\n      if (this.fusionSensor) {\n        return this.fusionSensor.getOrientation();\n      }\n      if (!this.sensor || !this.sensor.quaternion) {\n        this._out[0] = this._out[1] = this._out[2] = 0;\n        this._out[3] = 1;\n        return this._out;\n      }\n      var q = this.sensor.quaternion;\n      this._sensorQ.set(q[0], q[1], q[2], q[3]);\n      var out = this._outQ;\n      out.copy(SENSOR_TO_VR);\n      out.multiply(this._sensorQ);\n      if (this.config.YAW_ONLY) {\n        out.x = out.z = 0;\n        out.normalize();\n      }\n      this._out[0] = out.x;\n      this._out[1] = out.y;\n      this._out[2] = out.z;\n      this._out[3] = out.w;\n      return this._out;\n    }\n  }, {\n    key: '_onSensorError',\n    value: function _onSensorError(event) {\n      this.errors.push(event.error);\n      if (event.error.name === 'NotAllowedError') {\n        console.error('Permission to access sensor was denied');\n      } else if (event.error.name === 'NotReadableError') {\n        console.error('Sensor could not be read');\n      } else {\n        console.error(event.error);\n      }\n      this.useDeviceMotion();\n    }\n  }, {\n    key: '_onSensorRead',\n    value: function _onSensorRead() {}\n  }]);\n  return PoseSensor;\n}();\nvar rotateInstructionsAsset = \"<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>\";\nfunction RotateInstructions() {\n  this.loadIcon_();\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.top = 0;\n  s.right = 0;\n  s.bottom = 0;\n  s.left = 0;\n  s.backgroundColor = 'gray';\n  s.fontFamily = 'sans-serif';\n  s.zIndex = 1000000;\n  var img = document.createElement('img');\n  img.src = this.icon;\n  var s = img.style;\n  s.marginLeft = '25%';\n  s.marginTop = '25%';\n  s.width = '50%';\n  overlay.appendChild(img);\n  var text = document.createElement('div');\n  var s = text.style;\n  s.textAlign = 'center';\n  s.fontSize = '16px';\n  s.lineHeight = '24px';\n  s.margin = '24px 25%';\n  s.width = '50%';\n  text.innerHTML = 'Place your phone into your Cardboard viewer.';\n  overlay.appendChild(text);\n  var snackbar = document.createElement('div');\n  var s = snackbar.style;\n  s.backgroundColor = '#CFD8DC';\n  s.position = 'fixed';\n  s.bottom = 0;\n  s.width = '100%';\n  s.height = '48px';\n  s.padding = '14px 24px';\n  s.boxSizing = 'border-box';\n  s.color = '#656A6B';\n  overlay.appendChild(snackbar);\n  var snackbarText = document.createElement('div');\n  snackbarText.style.float = 'left';\n  snackbarText.innerHTML = 'No Cardboard viewer?';\n  var snackbarButton = document.createElement('a');\n  snackbarButton.href = 'https://www.google.com/get/cardboard/get-cardboard/';\n  snackbarButton.innerHTML = 'get one';\n  snackbarButton.target = '_blank';\n  var s = snackbarButton.style;\n  s.float = 'right';\n  s.fontWeight = 600;\n  s.textTransform = 'uppercase';\n  s.borderLeft = '1px solid gray';\n  s.paddingLeft = '24px';\n  s.textDecoration = 'none';\n  s.color = '#656A6B';\n  snackbar.appendChild(snackbarText);\n  snackbar.appendChild(snackbarButton);\n  this.overlay = overlay;\n  this.text = text;\n  this.hide();\n}\nRotateInstructions.prototype.show = function (parent) {\n  if (!parent && !this.overlay.parentElement) {\n    document.body.appendChild(this.overlay);\n  } else if (parent) {\n    if (this.overlay.parentElement && this.overlay.parentElement != parent) this.overlay.parentElement.removeChild(this.overlay);\n    parent.appendChild(this.overlay);\n  }\n  this.overlay.style.display = 'block';\n  var img = this.overlay.querySelector('img');\n  var s = img.style;\n  if (isLandscapeMode()) {\n    s.width = '20%';\n    s.marginLeft = '40%';\n    s.marginTop = '3%';\n  } else {\n    s.width = '50%';\n    s.marginLeft = '25%';\n    s.marginTop = '25%';\n  }\n};\nRotateInstructions.prototype.hide = function () {\n  this.overlay.style.display = 'none';\n};\nRotateInstructions.prototype.showTemporarily = function (ms, parent) {\n  this.show(parent);\n  this.timer = setTimeout(this.hide.bind(this), ms);\n};\nRotateInstructions.prototype.disableShowTemporarily = function () {\n  clearTimeout(this.timer);\n};\nRotateInstructions.prototype.update = function () {\n  this.disableShowTemporarily();\n  if (!isLandscapeMode() && isMobile()) {\n    this.show();\n  } else {\n    this.hide();\n  }\n};\nRotateInstructions.prototype.loadIcon_ = function () {\n  this.icon = dataUri('image/svg+xml', rotateInstructionsAsset);\n};\nvar DEFAULT_VIEWER = 'CardboardV1';\nvar VIEWER_KEY = 'WEBVR_CARDBOARD_VIEWER';\nvar CLASS_NAME = 'webvr-polyfill-viewer-selector';\nfunction ViewerSelector(defaultViewer) {\n  try {\n    this.selectedKey = localStorage.getItem(VIEWER_KEY);\n  } catch (error) {\n    console.error('Failed to load viewer profile: %s', error);\n  }\n  if (!this.selectedKey) {\n    this.selectedKey = defaultViewer || DEFAULT_VIEWER;\n  }\n  this.dialog = this.createDialog_(DeviceInfo.Viewers);\n  this.root = null;\n  this.onChangeCallbacks_ = [];\n}\nViewerSelector.prototype.show = function (root) {\n  this.root = root;\n  root.appendChild(this.dialog);\n  var selected = this.dialog.querySelector('#' + this.selectedKey);\n  selected.checked = true;\n  this.dialog.style.display = 'block';\n};\nViewerSelector.prototype.hide = function () {\n  if (this.root && this.root.contains(this.dialog)) {\n    this.root.removeChild(this.dialog);\n  }\n  this.dialog.style.display = 'none';\n};\nViewerSelector.prototype.getCurrentViewer = function () {\n  return DeviceInfo.Viewers[this.selectedKey];\n};\nViewerSelector.prototype.getSelectedKey_ = function () {\n  var input = this.dialog.querySelector('input[name=field]:checked');\n  if (input) {\n    return input.id;\n  }\n  return null;\n};\nViewerSelector.prototype.onChange = function (cb) {\n  this.onChangeCallbacks_.push(cb);\n};\nViewerSelector.prototype.fireOnChange_ = function (viewer) {\n  for (var i = 0; i < this.onChangeCallbacks_.length; i++) {\n    this.onChangeCallbacks_[i](viewer);\n  }\n};\nViewerSelector.prototype.onSave_ = function () {\n  this.selectedKey = this.getSelectedKey_();\n  if (!this.selectedKey || !DeviceInfo.Viewers[this.selectedKey]) {\n    console.error('ViewerSelector.onSave_: this should never happen!');\n    return;\n  }\n  this.fireOnChange_(DeviceInfo.Viewers[this.selectedKey]);\n  try {\n    localStorage.setItem(VIEWER_KEY, this.selectedKey);\n  } catch (error) {\n    console.error('Failed to save viewer profile: %s', error);\n  }\n  this.hide();\n};\nViewerSelector.prototype.createDialog_ = function (options) {\n  var container = document.createElement('div');\n  container.classList.add(CLASS_NAME);\n  container.style.display = 'none';\n  var overlay = document.createElement('div');\n  var s = overlay.style;\n  s.position = 'fixed';\n  s.left = 0;\n  s.top = 0;\n  s.width = '100%';\n  s.height = '100%';\n  s.background = 'rgba(0, 0, 0, 0.3)';\n  overlay.addEventListener('click', this.hide.bind(this));\n  var width = 280;\n  var dialog = document.createElement('div');\n  var s = dialog.style;\n  s.boxSizing = 'border-box';\n  s.position = 'fixed';\n  s.top = '24px';\n  s.left = '50%';\n  s.marginLeft = -width / 2 + 'px';\n  s.width = width + 'px';\n  s.padding = '24px';\n  s.overflow = 'hidden';\n  s.background = '#fafafa';\n  s.fontFamily = \"'Roboto', sans-serif\";\n  s.boxShadow = '0px 5px 20px #666';\n  dialog.appendChild(this.createH1_('Select your viewer'));\n  for (var id in options) {\n    dialog.appendChild(this.createChoice_(id, options[id].label));\n  }\n  dialog.appendChild(this.createButton_('Save', this.onSave_.bind(this)));\n  container.appendChild(overlay);\n  container.appendChild(dialog);\n  return container;\n};\nViewerSelector.prototype.createH1_ = function (name) {\n  var h1 = document.createElement('h1');\n  var s = h1.style;\n  s.color = 'black';\n  s.fontSize = '20px';\n  s.fontWeight = 'bold';\n  s.marginTop = 0;\n  s.marginBottom = '24px';\n  h1.innerHTML = name;\n  return h1;\n};\nViewerSelector.prototype.createChoice_ = function (id, name) {\n  var div = document.createElement('div');\n  div.style.marginTop = '8px';\n  div.style.color = 'black';\n  var input = document.createElement('input');\n  input.style.fontSize = '30px';\n  input.setAttribute('id', id);\n  input.setAttribute('type', 'radio');\n  input.setAttribute('value', id);\n  input.setAttribute('name', 'field');\n  var label = document.createElement('label');\n  label.style.marginLeft = '4px';\n  label.setAttribute('for', id);\n  label.innerHTML = name;\n  div.appendChild(input);\n  div.appendChild(label);\n  return div;\n};\nViewerSelector.prototype.createButton_ = function (label, onclick) {\n  var button = document.createElement('button');\n  button.innerHTML = label;\n  var s = button.style;\n  s.float = 'right';\n  s.textTransform = 'uppercase';\n  s.color = '#1094f7';\n  s.fontSize = '14px';\n  s.letterSpacing = 0;\n  s.border = 0;\n  s.background = 'none';\n  s.marginTop = '16px';\n  button.addEventListener('click', onclick);\n  return button;\n};\nvar commonjsGlobal$$1 = typeof window !== 'undefined' ? window : typeof commonjsGlobal !== 'undefined' ? commonjsGlobal : typeof self !== 'undefined' ? self : {};\nfunction unwrapExports$$1 (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule$$1(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\nvar NoSleep = createCommonjsModule$$1(function (module, exports) {\n(function webpackUniversalModuleDefinition(root, factory) {\n\tmodule.exports = factory();\n})(commonjsGlobal$$1, function() {\nreturn          (function(modules) {\n         \tvar installedModules = {};\n         \tfunction __webpack_require__(moduleId) {\n         \t\tif(installedModules[moduleId]) {\n         \t\t\treturn installedModules[moduleId].exports;\n         \t\t}\n         \t\tvar module = installedModules[moduleId] = {\n         \t\t\ti: moduleId,\n         \t\t\tl: false,\n         \t\t\texports: {}\n         \t\t};\n         \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n         \t\tmodule.l = true;\n         \t\treturn module.exports;\n         \t}\n         \t__webpack_require__.m = modules;\n         \t__webpack_require__.c = installedModules;\n         \t__webpack_require__.d = function(exports, name, getter) {\n         \t\tif(!__webpack_require__.o(exports, name)) {\n         \t\t\tObject.defineProperty(exports, name, {\n         \t\t\t\tconfigurable: false,\n         \t\t\t\tenumerable: true,\n         \t\t\t\tget: getter\n         \t\t\t});\n         \t\t}\n         \t};\n         \t__webpack_require__.n = function(module) {\n         \t\tvar getter = module && module.__esModule ?\n         \t\t\tfunction getDefault() { return module['default']; } :\n         \t\t\tfunction getModuleExports() { return module; };\n         \t\t__webpack_require__.d(getter, 'a', getter);\n         \t\treturn getter;\n         \t};\n         \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n         \t__webpack_require__.p = \"\";\n         \treturn __webpack_require__(__webpack_require__.s = 0);\n         })\n         ([\n      (function(module, exports, __webpack_require__) {\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nvar mediaFile = __webpack_require__(1);\nvar oldIOS = typeof navigator !== 'undefined' && parseFloat(('' + (/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent) || [0, ''])[1]).replace('undefined', '3_2').replace('_', '.').replace('_', '')) < 10 && !window.MSStream;\nvar NoSleep = function () {\n  function NoSleep() {\n    _classCallCheck(this, NoSleep);\n    if (oldIOS) {\n      this.noSleepTimer = null;\n    } else {\n      this.noSleepVideo = document.createElement('video');\n      this.noSleepVideo.setAttribute('playsinline', '');\n      this.noSleepVideo.setAttribute('src', mediaFile);\n      this.noSleepVideo.addEventListener('timeupdate', function (e) {\n        if (this.noSleepVideo.currentTime > 0.5) {\n          this.noSleepVideo.currentTime = Math.random();\n        }\n      }.bind(this));\n    }\n  }\n  _createClass(NoSleep, [{\n    key: 'enable',\n    value: function enable() {\n      if (oldIOS) {\n        this.disable();\n        this.noSleepTimer = window.setInterval(function () {\n          window.location.href = '/';\n          window.setTimeout(window.stop, 0);\n        }, 15000);\n      } else {\n        this.noSleepVideo.play();\n      }\n    }\n  }, {\n    key: 'disable',\n    value: function disable() {\n      if (oldIOS) {\n        if (this.noSleepTimer) {\n          window.clearInterval(this.noSleepTimer);\n          this.noSleepTimer = null;\n        }\n      } else {\n        this.noSleepVideo.pause();\n      }\n    }\n  }]);\n  return NoSleep;\n}();\nmodule.exports = NoSleep;\n      }),\n      (function(module, exports, __webpack_require__) {\nmodule.exports = 'data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQAD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';\n      })\n         ]);\n});\n});\nvar NoSleep$1 = unwrapExports$$1(NoSleep);\nvar nextDisplayId = 1000;\nvar defaultLeftBounds = [0, 0, 0.5, 1];\nvar defaultRightBounds = [0.5, 0, 0.5, 1];\nvar raf = window.requestAnimationFrame;\nvar caf = window.cancelAnimationFrame;\nfunction VRFrameData() {\n  this.leftProjectionMatrix = new Float32Array(16);\n  this.leftViewMatrix = new Float32Array(16);\n  this.rightProjectionMatrix = new Float32Array(16);\n  this.rightViewMatrix = new Float32Array(16);\n  this.pose = null;\n}\nfunction VRDisplayCapabilities(config) {\n  Object.defineProperties(this, {\n    hasPosition: {\n      writable: false, enumerable: true, value: config.hasPosition\n    },\n    hasExternalDisplay: {\n      writable: false, enumerable: true, value: config.hasExternalDisplay\n    },\n    canPresent: {\n      writable: false, enumerable: true, value: config.canPresent\n    },\n    maxLayers: {\n      writable: false, enumerable: true, value: config.maxLayers\n    },\n    hasOrientation: {\n      enumerable: true, get: function get() {\n        deprecateWarning('VRDisplayCapabilities.prototype.hasOrientation', 'VRDisplay.prototype.getFrameData');\n        return config.hasOrientation;\n      }\n    }\n  });\n}\nfunction VRDisplay(config) {\n  config = config || {};\n  var USE_WAKELOCK = 'wakelock' in config ? config.wakelock : true;\n  this.isPolyfilled = true;\n  this.displayId = nextDisplayId++;\n  this.displayName = '';\n  this.depthNear = 0.01;\n  this.depthFar = 10000.0;\n  this.isPresenting = false;\n  Object.defineProperty(this, 'isConnected', {\n    get: function get() {\n      deprecateWarning('VRDisplay.prototype.isConnected', 'VRDisplayCapabilities.prototype.hasExternalDisplay');\n      return false;\n    }\n  });\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: false,\n    hasExternalDisplay: false,\n    canPresent: false,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.waitingForPresent_ = false;\n  this.layer_ = null;\n  this.originalParent_ = null;\n  this.fullscreenElement_ = null;\n  this.fullscreenWrapper_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n  if (USE_WAKELOCK && isMobile()) {\n    this.wakelock_ = new NoSleep$1();\n  }\n}\nVRDisplay.prototype.getFrameData = function (frameData) {\n  return frameDataFromPose(frameData, this._getPose(), this);\n};\nVRDisplay.prototype.getPose = function () {\n  deprecateWarning('VRDisplay.prototype.getPose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.resetPose = function () {\n  deprecateWarning('VRDisplay.prototype.resetPose');\n  return this._resetPose();\n};\nVRDisplay.prototype.getImmediatePose = function () {\n  deprecateWarning('VRDisplay.prototype.getImmediatePose', 'VRDisplay.prototype.getFrameData');\n  return this._getPose();\n};\nVRDisplay.prototype.requestAnimationFrame = function (callback) {\n  return raf(callback);\n};\nVRDisplay.prototype.cancelAnimationFrame = function (id) {\n  return caf(id);\n};\nVRDisplay.prototype.wrapForFullscreen = function (element) {\n  if (isIOS()) {\n    return element;\n  }\n  if (!this.fullscreenWrapper_) {\n    this.fullscreenWrapper_ = document.createElement('div');\n    var cssProperties = ['height: ' + Math.min(screen.height, screen.width) + 'px !important', 'top: 0 !important', 'left: 0 !important', 'right: 0 !important', 'border: 0', 'margin: 0', 'padding: 0', 'z-index: 999999 !important', 'position: fixed'];\n    this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');\n    this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');\n  }\n  if (this.fullscreenElement_ == element) {\n    return this.fullscreenWrapper_;\n  }\n  if (this.fullscreenElement_) {\n    if (this.originalParent_) {\n      this.originalParent_.appendChild(this.fullscreenElement_);\n    } else {\n      this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_);\n    }\n  }\n  this.fullscreenElement_ = element;\n  this.originalParent_ = element.parentElement;\n  if (!this.originalParent_) {\n    document.body.appendChild(element);\n  }\n  if (!this.fullscreenWrapper_.parentElement) {\n    var parent = this.fullscreenElement_.parentElement;\n    parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);\n    parent.removeChild(this.fullscreenElement_);\n  }\n  this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);\n  this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');\n  var self = this;\n  function applyFullscreenElementStyle() {\n    if (!self.fullscreenElement_) {\n      return;\n    }\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0', 'width: ' + Math.max(screen.width, screen.height) + 'px', 'height: ' + Math.min(screen.height, screen.width) + 'px', 'border: 0', 'margin: 0', 'padding: 0'];\n    self.fullscreenElement_.setAttribute('style', cssProperties.join('; ') + ';');\n  }\n  applyFullscreenElementStyle();\n  return this.fullscreenWrapper_;\n};\nVRDisplay.prototype.removeFullscreenWrapper = function () {\n  if (!this.fullscreenElement_) {\n    return;\n  }\n  var element = this.fullscreenElement_;\n  if (this.fullscreenElementCachedStyle_) {\n    element.setAttribute('style', this.fullscreenElementCachedStyle_);\n  } else {\n    element.removeAttribute('style');\n  }\n  this.fullscreenElement_ = null;\n  this.fullscreenElementCachedStyle_ = null;\n  var parent = this.fullscreenWrapper_.parentElement;\n  this.fullscreenWrapper_.removeChild(element);\n  if (this.originalParent_ === parent) {\n    parent.insertBefore(element, this.fullscreenWrapper_);\n  }\n  else if (this.originalParent_) {\n      this.originalParent_.appendChild(element);\n    }\n  parent.removeChild(this.fullscreenWrapper_);\n  return element;\n};\nVRDisplay.prototype.requestPresent = function (layers) {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  if (!(layers instanceof Array)) {\n    deprecateWarning('VRDisplay.prototype.requestPresent with non-array argument', 'an array of VRLayers as the first argument');\n    layers = [layers];\n  }\n  return new Promise(function (resolve, reject) {\n    if (!self.capabilities.canPresent) {\n      reject(new Error('VRDisplay is not capable of presenting.'));\n      return;\n    }\n    if (layers.length == 0 || layers.length > self.capabilities.maxLayers) {\n      reject(new Error('Invalid number of layers.'));\n      return;\n    }\n    var incomingLayer = layers[0];\n    if (!incomingLayer.source) {\n      resolve();\n      return;\n    }\n    var leftBounds = incomingLayer.leftBounds || defaultLeftBounds;\n    var rightBounds = incomingLayer.rightBounds || defaultRightBounds;\n    if (wasPresenting) {\n      var layer = self.layer_;\n      if (layer.source !== incomingLayer.source) {\n        layer.source = incomingLayer.source;\n      }\n      for (var i = 0; i < 4; i++) {\n        layer.leftBounds[i] = leftBounds[i];\n        layer.rightBounds[i] = rightBounds[i];\n      }\n      self.wrapForFullscreen(self.layer_.source);\n      self.updatePresent_();\n      resolve();\n      return;\n    }\n    self.layer_ = {\n      predistorted: incomingLayer.predistorted,\n      source: incomingLayer.source,\n      leftBounds: leftBounds.slice(0),\n      rightBounds: rightBounds.slice(0)\n    };\n    self.waitingForPresent_ = false;\n    if (self.layer_ && self.layer_.source) {\n      var fullscreenElement = self.wrapForFullscreen(self.layer_.source);\n      var onFullscreenChange = function onFullscreenChange() {\n        var actualFullscreenElement = getFullscreenElement();\n        self.isPresenting = fullscreenElement === actualFullscreenElement;\n        if (self.isPresenting) {\n          if (screen.orientation && screen.orientation.lock) {\n            screen.orientation.lock('landscape-primary').catch(function (error) {\n              console.error('screen.orientation.lock() failed due to', error.message);\n            });\n          }\n          self.waitingForPresent_ = false;\n          self.beginPresent_();\n          resolve();\n        } else {\n          if (screen.orientation && screen.orientation.unlock) {\n            screen.orientation.unlock();\n          }\n          self.removeFullscreenWrapper();\n          self.disableWakeLock();\n          self.endPresent_();\n          self.removeFullscreenListeners_();\n        }\n        self.fireVRDisplayPresentChange_();\n      };\n      var onFullscreenError = function onFullscreenError() {\n        if (!self.waitingForPresent_) {\n          return;\n        }\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.disableWakeLock();\n        self.waitingForPresent_ = false;\n        self.isPresenting = false;\n        reject(new Error('Unable to present.'));\n      };\n      self.addFullscreenListeners_(fullscreenElement, onFullscreenChange, onFullscreenError);\n      if (requestFullscreen(fullscreenElement)) {\n        self.enableWakeLock();\n        self.waitingForPresent_ = true;\n      } else if (isIOS() || isWebViewAndroid()) {\n        self.enableWakeLock();\n        self.isPresenting = true;\n        self.beginPresent_();\n        self.fireVRDisplayPresentChange_();\n        resolve();\n      }\n    }\n    if (!self.waitingForPresent_ && !isIOS()) {\n      exitFullscreen();\n      reject(new Error('Unable to present.'));\n    }\n  });\n};\nVRDisplay.prototype.exitPresent = function () {\n  var wasPresenting = this.isPresenting;\n  var self = this;\n  this.isPresenting = false;\n  this.layer_ = null;\n  this.disableWakeLock();\n  return new Promise(function (resolve, reject) {\n    if (wasPresenting) {\n      if (!exitFullscreen() && isIOS()) {\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      if (isWebViewAndroid()) {\n        self.removeFullscreenWrapper();\n        self.removeFullscreenListeners_();\n        self.endPresent_();\n        self.fireVRDisplayPresentChange_();\n      }\n      resolve();\n    } else {\n      reject(new Error('Was not presenting to VRDisplay.'));\n    }\n  });\n};\nVRDisplay.prototype.getLayers = function () {\n  if (this.layer_) {\n    return [this.layer_];\n  }\n  return [];\n};\nVRDisplay.prototype.fireVRDisplayPresentChange_ = function () {\n  var event = new CustomEvent('vrdisplaypresentchange', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.fireVRDisplayConnect_ = function () {\n  var event = new CustomEvent('vrdisplayconnect', { detail: { display: this } });\n  window.dispatchEvent(event);\n};\nVRDisplay.prototype.addFullscreenListeners_ = function (element, changeHandler, errorHandler) {\n  this.removeFullscreenListeners_();\n  this.fullscreenEventTarget_ = element;\n  this.fullscreenChangeHandler_ = changeHandler;\n  this.fullscreenErrorHandler_ = errorHandler;\n  if (changeHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenchange', changeHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenchange', changeHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', changeHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenchange', changeHandler, false);\n    }\n  }\n  if (errorHandler) {\n    if (document.fullscreenEnabled) {\n      element.addEventListener('fullscreenerror', errorHandler, false);\n    } else if (document.webkitFullscreenEnabled) {\n      element.addEventListener('webkitfullscreenerror', errorHandler, false);\n    } else if (document.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenerror', errorHandler, false);\n    } else if (document.msFullscreenEnabled) {\n      element.addEventListener('msfullscreenerror', errorHandler, false);\n    }\n  }\n};\nVRDisplay.prototype.removeFullscreenListeners_ = function () {\n  if (!this.fullscreenEventTarget_) return;\n  var element = this.fullscreenEventTarget_;\n  if (this.fullscreenChangeHandler_) {\n    var changeHandler = this.fullscreenChangeHandler_;\n    element.removeEventListener('fullscreenchange', changeHandler, false);\n    element.removeEventListener('webkitfullscreenchange', changeHandler, false);\n    document.removeEventListener('mozfullscreenchange', changeHandler, false);\n    element.removeEventListener('msfullscreenchange', changeHandler, false);\n  }\n  if (this.fullscreenErrorHandler_) {\n    var errorHandler = this.fullscreenErrorHandler_;\n    element.removeEventListener('fullscreenerror', errorHandler, false);\n    element.removeEventListener('webkitfullscreenerror', errorHandler, false);\n    document.removeEventListener('mozfullscreenerror', errorHandler, false);\n    element.removeEventListener('msfullscreenerror', errorHandler, false);\n  }\n  this.fullscreenEventTarget_ = null;\n  this.fullscreenChangeHandler_ = null;\n  this.fullscreenErrorHandler_ = null;\n};\nVRDisplay.prototype.enableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.enable();\n  }\n};\nVRDisplay.prototype.disableWakeLock = function () {\n  if (this.wakelock_) {\n    this.wakelock_.disable();\n  }\n};\nVRDisplay.prototype.beginPresent_ = function () {\n};\nVRDisplay.prototype.endPresent_ = function () {\n};\nVRDisplay.prototype.submitFrame = function (pose) {\n};\nVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  return null;\n};\nvar config = {\n  ADDITIONAL_VIEWERS: [],\n  DEFAULT_VIEWER: '',\n  MOBILE_WAKE_LOCK: true,\n  DEBUG: false,\n  DPDB_URL: 'https://dpdb.webvr.rocks/dpdb.json',\n  K_FILTER: 0.98,\n  PREDICTION_TIME_S: 0.040,\n  CARDBOARD_UI_DISABLED: false,\n  ROTATE_INSTRUCTIONS_DISABLED: false,\n  YAW_ONLY: false,\n  BUFFER_SCALE: 0.5,\n  DIRTY_SUBMIT_FRAME_BINDINGS: false\n};\nvar Eye = {\n  LEFT: 'left',\n  RIGHT: 'right'\n};\nfunction CardboardVRDisplay(config$$1) {\n  var defaults = extend({}, config);\n  config$$1 = extend(defaults, config$$1 || {});\n  VRDisplay.call(this, {\n    wakelock: config$$1.MOBILE_WAKE_LOCK\n  });\n  this.config = config$$1;\n  this.displayName = 'Cardboard VRDisplay';\n  this.capabilities = new VRDisplayCapabilities({\n    hasPosition: false,\n    hasOrientation: true,\n    hasExternalDisplay: false,\n    canPresent: true,\n    maxLayers: 1\n  });\n  this.stageParameters = null;\n  this.bufferScale_ = this.config.BUFFER_SCALE;\n  this.poseSensor_ = new PoseSensor(this.config);\n  this.distorter_ = null;\n  this.cardboardUI_ = null;\n  this.dpdb_ = new Dpdb(this.config.DPDB_URL, this.onDeviceParamsUpdated_.bind(this));\n  this.deviceInfo_ = new DeviceInfo(this.dpdb_.getDeviceParams(), config$$1.ADDITIONAL_VIEWERS);\n  this.viewerSelector_ = new ViewerSelector(config$$1.DEFAULT_VIEWER);\n  this.viewerSelector_.onChange(this.onViewerChanged_.bind(this));\n  this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer());\n  if (!this.config.ROTATE_INSTRUCTIONS_DISABLED) {\n    this.rotateInstructions_ = new RotateInstructions();\n  }\n  if (isIOS()) {\n    window.addEventListener('resize', this.onResize_.bind(this));\n  }\n}\nCardboardVRDisplay.prototype = Object.create(VRDisplay.prototype);\nCardboardVRDisplay.prototype._getPose = function () {\n  return {\n    position: null,\n    orientation: this.poseSensor_.getOrientation(),\n    linearVelocity: null,\n    linearAcceleration: null,\n    angularVelocity: null,\n    angularAcceleration: null\n  };\n};\nCardboardVRDisplay.prototype._resetPose = function () {\n  if (this.poseSensor_.resetPose) {\n    this.poseSensor_.resetPose();\n  }\n};\nCardboardVRDisplay.prototype._getFieldOfView = function (whichEye) {\n  var fieldOfView;\n  if (whichEye == Eye.LEFT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewLeftEye();\n  } else if (whichEye == Eye.RIGHT) {\n    fieldOfView = this.deviceInfo_.getFieldOfViewRightEye();\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return fieldOfView;\n};\nCardboardVRDisplay.prototype._getEyeOffset = function (whichEye) {\n  var offset;\n  if (whichEye == Eye.LEFT) {\n    offset = [-this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else if (whichEye == Eye.RIGHT) {\n    offset = [this.deviceInfo_.viewer.interLensDistance * 0.5, 0.0, 0.0];\n  } else {\n    console.error('Invalid eye provided: %s', whichEye);\n    return null;\n  }\n  return offset;\n};\nCardboardVRDisplay.prototype.getEyeParameters = function (whichEye) {\n  var offset = this._getEyeOffset(whichEye);\n  var fieldOfView = this._getFieldOfView(whichEye);\n  var eyeParams = {\n    offset: offset,\n    renderWidth: this.deviceInfo_.device.width * 0.5 * this.bufferScale_,\n    renderHeight: this.deviceInfo_.device.height * this.bufferScale_\n  };\n  Object.defineProperty(eyeParams, 'fieldOfView', {\n    enumerable: true,\n    get: function get() {\n      deprecateWarning('VRFieldOfView', 'VRFrameData\\'s projection matrices');\n      return fieldOfView;\n    }\n  });\n  return eyeParams;\n};\nCardboardVRDisplay.prototype.onDeviceParamsUpdated_ = function (newParams) {\n  if (this.config.DEBUG) {\n    console.log('DPDB reported that device params were updated.');\n  }\n  this.deviceInfo_.updateDeviceParams(newParams);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n};\nCardboardVRDisplay.prototype.updateBounds_ = function () {\n  if (this.layer_ && this.distorter_ && (this.layer_.leftBounds || this.layer_.rightBounds)) {\n    this.distorter_.setTextureBounds(this.layer_.leftBounds, this.layer_.rightBounds);\n  }\n};\nCardboardVRDisplay.prototype.beginPresent_ = function () {\n  var gl = this.layer_.source.getContext('webgl');\n  if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n  if (!gl) gl = this.layer_.source.getContext('webgl2');\n  if (!gl) return;\n  if (this.layer_.predistorted) {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      gl.canvas.width = getScreenWidth() * this.bufferScale_;\n      gl.canvas.height = getScreenHeight() * this.bufferScale_;\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n  } else {\n    if (!this.config.CARDBOARD_UI_DISABLED) {\n      this.cardboardUI_ = new CardboardUI(gl);\n    }\n    this.distorter_ = new CardboardDistorter(gl, this.cardboardUI_, this.config.BUFFER_SCALE, this.config.DIRTY_SUBMIT_FRAME_BINDINGS);\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.listen(function (e) {\n      this.viewerSelector_.show(this.layer_.source.parentElement);\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this), function (e) {\n      this.exitPresent();\n      e.stopPropagation();\n      e.preventDefault();\n    }.bind(this));\n  }\n  if (this.rotateInstructions_) {\n    if (isLandscapeMode() && isMobile()) {\n      this.rotateInstructions_.showTemporarily(3000, this.layer_.source.parentElement);\n    } else {\n      this.rotateInstructions_.update();\n    }\n  }\n  this.orientationHandler = this.onOrientationChange_.bind(this);\n  window.addEventListener('orientationchange', this.orientationHandler);\n  this.vrdisplaypresentchangeHandler = this.updateBounds_.bind(this);\n  window.addEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.endPresent_ = function () {\n  if (this.distorter_) {\n    this.distorter_.destroy();\n    this.distorter_ = null;\n  }\n  if (this.cardboardUI_) {\n    this.cardboardUI_.destroy();\n    this.cardboardUI_ = null;\n  }\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.hide();\n  }\n  this.viewerSelector_.hide();\n  window.removeEventListener('orientationchange', this.orientationHandler);\n  window.removeEventListener('vrdisplaypresentchange', this.vrdisplaypresentchangeHandler);\n};\nCardboardVRDisplay.prototype.updatePresent_ = function () {\n  this.endPresent_();\n  this.beginPresent_();\n};\nCardboardVRDisplay.prototype.submitFrame = function (pose) {\n  if (this.distorter_) {\n    this.updateBounds_();\n    this.distorter_.submitFrame();\n  } else if (this.cardboardUI_ && this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var canvas = gl.canvas;\n    if (canvas.width != this.lastWidth || canvas.height != this.lastHeight) {\n      this.cardboardUI_.onResize();\n    }\n    this.lastWidth = canvas.width;\n    this.lastHeight = canvas.height;\n    this.cardboardUI_.render();\n  }\n};\nCardboardVRDisplay.prototype.onOrientationChange_ = function (e) {\n  this.viewerSelector_.hide();\n  if (this.rotateInstructions_) {\n    this.rotateInstructions_.update();\n  }\n  this.onResize_();\n};\nCardboardVRDisplay.prototype.onResize_ = function (e) {\n  if (this.layer_) {\n    var gl = this.layer_.source.getContext('webgl');\n    if (!gl) gl = this.layer_.source.getContext('experimental-webgl');\n    if (!gl) gl = this.layer_.source.getContext('webgl2');\n    var cssProperties = ['position: absolute', 'top: 0', 'left: 0',\n    'width: 100vw', 'height: 100vh', 'border: 0', 'margin: 0',\n    'padding: 0px', 'box-sizing: content-box'];\n    gl.canvas.setAttribute('style', cssProperties.join('; ') + ';');\n    safariCssSizeWorkaround(gl.canvas);\n  }\n};\nCardboardVRDisplay.prototype.onViewerChanged_ = function (viewer) {\n  this.deviceInfo_.setViewer(viewer);\n  if (this.distorter_) {\n    this.distorter_.updateDeviceInfo(this.deviceInfo_);\n  }\n  this.fireVRDisplayDeviceParamsChange_();\n};\nCardboardVRDisplay.prototype.fireVRDisplayDeviceParamsChange_ = function () {\n  var event = new CustomEvent('vrdisplaydeviceparamschange', {\n    detail: {\n      vrdisplay: this,\n      deviceInfo: this.deviceInfo_\n    }\n  });\n  window.dispatchEvent(event);\n};\nCardboardVRDisplay.VRFrameData = VRFrameData;\nCardboardVRDisplay.VRDisplay = VRDisplay;\nreturn CardboardVRDisplay;\n})));\n});\nvar CardboardVRDisplay = unwrapExports(cardboardVrDisplay);\n\nclass XRDevice extends EventTarget {\n  constructor(global) {\n    super();\n    this.global = global;\n    this.onWindowResize = this.onWindowResize.bind(this);\n    this.global.window.addEventListener('resize', this.onWindowResize);\n    this.environmentBlendMode = 'opaque';\n  }\n  onBaseLayerSet(sessionId, layer) { throw new Error('Not implemented'); }\n  isSessionSupported(mode) { throw new Error('Not implemented'); }\n  isFeatureSupported(featureDescriptor) { throw new Error('Not implemented'); }\n  async requestSession(mode, enabledFeatures) { throw new Error('Not implemented'); }\n  requestAnimationFrame(callback) { throw new Error('Not implemented'); }\n  onFrameStart(sessionId) { throw new Error('Not implemented'); }\n  onFrameEnd(sessionId) { throw new Error('Not implemented'); }\n  doesSessionSupportReferenceSpace(sessionId, type) { throw new Error('Not implemented'); }\n  requestStageBounds() { throw new Error('Not implemented'); }\n  async requestFrameOfReferenceTransform(type, options) {\n    return undefined;\n  }\n  cancelAnimationFrame(handle) { throw new Error('Not implemented'); }\n  endSession(sessionId) { throw new Error('Not implemented'); }\n  getViewport(sessionId, eye, layer, target) { throw new Error('Not implemented'); }\n  getProjectionMatrix(eye) { throw new Error('Not implemented'); }\n  getBasePoseMatrix() { throw new Error('Not implemented'); }\n  getBaseViewMatrix(eye) { throw new Error('Not implemented'); }\n  getInputSources() { throw new Error('Not implemented'); }\n  getInputPose(inputSource, coordinateSystem, poseType) { throw new Error('Not implemented'); }\n  onWindowResize() {\n    this.onWindowResize();\n  }\n}\n\nlet daydream = {\n  mapping: '',\n  profiles: ['google-daydream', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: null,\n    1: null,\n    2: 0\n  },\n};\nlet viveFocus = {\n  mapping: 'xr-standard',\n  profiles: ['htc-vive-focus', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n};\nlet oculusGo = {\n  mapping: 'xr-standard',\n  profiles: ['oculus-go', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n  gripTransform: {\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet oculusTouch = {\n  mapping: 'xr-standard',\n  displayProfiles: {\n    'Oculus Quest': ['oculus-touch-v2', 'oculus-touch', 'generic-trigger-squeeze-thumbstick']\n  },\n  profiles: ['oculus-touch', 'generic-trigger-squeeze-thumbstick'],\n  axes: {\n    length: 4,\n    0: null,\n    1: null,\n    2: 0,\n    3: 1\n  },\n  buttons: {\n    length: 7,\n    0: 1,\n    1: 2,\n    2: null,\n    3: 0,\n    4: 3,\n    5: 4,\n    6: null\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet openVr = {\n  mapping: 'xr-standard',\n  profiles: ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n  displayProfiles: {\n    'HTC Vive': ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n    'HTC Vive DVT': ['htc-vive', 'generic-trigger-squeeze-touchpad'],\n    'Valve Index': ['valve-index', 'generic-trigger-squeeze-touchpad-thumbstick']\n  },\n  buttons: {\n    length: 3,\n    0: 1,\n    1: 2,\n    2: 0\n  },\n  gripTransform: {\n    position: [0, 0, 0.05, 1],\n  },\n  targetRayTransform: {\n    orientation: [Math.PI * -0.08, 0, 0, 1]\n  },\n  userAgentOverrides: {\n    \"Firefox\": {\n      axes: {\n        invert: [1, 3]\n      }\n    }\n  }\n};\nlet samsungGearVR = {\n  mapping: 'xr-standard',\n  profiles: ['samsung-gearvr', 'generic-trigger-touchpad'],\n  buttons: {\n    length: 3,\n    0: 1,\n    1: null,\n    2: 0\n  },\n  gripTransform: {\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet samsungOdyssey = {\n  mapping: 'xr-standard',\n  profiles: ['samsung-odyssey', 'microsoft-mixed-reality', 'generic-trigger-squeeze-touchpad-thumbstick'],\n  buttons: {\n    length: 4,\n    0: 1,\n    1: 0,\n    2: 2,\n    3: 4,\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet windowsMixedReality = {\n  mapping: 'xr-standard',\n  profiles: ['microsoft-mixed-reality', 'generic-trigger-squeeze-touchpad-thumbstick'],\n  buttons: {\n    length: 4,\n    0: 1,\n    1: 0,\n    2: 2,\n    3: 4,\n  },\n  gripTransform: {\n    position: [0, -0.02, 0.04, 1],\n    orientation: [Math.PI * 0.11, 0, 0, 1]\n  }\n};\nlet GamepadMappings = {\n  'Daydream Controller': daydream,\n  'Gear VR Controller': samsungGearVR,\n  'HTC Vive Focus Controller': viveFocus,\n  'Oculus Go Controller': oculusGo,\n  'Oculus Touch (Right)': oculusTouch,\n  'Oculus Touch (Left)': oculusTouch,\n  'OpenVR Gamepad': openVr,\n  'Spatial Controller (Spatial Interaction Source) 045E-065A': windowsMixedReality,\n  'Spatial Controller (Spatial Interaction Source) 045E-065D': samsungOdyssey,\n  'Windows Mixed Reality (Right)': windowsMixedReality,\n  'Windows Mixed Reality (Left)': windowsMixedReality,\n};\n\nconst HEAD_ELBOW_OFFSET_RIGHTHANDED = fromValues$1(0.155, -0.465, -0.15);\nconst HEAD_ELBOW_OFFSET_LEFTHANDED = fromValues$1(-0.155, -0.465, -0.15);\nconst ELBOW_WRIST_OFFSET = fromValues$1(0, 0, -0.25);\nconst WRIST_CONTROLLER_OFFSET = fromValues$1(0, 0, 0.05);\nconst ARM_EXTENSION_OFFSET = fromValues$1(-0.08, 0.14, 0.08);\nconst ELBOW_BEND_RATIO = 0.4;\nconst EXTENSION_RATIO_WEIGHT = 0.4;\nconst MIN_ANGULAR_SPEED = 0.61;\nconst MIN_ANGLE_DELTA = 0.175;\nconst MIN_EXTENSION_COS = 0.12;\nconst MAX_EXTENSION_COS = 0.87;\nconst RAD_TO_DEG = 180 / Math.PI;\nfunction eulerFromQuaternion(out, q, order) {\n  function clamp(value, min$$1, max$$1) {\n    return (value < min$$1 ? min$$1 : (value > max$$1 ? max$$1 : value));\n  }\n  var sqx = q[0] * q[0];\n  var sqy = q[1] * q[1];\n  var sqz = q[2] * q[2];\n  var sqw = q[3] * q[3];\n  if ( order === 'XYZ' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[1] * q[2] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[0] * q[2] + q[1] * q[3] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order ===  'YXZ' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] - q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZXY' ) {\n    out[0] = Math.asin(  clamp( 2 * ( q[0] * q[3] + q[1] * q[2] ), -1, 1 ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[2] * q[0] ), ( sqw - sqx - sqy + sqz ) );\n    out[2] = Math.atan2( 2 * ( q[2] * q[3] - q[0] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n  } else if ( order === 'ZYX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[2] * q[1] ), ( sqw - sqx - sqy + sqz ) );\n    out[1] = Math.asin(  clamp( 2 * ( q[1] * q[3] - q[0] * q[2] ), -1, 1 ) );\n    out[2] = Math.atan2( 2 * ( q[0] * q[1] + q[2] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n  } else if ( order === 'YZX' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] - q[2] * q[1] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[1] * q[3] - q[0] * q[2] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[0] * q[1] + q[2] * q[3] ), -1, 1 ) );\n  } else if ( order === 'XZY' ) {\n    out[0] = Math.atan2( 2 * ( q[0] * q[3] + q[1] * q[2] ), ( sqw - sqx + sqy - sqz ) );\n    out[1] = Math.atan2( 2 * ( q[0] * q[2] + q[1] * q[3] ), ( sqw + sqx - sqy - sqz ) );\n    out[2] = Math.asin(  clamp( 2 * ( q[2] * q[3] - q[0] * q[1] ), -1, 1 ) );\n  } else {\n    console.log('No order given for quaternion to euler conversion.');\n    return;\n  }\n}\nclass OrientationArmModel {\n  constructor() {\n    this.hand = 'right';\n    this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n    this.controllerQ = create$4();\n    this.lastControllerQ = create$4();\n    this.headQ = create$4();\n    this.headPos = create$1();\n    this.elbowPos = create$1();\n    this.wristPos = create$1();\n    this.time = null;\n    this.lastTime = null;\n    this.rootQ = create$4();\n    this.position = create$1();\n  }\n  setHandedness(hand) {\n    if (this.hand != hand) {\n      this.hand = hand;\n      if (this.hand == 'left') {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_LEFTHANDED;\n      } else {\n        this.headElbowOffset = HEAD_ELBOW_OFFSET_RIGHTHANDED;\n      }\n    }\n  }\n  update(controllerOrientation, headPoseMatrix) {\n    this.time = now$1();\n    if (controllerOrientation) {\n      copy$4(this.lastControllerQ, this.controllerQ);\n      copy$4(this.controllerQ, controllerOrientation);\n    }\n    if (headPoseMatrix) {\n      getTranslation(this.headPos, headPoseMatrix);\n      getRotation(this.headQ, headPoseMatrix);\n    }\n    let headYawQ = this.getHeadYawOrientation_();\n    let angleDelta = this.quatAngle_(this.lastControllerQ, this.controllerQ);\n    let timeDelta = (this.time - this.lastTime) / 1000;\n    let controllerAngularSpeed = angleDelta / timeDelta;\n    if (controllerAngularSpeed > MIN_ANGULAR_SPEED) {\n      slerp(this.rootQ, this.rootQ, headYawQ,\n                 Math.min(angleDelta / MIN_ANGLE_DELTA, 1.0));\n    } else {\n      copy$4(this.rootQ, headYawQ);\n    }\n    let controllerForward = fromValues$1(0, 0, -1.0);\n    transformQuat(controllerForward, controllerForward, this.controllerQ);\n    let controllerDotY = dot(controllerForward, [0, 1, 0]);\n    let extensionRatio = this.clamp_(\n        (controllerDotY - MIN_EXTENSION_COS) / MAX_EXTENSION_COS, 0.0, 1.0);\n    let controllerCameraQ = clone$4(this.rootQ);\n    invert$2(controllerCameraQ, controllerCameraQ);\n    multiply$4(controllerCameraQ, controllerCameraQ, this.controllerQ);\n    let elbowPos = this.elbowPos;\n    copy$1(elbowPos, this.headPos);\n    add$1(elbowPos, elbowPos, this.headElbowOffset);\n    let elbowOffset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(elbowOffset, elbowOffset, extensionRatio);\n    add$1(elbowPos, elbowPos, elbowOffset);\n    let totalAngle = this.quatAngle_(controllerCameraQ, create$4());\n    let totalAngleDeg = totalAngle * RAD_TO_DEG;\n    let lerpSuppression = 1 - Math.pow(totalAngleDeg / 180, 4);let elbowRatio = ELBOW_BEND_RATIO;\n    let wristRatio = 1 - ELBOW_BEND_RATIO;\n    let lerpValue = lerpSuppression *\n        (elbowRatio + wristRatio * extensionRatio * EXTENSION_RATIO_WEIGHT);\n    let wristQ = create$4();\n    slerp(wristQ, wristQ, controllerCameraQ, lerpValue);\n    let invWristQ = invert$2(create$4(), wristQ);\n    let elbowQ = clone$4(controllerCameraQ);\n    multiply$4(elbowQ, elbowQ, invWristQ);\n    let wristPos = this.wristPos;\n    copy$1(wristPos, WRIST_CONTROLLER_OFFSET);\n    transformQuat(wristPos, wristPos, wristQ);\n    add$1(wristPos, wristPos, ELBOW_WRIST_OFFSET);\n    transformQuat(wristPos, wristPos, elbowQ);\n    add$1(wristPos, wristPos, elbowPos);\n    let offset = clone$1(ARM_EXTENSION_OFFSET);\n    scale$1(offset, offset, extensionRatio);\n    add$1(this.position, this.wristPos, offset);\n    transformQuat(this.position, this.position, this.rootQ);\n    this.lastTime = this.time;\n  }\n  getPosition() {\n    return this.position;\n  }\n  getHeadYawOrientation_() {\n    let headEuler = create$1();\n    eulerFromQuaternion(headEuler, this.headQ, 'YXZ');\n    let destinationQ = fromEuler(create$4(), 0, headEuler[1] * RAD_TO_DEG, 0);\n    return destinationQ;\n  }\n  clamp_(value, min$$1, max$$1) {\n    return Math.min(Math.max(value, min$$1), max$$1);\n  }\n  quatAngle_(q1, q2) {\n    let vec1 = [0, 0, -1];\n    let vec2 = [0, 0, -1];\n    transformQuat(vec1, vec1, q1);\n    transformQuat(vec2, vec2, q2);\n    return angle(vec1, vec2);\n  }\n}\n\nconst PRIVATE$18 = Symbol('@@webxr-polyfill/XRRemappedGamepad');\nconst PLACEHOLDER_BUTTON = { pressed: false, touched: false, value: 0.0 };\nObject.freeze(PLACEHOLDER_BUTTON);\nclass XRRemappedGamepad {\n  constructor(gamepad, display, map) {\n    if (!map) {\n      map = {};\n    }\n    if (map.userAgentOverrides) {\n      for (let agent in map.userAgentOverrides) {\n        if (navigator.userAgent.includes(agent)) {\n          let override = map.userAgentOverrides[agent];\n          for (let key in override) {\n            if (key in map) {\n              Object.assign(map[key], override[key]);\n            } else {\n              map[key] = override[key];\n            }\n          }\n          break;\n        }\n      }\n    }\n    let axes = new Array(map.axes && map.axes.length ? map.axes.length : gamepad.axes.length);\n    let buttons = new Array(map.buttons && map.buttons.length ? map.buttons.length : gamepad.buttons.length);\n    let gripTransform = null;\n    if (map.gripTransform) {\n      let orientation = map.gripTransform.orientation || [0, 0, 0, 1];\n      gripTransform = create();\n      fromRotationTranslation(\n        gripTransform,\n        normalize$2(orientation, orientation),\n        map.gripTransform.position || [0, 0, 0]\n      );\n    }\n    let targetRayTransform = null;\n    if (map.targetRayTransform) {\n      let orientation =  map.targetRayTransform.orientation || [0, 0, 0, 1];\n      targetRayTransform = create();\n      fromRotationTranslation(\n        targetRayTransform,\n        normalize$2(orientation, orientation),\n        map.targetRayTransform.position || [0, 0, 0]\n      );\n    }\n    let profiles = map.profiles;\n    if (map.displayProfiles) {\n      if (display.displayName in map.displayProfiles) {\n        profiles = map.displayProfiles[display.displayName];\n      }\n    }\n    this[PRIVATE$18] = {\n      gamepad,\n      map,\n      profiles: profiles || [gamepad.id],\n      mapping: map.mapping || gamepad.mapping,\n      axes,\n      buttons,\n      gripTransform,\n      targetRayTransform,\n    };\n    this._update();\n  }\n  _update() {\n    let gamepad = this[PRIVATE$18].gamepad;\n    let map = this[PRIVATE$18].map;\n    let axes = this[PRIVATE$18].axes;\n    for (let i = 0; i < axes.length; ++i) {\n      if (map.axes && i in map.axes) {\n        if (map.axes[i] === null) {\n          axes[i] = 0;\n        } else {\n          axes[i] = gamepad.axes[map.axes[i]];\n        }\n      } else {\n        axes[i] = gamepad.axes[i];\n      }\n    }\n    if (map.axes && map.axes.invert) {\n      for (let axis of map.axes.invert) {\n        if (axis < axes.length) {\n          axes[axis] *= -1;\n        }\n      }\n    }\n    let buttons = this[PRIVATE$18].buttons;\n    for (let i = 0; i < buttons.length; ++i) {\n      if (map.buttons && i in map.buttons) {\n        if (map.buttons[i] === null) {\n          buttons[i] = PLACEHOLDER_BUTTON;\n        } else {\n          buttons[i] = gamepad.buttons[map.buttons[i]];\n        }\n      } else {\n        buttons[i] = gamepad.buttons[i];\n      }\n    }\n  }\n  get id() {\n    return '';\n  }\n  get _profiles() {\n    return this[PRIVATE$18].profiles;\n  }\n  get index() {\n    return -1;\n  }\n  get connected() {\n    return this[PRIVATE$18].gamepad.connected;\n  }\n  get timestamp() {\n    return this[PRIVATE$18].gamepad.timestamp;\n  }\n  get mapping() {\n    return this[PRIVATE$18].mapping;\n  }\n  get axes() {\n    return this[PRIVATE$18].axes;\n  }\n  get buttons() {\n    return this[PRIVATE$18].buttons;\n  }\n  get hapticActuators() {\n    return this[PRIVATE$18].gamepad.hapticActuators;\n  }\n}\nclass GamepadXRInputSource {\n  constructor(polyfill, display, primaryButtonIndex = 0, primarySqueezeButtonIndex = -1) {\n    this.polyfill = polyfill;\n    this.display = display;\n    this.nativeGamepad = null;\n    this.gamepad = null;\n    this.inputSource = new XRInputSource(this);\n    this.lastPosition = create$1();\n    this.emulatedPosition = false;\n    this.basePoseMatrix = create();\n    this.outputMatrix = create();\n    this.primaryButtonIndex = primaryButtonIndex;\n    this.primaryActionPressed = false;\n    this.primarySqueezeButtonIndex = primarySqueezeButtonIndex;\n    this.primarySqueezeActionPressed = false;\n    this.handedness = '';\n    this.targetRayMode = 'gaze';\n    this.armModel = null;\n  }\n  get profiles() {\n    return this.gamepad ? this.gamepad._profiles : [];\n  }\n  updateFromGamepad(gamepad) {\n    if (this.nativeGamepad !== gamepad) {\n      this.nativeGamepad = gamepad;\n      if (gamepad) {\n        this.gamepad = new XRRemappedGamepad(gamepad, this.display, GamepadMappings[gamepad.id]);\n      } else {\n        this.gamepad = null;\n      }\n    }\n    this.handedness = gamepad.hand === '' ? 'none' : gamepad.hand;\n    if (this.gamepad) {\n      this.gamepad._update();\n    }\n    if (gamepad.pose) {\n      this.targetRayMode = 'tracked-pointer';\n      this.emulatedPosition = !gamepad.pose.hasPosition;\n    } else if (gamepad.hand === '') {\n      this.targetRayMode = 'gaze';\n      this.emulatedPosition = false;\n    }\n  }\n  updateBasePoseMatrix() {\n    if (this.nativeGamepad && this.nativeGamepad.pose) {\n      let pose = this.nativeGamepad.pose;\n      let position = pose.position;\n      let orientation = pose.orientation;\n      if (!position && !orientation) {\n        return;\n      }\n      if (!position) {\n        if (!pose.hasPosition) {\n          if (!this.armModel) {\n            this.armModel = new OrientationArmModel();\n          }\n          this.armModel.setHandedness(this.nativeGamepad.hand);\n          this.armModel.update(orientation, this.polyfill.getBasePoseMatrix());\n          position = this.armModel.getPosition();\n        } else {\n          position = this.lastPosition;\n        }\n      } else {\n        this.lastPosition[0] = position[0];\n        this.lastPosition[1] = position[1];\n        this.lastPosition[2] = position[2];\n      }\n      fromRotationTranslation(this.basePoseMatrix, orientation, position);\n    } else {\n      copy(this.basePoseMatrix, this.polyfill.getBasePoseMatrix());\n    }\n    return this.basePoseMatrix;\n  }\n  getXRPose(coordinateSystem, poseType) {\n    this.updateBasePoseMatrix();\n    switch(poseType) {\n      case \"target-ray\":\n        coordinateSystem._transformBasePoseMatrix(this.outputMatrix, this.basePoseMatrix);\n        if (this.gamepad && this.gamepad[PRIVATE$18].targetRayTransform) {\n          multiply(this.outputMatrix, this.outputMatrix, this.gamepad[PRIVATE$18].targetRayTransform);\n        }\n        break;\n      case \"grip\":\n        if (!this.nativeGamepad || !this.nativeGamepad.pose) {\n          return null;\n        }\n        coordinateSystem._transformBasePoseMatrix(this.outputMatrix, this.basePoseMatrix);\n        if (this.gamepad && this.gamepad[PRIVATE$18].gripTransform) {\n          multiply(this.outputMatrix, this.outputMatrix, this.gamepad[PRIVATE$18].gripTransform);\n        }\n        break;\n      default:\n        return null;\n    }\n    coordinateSystem._adjustForOriginOffset(this.outputMatrix);\n    return new XRPose(new XRRigidTransform(this.outputMatrix), this.emulatedPosition);\n  }\n}\n\nconst TEST_ENV = \"production\" === 'test';\nconst EXTRA_PRESENTATION_ATTRIBUTES = {\n  highRefreshRate: true,\n};\nconst PRIMARY_BUTTON_MAP = {\n  oculus: 1,\n  openvr: 1,\n  'spatial controller (spatial interaction source)': 1\n};\nlet SESSION_ID = 0;\nclass Session {\n  constructor(mode, enabledFeatures, polyfillOptions={}) {\n    this.mode = mode;\n    this.enabledFeatures = enabledFeatures;\n    this.outputContext = null;\n    this.immersive = mode == 'immersive-vr' || mode == 'immersive-ar';\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID;\n    this.modifiedCanvasLayer = false;\n    if (this.outputContext && !TEST_ENV) {\n      const renderContextType = polyfillOptions.renderContextType || '2d';\n      this.renderContext = this.outputContext.canvas.getContext(renderContextType);\n    }\n  }\n}\nclass WebVRDevice extends XRDevice {\n  constructor(global, display) {\n    const { canPresent } = display.capabilities;\n    super(global);\n    this.display = display;\n    this.frame = new global.VRFrameData();\n    this.sessions = new Map();\n    this.immersiveSession = null;\n    this.canPresent = canPresent;\n    this.baseModelMatrix = create();\n    this.gamepadInputSources = {};\n    this.tempVec3 = new Float32Array(3);\n    this.onVRDisplayPresentChange = this.onVRDisplayPresentChange.bind(this);\n    global.window.addEventListener('vrdisplaypresentchange', this.onVRDisplayPresentChange);\n    this.CAN_USE_GAMEPAD = global.navigator && ('getGamepads' in global.navigator);\n    this.HAS_BITMAP_SUPPORT = isImageBitmapSupported(global);\n  }\n  get depthNear() { return this.display.depthNear; }\n  set depthNear(val) { this.display.depthNear = val; }\n  get depthFar() { return this.display.depthFar; }\n  set depthFar(val) { this.display.depthFar = val; }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    const canvas = layer.context.canvas;\n    if (session.immersive) {\n      const left = this.display.getEyeParameters('left');\n      const right = this.display.getEyeParameters('right');\n      canvas.width = Math.max(left.renderWidth, right.renderWidth) * 2;\n      canvas.height = Math.max(left.renderHeight, right.renderHeight);\n      this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES\n        }]).then(() => {\n        if (!TEST_ENV && !this.global.document.body.contains(canvas)) {\n          session.modifiedCanvasLayer = true;\n          this.global.document.body.appendChild(canvas);\n          applyCanvasStylesForMinimalRendering(canvas);\n        }\n        session.baseLayer = layer;\n      });\n    }\n    else {\n      session.baseLayer = layer;\n    }\n  }\n  isSessionSupported(mode) {\n    if (mode == 'immersive-ar') {\n      return false;\n    }\n    if (mode == 'immersive-vr' && this.canPresent === false) {\n      return false;\n    }\n    return true;\n  }\n  isFeatureSupported(featureDescriptor) {\n    switch(featureDescriptor) {\n      case 'viewer': return true;\n      case 'local': return true;\n      case 'local-floor': return true;\n      case 'bounded': return false;\n      case 'unbounded': return false;\n      default: return false;\n    }\n  }\n  async requestSession(mode, enabledFeatures) {\n    if (!this.isSessionSupported(mode)) {\n      return Promise.reject();\n    }\n    let immersive = mode == 'immersive-vr';\n    if (immersive) {\n      const canvas = this.global.document.createElement('canvas');\n      if (!TEST_ENV) {\n        const ctx = canvas.getContext('webgl');\n      }\n      await this.display.requestPresent([{\n          source: canvas, attributes: EXTRA_PRESENTATION_ATTRIBUTES }]);\n    }\n    const session = new Session(mode, enabledFeatures, {\n      renderContextType: this.HAS_BITMAP_SUPPORT ? 'bitmaprenderer' : '2d'\n    });\n    this.sessions.set(session.id, session);\n    if (immersive) {\n      this.immersiveSession = session;\n      this.dispatchEvent('@@webxr-polyfill/vr-present-start', session.id);\n    }\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return this.display.requestAnimationFrame(callback);\n  }\n  getPrimaryButtonIndex(gamepad) {\n    let primaryButton = 0;\n    let name = gamepad.id.toLowerCase();\n    for (let key in PRIMARY_BUTTON_MAP) {\n      if (name.includes(key)) {\n        primaryButton = PRIMARY_BUTTON_MAP[key];\n        break;\n      }\n    }\n    return Math.min(primaryButton, gamepad.buttons.length - 1);\n  }\n  onFrameStart(sessionId, renderState) {\n    this.display.depthNear = renderState.depthNear;\n    this.display.depthFar = renderState.depthFar;\n    this.display.getFrameData(this.frame);\n    const session = this.sessions.get(sessionId);\n    if (session.immersive && this.CAN_USE_GAMEPAD) {\n      let prevInputSources = this.gamepadInputSources;\n      this.gamepadInputSources = {};\n      let gamepads = this.global.navigator.getGamepads();\n      for (let i = 0; i < gamepads.length; ++i) {\n        let gamepad = gamepads[i];\n        if (gamepad && gamepad.displayId > 0) {\n          let inputSourceImpl = prevInputSources[i];\n          if (!inputSourceImpl) {\n            inputSourceImpl = new GamepadXRInputSource(this, this.display, this.getPrimaryButtonIndex(gamepad));\n          }\n          inputSourceImpl.updateFromGamepad(gamepad);\n          this.gamepadInputSources[i] = inputSourceImpl;\n          if (inputSourceImpl.primaryButtonIndex != -1) {\n            let primaryActionPressed = gamepad.buttons[inputSourceImpl.primaryButtonIndex].pressed;\n            if (primaryActionPressed && !inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primaryActionPressed && inputSourceImpl.primaryActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-select-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primaryActionPressed = primaryActionPressed;\n          }\n          if (inputSourceImpl.primarySqueezeButtonIndex != -1) {\n            let primarySqueezeActionPressed = gamepad.buttons[inputSourceImpl.primarySqueezeButtonIndex].pressed;\n            if (primarySqueezeActionPressed && !inputSourceImpl.primarySqueezeActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-squeeze-start', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            } else if (!primarySqueezeActionPressed && inputSourceImpl.primarySqueezeActionPressed) {\n              this.dispatchEvent('@@webxr-polyfill/input-squeeze-end', { sessionId: session.id, inputSource: inputSourceImpl.inputSource });\n            }\n            inputSourceImpl.primarySqueezeActionPressed = primarySqueezeActionPressed;\n          }\n        }\n      }\n    }\n    if (TEST_ENV) {\n      return;\n    }\n    if (!session.immersive && session.baseLayer) {\n      const canvas = session.baseLayer.context.canvas;\n      perspective(this.frame.leftProjectionMatrix, renderState.inlineVerticalFieldOfView,\n          canvas.width/canvas.height, renderState.depthNear, renderState.depthFar);\n    }\n  }\n  onFrameEnd(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended || !session.baseLayer) {\n      return;\n    }\n    if (session.outputContext &&\n        !(session.immersive && !this.display.capabilities.hasExternalDisplay)) {\n      const mirroring =\n        session.immersive && this.display.capabilities.hasExternalDisplay;\n      const iCanvas = session.baseLayer.context.canvas;\n      const iWidth = mirroring ? iCanvas.width / 2 : iCanvas.width;\n      const iHeight = iCanvas.height;\n      if (!TEST_ENV) {\n        const oCanvas = session.outputContext.canvas;\n        const oWidth = oCanvas.width;\n        const oHeight = oCanvas.height;\n        const renderContext = session.renderContext;\n        if (this.HAS_BITMAP_SUPPORT) {\n          if (iCanvas.transferToImageBitmap) {\n            renderContext.transferFromImageBitmap(iCanvas.transferToImageBitmap());\n          }\n          else {\n            this.global.createImageBitmap(iCanvas, 0, 0, iWidth, iHeight, {\n              resizeWidth: oWidth,\n              resizeHeight: oHeight,\n            }).then(bitmap => renderContext.transferFromImageBitmap(bitmap));\n          }\n        } else {\n          renderContext.drawImage(iCanvas, 0, 0, iWidth, iHeight,\n                                           0, 0, oWidth, oHeight);\n        }\n      }\n    }\n    if (session.immersive && session.baseLayer) {\n      this.display.submitFrame();\n    }\n  }\n  cancelAnimationFrame(handle) {\n    this.display.cancelAnimationFrame(handle);\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return;\n    }\n    if (session.immersive) {\n      return this.display.exitPresent();\n    } else {\n      session.ended = true;\n    }\n  }\n  doesSessionSupportReferenceSpace(sessionId, type) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return false;\n    }\n    return session.enabledFeatures.has(type);\n  }\n  requestStageBounds() {\n    if (this.display.stageParameters) {\n      const width = this.display.stageParameters.sizeX;\n      const depth = this.display.stageParameters.sizeZ;\n      const data = [];\n      data.push(-width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(-depth / 2);\n      data.push(width / 2);\n      data.push(depth / 2);\n      data.push(-width / 2);\n      data.push(depth / 2);\n      return data;\n    }\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    if ((type === 'local-floor' || type === 'bounded-floor') &&\n        this.display.stageParameters &&\n        this.display.stageParameters.sittingToStandingTransform) {\n      return this.display.stageParameters.sittingToStandingTransform;\n    }\n    return null;\n  }\n  getProjectionMatrix(eye) {\n    if (eye === 'left') {\n      return this.frame.leftProjectionMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightProjectionMatrix;\n    } else if (eye === 'none') {\n      return this.frame.leftProjectionMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    if (!session.immersive) {\n      target.x = target.y = 0;\n      target.width = width;\n      target.height = height;\n      return true;\n    }\n    if (eye === 'left' || eye === 'none') {\n      target.x = 0;\n    } else if (eye === 'right') {\n      target.x = width / 2;\n    } else {\n      return false;\n    }\n    target.y = 0;\n    target.width = width / 2;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    let { position, orientation } = this.frame.pose;\n    if (!position && !orientation) {\n      return this.baseModelMatrix;\n    }\n    if (!position) {\n      position = this.tempVec3;\n      position[0] = position[1] = position[2] = 0;\n    }\n    fromRotationTranslation(this.baseModelMatrix, orientation, position);\n    return this.baseModelMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    if (eye === 'left' || eye === 'none') {\n      return this.frame.leftViewMatrix;\n    } else if (eye === 'right') {\n      return this.frame.rightViewMatrix;\n    } else {\n      throw new Error(`eye must be of type 'left' or 'right'`);\n    }\n  }\n  getInputSources() {\n    let inputSources = [];\n    for (let i in this.gamepadInputSources) {\n      inputSources.push(this.gamepadInputSources[i].inputSource);\n    }\n    return inputSources;\n  }\n  getInputPose(inputSource, coordinateSystem, poseType) {\n    if (!coordinateSystem) {\n      return null;\n    }\n    for (let i in this.gamepadInputSources) {\n      let inputSourceImpl = this.gamepadInputSources[i];\n      if (inputSourceImpl.inputSource === inputSource) {\n        return inputSourceImpl.getXRPose(coordinateSystem, poseType);\n      }\n    }\n    return null;\n  }\n  onWindowResize() {\n  }\n  onVRDisplayPresentChange(e) {\n    if (!this.display.isPresenting) {\n      this.sessions.forEach(session => {\n        if (session.immersive && !session.ended) {\n          if (session.modifiedCanvasLayer) {\n            const canvas = session.baseLayer.context.canvas;\n            document.body.removeChild(canvas);\n            canvas.setAttribute('style', '');\n          }\n          if (this.immersiveSession === session) {\n            this.immersiveSession = null;\n          }\n          this.dispatchEvent('@@webxr-polyfill/vr-present-end', session.id);\n        }\n      });\n    }\n  }\n}\n\nclass CardboardXRDevice extends WebVRDevice {\n  constructor(global, cardboardConfig) {\n    const display = new CardboardVRDisplay(cardboardConfig || {});\n    super(global, display);\n    this.display = display;\n    this.frame = {\n      rightViewMatrix: new Float32Array(16),\n      leftViewMatrix: new Float32Array(16),\n      rightProjectionMatrix: new Float32Array(16),\n      leftProjectionMatrix: new Float32Array(16),\n      pose: null,\n      timestamp: null,\n    };\n  }\n}\n\nconst TEST_ENV$1 = \"production\" === 'test';\nlet SESSION_ID$1 = 0;\nclass Session$1 {\n  constructor(mode, enabledFeatures) {\n    this.mode = mode;\n    this.enabledFeatures = enabledFeatures;\n    this.ended = null;\n    this.baseLayer = null;\n    this.id = ++SESSION_ID$1;\n  }\n}\nclass InlineDevice extends XRDevice {\n  constructor(global) {\n    super(global);\n    this.sessions = new Map();\n    this.projectionMatrix = create();\n    this.identityMatrix = create();\n  }\n  onBaseLayerSet(sessionId, layer) {\n    const session = this.sessions.get(sessionId);\n    session.baseLayer = layer;\n  }\n  isSessionSupported(mode) {\n    return mode == 'inline';\n  }\n  isFeatureSupported(featureDescriptor) {\n    switch(featureDescriptor) {\n      case 'viewer': return true;\n      default: return false;\n    }\n  }\n  async requestSession(mode, enabledFeatures) {\n    if (!this.isSessionSupported(mode)) {\n      return Promise.reject();\n    }\n    const session = new Session$1(mode, enabledFeatures);\n    this.sessions.set(session.id, session);\n    return Promise.resolve(session.id);\n  }\n  requestAnimationFrame(callback) {\n    return window.requestAnimationFrame(callback);\n  }\n  cancelAnimationFrame(handle) {\n    window.cancelAnimationFrame(handle);\n  }\n  onFrameStart(sessionId, renderState) {\n    if (TEST_ENV$1) {\n      return;\n    }\n    const session = this.sessions.get(sessionId);\n    if (session.baseLayer) {\n      const canvas = session.baseLayer.context.canvas;\n      perspective(this.projectionMatrix, renderState.inlineVerticalFieldOfView,\n          canvas.width/canvas.height, renderState.depthNear, renderState.depthFar);\n    }\n  }\n  onFrameEnd(sessionId) {\n  }\n  async endSession(sessionId) {\n    const session = this.sessions.get(sessionId);\n    session.ended = true;\n  }\n  doesSessionSupportReferenceSpace(sessionId, type) {\n    const session = this.sessions.get(sessionId);\n    if (session.ended) {\n      return false;\n    }\n    return session.enabledFeatures.has(type);\n  }\n  requestStageBounds() {\n    return null;\n  }\n  async requestFrameOfReferenceTransform(type, options) {\n    return null;\n  }\n  getProjectionMatrix(eye) {\n    return this.projectionMatrix;\n  }\n  getViewport(sessionId, eye, layer, target) {\n    const session = this.sessions.get(sessionId);\n    const { width, height } = layer.context.canvas;\n    target.x = target.y = 0;\n    target.width = width;\n    target.height = height;\n    return true;\n  }\n  getBasePoseMatrix() {\n    return this.identityMatrix;\n  }\n  getBaseViewMatrix(eye) {\n    return this.identityMatrix;\n  }\n  getInputSources() {\n    return [];\n  }\n  getInputPose(inputSource, coordinateSystem, poseType) {\n    return null;\n  }\n  onWindowResize() {\n  }\n}\n\nconst getWebVRDevice = async function (global) {\n  let device = null;\n  if ('getVRDisplays' in global.navigator) {\n    try {\n      const displays = await global.navigator.getVRDisplays();\n      if (displays && displays.length) {\n        device = new WebVRDevice(global, displays[0]);\n      }\n    } catch (e) {}\n  }\n  return device;\n};\nconst requestXRDevice = async function (global, config) {\n  if (config.webvr) {\n    let xr = await getWebVRDevice(global);\n    if (xr) {\n      return xr;\n    }\n  }\n  let mobile = isMobile(global);\n  if ((mobile && config.cardboard) ||\n      (!mobile && config.allowCardboardOnDesktop)) {\n    if (!global.VRFrameData) {\n      global.VRFrameData = function () {\n        this.rightViewMatrix = new Float32Array(16);\n        this.leftViewMatrix = new Float32Array(16);\n        this.rightProjectionMatrix = new Float32Array(16);\n        this.leftProjectionMatrix = new Float32Array(16);\n        this.pose = null;\n      };\n    }\n    return new CardboardXRDevice(global, config.cardboardConfig);\n  }\n  return new InlineDevice(global);\n};\n\nconst CONFIG_DEFAULTS = {\n  global: _global,\n  webvr: true,\n  cardboard: true,\n  cardboardConfig: null,\n  allowCardboardOnDesktop: false,\n};\nconst partials = ['navigator', 'HTMLCanvasElement', 'WebGLRenderingContext'];\nclass WebXRPolyfill {\n  constructor(config={}) {\n    this.config = Object.freeze(Object.assign({}, CONFIG_DEFAULTS, config));\n    this.global = this.config.global;\n    this.nativeWebXR = 'xr' in this.global.navigator;\n    this.injected = false;\n    if (!this.nativeWebXR) {\n      this._injectPolyfill(this.global);\n    } else {\n      this._injectCompatibilityShims(this.global);\n    }\n  }\n  _injectPolyfill(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    for (const className of Object.keys(API)) {\n      if (global[className] !== undefined) {\n        console.warn(`${className} already defined on global.`);\n      } else {\n        global[className] = API[className];\n      }\n    }\n    {\n      const polyfilledCtx = polyfillMakeXRCompatible(global.WebGLRenderingContext);\n      if (polyfilledCtx) {\n        polyfillGetContext(global.HTMLCanvasElement);\n        if (global.OffscreenCanvas) {\n          polyfillGetContext(global.OffscreenCanvas);\n        }\n        if (global.WebGL2RenderingContext){\n          polyfillMakeXRCompatible(global.WebGL2RenderingContext);\n        }\n        if (!window.isSecureContext) {\n          console.warn(`WebXR Polyfill Warning:\nThis page is not running in a secure context (https:// or localhost)!\nThis means that although the page may be able to use the WebXR Polyfill it will\nnot be able to use native WebXR implementations, and as such will not be able to\naccess dedicated VR or AR hardware, and will not be able to take advantage of\nany performance improvements a native WebXR implementation may offer. Please\nhost this content on a secure origin for the best user experience.\n`);\n        }\n      }\n    }\n    this.injected = true;\n    this._patchNavigatorXR();\n  }\n  _patchNavigatorXR() {\n    let devicePromise = requestXRDevice(this.global, this.config);\n    this.xr = new API.XRSystem(devicePromise);\n    Object.defineProperty(this.global.navigator, 'xr', {\n      value: this.xr,\n      configurable: true,\n    });\n  }\n  _injectCompatibilityShims(global) {\n    if (!partials.every(iface => !!global[iface])) {\n      throw new Error(`Global must have the following attributes : ${partials}`);\n    }\n    if (global.navigator.xr &&\n        'supportsSession' in global.navigator.xr &&\n        !('isSessionSupported' in global.navigator.xr)) {\n      let originalSupportsSession = global.navigator.xr.supportsSession;\n      global.navigator.xr.isSessionSupported = function(mode) {\n        return originalSupportsSession.call(this, mode).then(() => {\n          return true;\n        }).catch(() => {\n          return false;\n        });\n      };\n      global.navigator.xr.supportsSession = function(mode) {\n        console.warn(\"navigator.xr.supportsSession() is deprecated. Please \" +\n        \"call navigator.xr.isSessionSupported() instead and check the boolean \" +\n        \"value returned when the promise resolves.\");\n        return originalSupportsSession.call(this, mode);\n      };\n    }\n  }\n}\n\nexport default WebXRPolyfill;\n","/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\nvar Easing = {\n    Linear: {\n        None: function (amount) {\n            return amount;\n        },\n    },\n    Quadratic: {\n        In: function (amount) {\n            return amount * amount;\n        },\n        Out: function (amount) {\n            return amount * (2 - amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount;\n            }\n            return -0.5 * (--amount * (amount - 2) - 1);\n        },\n    },\n    Cubic: {\n        In: function (amount) {\n            return amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount + 2);\n        },\n    },\n    Quartic: {\n        In: function (amount) {\n            return amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return 1 - --amount * amount * amount * amount;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount;\n            }\n            return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n        },\n    },\n    Quintic: {\n        In: function (amount) {\n            return amount * amount * amount * amount * amount;\n        },\n        Out: function (amount) {\n            return --amount * amount * amount * amount * amount + 1;\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return 0.5 * amount * amount * amount * amount * amount;\n            }\n            return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n        },\n    },\n    Sinusoidal: {\n        In: function (amount) {\n            return 1 - Math.cos((amount * Math.PI) / 2);\n        },\n        Out: function (amount) {\n            return Math.sin((amount * Math.PI) / 2);\n        },\n        InOut: function (amount) {\n            return 0.5 * (1 - Math.cos(Math.PI * amount));\n        },\n    },\n    Exponential: {\n        In: function (amount) {\n            return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n        },\n        Out: function (amount) {\n            return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            if ((amount *= 2) < 1) {\n                return 0.5 * Math.pow(1024, amount - 1);\n            }\n            return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n        },\n    },\n    Circular: {\n        In: function (amount) {\n            return 1 - Math.sqrt(1 - amount * amount);\n        },\n        Out: function (amount) {\n            return Math.sqrt(1 - --amount * amount);\n        },\n        InOut: function (amount) {\n            if ((amount *= 2) < 1) {\n                return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n            }\n            return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n        },\n    },\n    Elastic: {\n        In: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n        },\n        Out: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n        },\n        InOut: function (amount) {\n            if (amount === 0) {\n                return 0;\n            }\n            if (amount === 1) {\n                return 1;\n            }\n            amount *= 2;\n            if (amount < 1) {\n                return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            }\n            return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n        },\n    },\n    Back: {\n        In: function (amount) {\n            var s = 1.70158;\n            return amount * amount * ((s + 1) * amount - s);\n        },\n        Out: function (amount) {\n            var s = 1.70158;\n            return --amount * amount * ((s + 1) * amount + s) + 1;\n        },\n        InOut: function (amount) {\n            var s = 1.70158 * 1.525;\n            if ((amount *= 2) < 1) {\n                return 0.5 * (amount * amount * ((s + 1) * amount - s));\n            }\n            return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n        },\n    },\n    Bounce: {\n        In: function (amount) {\n            return 1 - Easing.Bounce.Out(1 - amount);\n        },\n        Out: function (amount) {\n            if (amount < 1 / 2.75) {\n                return 7.5625 * amount * amount;\n            }\n            else if (amount < 2 / 2.75) {\n                return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n            }\n            else if (amount < 2.5 / 2.75) {\n                return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n            }\n            else {\n                return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n            }\n        },\n        InOut: function (amount) {\n            if (amount < 0.5) {\n                return Easing.Bounce.In(amount * 2) * 0.5;\n            }\n            return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n        },\n    },\n};\n\nvar now;\n// Include a performance.now polyfill.\n// In node.js, use process.hrtime.\n// eslint-disable-next-line\n// @ts-ignore\nif (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n    now = function () {\n        // eslint-disable-next-line\n        // @ts-ignore\n        var time = process.hrtime();\n        // Convert [seconds, nanoseconds] to milliseconds.\n        return time[0] * 1000 + time[1] / 1000000;\n    };\n}\n// In a browser, use self.performance.now if it is available.\nelse if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    now = self.performance.now.bind(self.performance);\n}\n// Use Date.now if it is available.\nelse if (Date.now !== undefined) {\n    now = Date.now;\n}\n// Otherwise, use 'new Date().getTime()'.\nelse {\n    now = function () {\n        return new Date().getTime();\n    };\n}\nvar now$1 = now;\n\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tween\n */\nvar Group = /** @class */ (function () {\n    function Group() {\n        this._tweens = {};\n        this._tweensAddedDuringUpdate = {};\n    }\n    Group.prototype.getAll = function () {\n        var _this = this;\n        return Object.keys(this._tweens).map(function (tweenId) {\n            return _this._tweens[tweenId];\n        });\n    };\n    Group.prototype.removeAll = function () {\n        this._tweens = {};\n    };\n    Group.prototype.add = function (tween) {\n        this._tweens[tween.getId()] = tween;\n        this._tweensAddedDuringUpdate[tween.getId()] = tween;\n    };\n    Group.prototype.remove = function (tween) {\n        delete this._tweens[tween.getId()];\n        delete this._tweensAddedDuringUpdate[tween.getId()];\n    };\n    Group.prototype.update = function (time, preserve) {\n        if (time === void 0) { time = now$1(); }\n        if (preserve === void 0) { preserve = false; }\n        var tweenIds = Object.keys(this._tweens);\n        if (tweenIds.length === 0) {\n            return false;\n        }\n        // Tweens are updated in \"batches\". If you add a new tween during an\n        // update, then the new tween will be updated in the next batch.\n        // If you remove a tween during an update, it may or may not be updated.\n        // However, if the removed tween was added during the current batch,\n        // then it will not be updated.\n        while (tweenIds.length > 0) {\n            this._tweensAddedDuringUpdate = {};\n            for (var i = 0; i < tweenIds.length; i++) {\n                var tween = this._tweens[tweenIds[i]];\n                var autoStart = !preserve;\n                if (tween && tween.update(time, autoStart) === false && !preserve) {\n                    delete this._tweens[tweenIds[i]];\n                }\n            }\n            tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n        }\n        return true;\n    };\n    return Group;\n}());\n\n/**\n *\n */\nvar Interpolation = {\n    Linear: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.Linear;\n        if (k < 0) {\n            return fn(v[0], v[1], f);\n        }\n        if (k > 1) {\n            return fn(v[m], v[m - 1], m - f);\n        }\n        return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n    },\n    Bezier: function (v, k) {\n        var b = 0;\n        var n = v.length - 1;\n        var pw = Math.pow;\n        var bn = Interpolation.Utils.Bernstein;\n        for (var i = 0; i <= n; i++) {\n            b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n        }\n        return b;\n    },\n    CatmullRom: function (v, k) {\n        var m = v.length - 1;\n        var f = m * k;\n        var i = Math.floor(f);\n        var fn = Interpolation.Utils.CatmullRom;\n        if (v[0] === v[m]) {\n            if (k < 0) {\n                i = Math.floor((f = m * (1 + k)));\n            }\n            return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n        }\n        else {\n            if (k < 0) {\n                return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n            }\n            if (k > 1) {\n                return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n            }\n            return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n        }\n    },\n    Utils: {\n        Linear: function (p0, p1, t) {\n            return (p1 - p0) * t + p0;\n        },\n        Bernstein: function (n, i) {\n            var fc = Interpolation.Utils.Factorial;\n            return fc(n) / fc(i) / fc(n - i);\n        },\n        Factorial: (function () {\n            var a = [1];\n            return function (n) {\n                var s = 1;\n                if (a[n]) {\n                    return a[n];\n                }\n                for (var i = n; i > 1; i--) {\n                    s *= i;\n                }\n                a[n] = s;\n                return s;\n            };\n        })(),\n        CatmullRom: function (p0, p1, p2, p3, t) {\n            var v0 = (p2 - p0) * 0.5;\n            var v1 = (p3 - p1) * 0.5;\n            var t2 = t * t;\n            var t3 = t * t2;\n            return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n        },\n    },\n};\n\n/**\n * Utils\n */\nvar Sequence = /** @class */ (function () {\n    function Sequence() {\n    }\n    Sequence.nextId = function () {\n        return Sequence._nextId++;\n    };\n    Sequence._nextId = 0;\n    return Sequence;\n}());\n\nvar mainGroup = new Group();\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar Tween = /** @class */ (function () {\n    function Tween(_object, _group) {\n        if (_group === void 0) { _group = mainGroup; }\n        this._object = _object;\n        this._group = _group;\n        this._isPaused = false;\n        this._pauseStart = 0;\n        this._valuesStart = {};\n        this._valuesEnd = {};\n        this._valuesStartRepeat = {};\n        this._duration = 1000;\n        this._initialRepeat = 0;\n        this._repeat = 0;\n        this._yoyo = false;\n        this._isPlaying = false;\n        this._reversed = false;\n        this._delayTime = 0;\n        this._startTime = 0;\n        this._easingFunction = Easing.Linear.None;\n        this._interpolationFunction = Interpolation.Linear;\n        this._chainedTweens = [];\n        this._onStartCallbackFired = false;\n        this._id = Sequence.nextId();\n        this._isChainStopped = false;\n        this._goToEnd = false;\n    }\n    Tween.prototype.getId = function () {\n        return this._id;\n    };\n    Tween.prototype.isPlaying = function () {\n        return this._isPlaying;\n    };\n    Tween.prototype.isPaused = function () {\n        return this._isPaused;\n    };\n    Tween.prototype.to = function (properties, duration) {\n        // TODO? restore this, then update the 07_dynamic_to example to set fox\n        // tween's to on each update. That way the behavior is opt-in (there's\n        // currently no opt-out).\n        // for (const prop in properties) this._valuesEnd[prop] = properties[prop]\n        this._valuesEnd = Object.create(properties);\n        if (duration !== undefined) {\n            this._duration = duration;\n        }\n        return this;\n    };\n    Tween.prototype.duration = function (d) {\n        this._duration = d;\n        return this;\n    };\n    Tween.prototype.start = function (time) {\n        if (this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        this._repeat = this._initialRepeat;\n        if (this._reversed) {\n            // If we were reversed (f.e. using the yoyo feature) then we need to\n            // flip the tween direction back to forward.\n            this._reversed = false;\n            for (var property in this._valuesStartRepeat) {\n                this._swapEndStartRepeatValues(property);\n                this._valuesStart[property] = this._valuesStartRepeat[property];\n            }\n        }\n        this._isPlaying = true;\n        this._isPaused = false;\n        this._onStartCallbackFired = false;\n        this._isChainStopped = false;\n        this._startTime = time !== undefined ? (typeof time === 'string' ? now$1() + parseFloat(time) : time) : now$1();\n        this._startTime += this._delayTime;\n        this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n        return this;\n    };\n    Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n        for (var property in _valuesEnd) {\n            var startValue = _object[property];\n            var startValueIsArray = Array.isArray(startValue);\n            var propType = startValueIsArray ? 'array' : typeof startValue;\n            var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n            // If `to()` specifies a property that doesn't exist in the source object,\n            // we should not set that property in the object\n            if (propType === 'undefined' || propType === 'function') {\n                continue;\n            }\n            // Check if an Array was provided as property value\n            if (isInterpolationList) {\n                var endValues = _valuesEnd[property];\n                if (endValues.length === 0) {\n                    continue;\n                }\n                // handle an array of relative values\n                endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\n                // Create a local copy of the Array with the start value at the front\n                _valuesEnd[property] = [startValue].concat(endValues);\n            }\n            // handle the deepness of the values\n            if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                _valuesStart[property] = startValueIsArray ? [] : {};\n                // eslint-disable-next-line\n                for (var prop in startValue) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property][prop] = startValue[prop];\n                }\n                _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n            }\n            else {\n                // Save the starting value, but only once.\n                if (typeof _valuesStart[property] === 'undefined') {\n                    _valuesStart[property] = startValue;\n                }\n                if (!startValueIsArray) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                }\n                if (isInterpolationList) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                }\n                else {\n                    _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                }\n            }\n        }\n    };\n    Tween.prototype.stop = function () {\n        if (!this._isChainStopped) {\n            this._isChainStopped = true;\n            this.stopChainedTweens();\n        }\n        if (!this._isPlaying) {\n            return this;\n        }\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        this._isPlaying = false;\n        this._isPaused = false;\n        if (this._onStopCallback) {\n            this._onStopCallback(this._object);\n        }\n        return this;\n    };\n    Tween.prototype.end = function () {\n        this._goToEnd = true;\n        this.update(Infinity);\n        return this;\n    };\n    Tween.prototype.pause = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = true;\n        this._pauseStart = time;\n        // eslint-disable-next-line\n        this._group && this._group.remove(this);\n        return this;\n    };\n    Tween.prototype.resume = function (time) {\n        if (time === void 0) { time = now$1(); }\n        if (!this._isPaused || !this._isPlaying) {\n            return this;\n        }\n        this._isPaused = false;\n        this._startTime += time - this._pauseStart;\n        this._pauseStart = 0;\n        // eslint-disable-next-line\n        this._group && this._group.add(this);\n        return this;\n    };\n    Tween.prototype.stopChainedTweens = function () {\n        for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n            this._chainedTweens[i].stop();\n        }\n        return this;\n    };\n    Tween.prototype.group = function (group) {\n        this._group = group;\n        return this;\n    };\n    Tween.prototype.delay = function (amount) {\n        this._delayTime = amount;\n        return this;\n    };\n    Tween.prototype.repeat = function (times) {\n        this._initialRepeat = times;\n        this._repeat = times;\n        return this;\n    };\n    Tween.prototype.repeatDelay = function (amount) {\n        this._repeatDelayTime = amount;\n        return this;\n    };\n    Tween.prototype.yoyo = function (yoyo) {\n        this._yoyo = yoyo;\n        return this;\n    };\n    Tween.prototype.easing = function (easingFunction) {\n        this._easingFunction = easingFunction;\n        return this;\n    };\n    Tween.prototype.interpolation = function (interpolationFunction) {\n        this._interpolationFunction = interpolationFunction;\n        return this;\n    };\n    Tween.prototype.chain = function () {\n        var tweens = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tweens[_i] = arguments[_i];\n        }\n        this._chainedTweens = tweens;\n        return this;\n    };\n    Tween.prototype.onStart = function (callback) {\n        this._onStartCallback = callback;\n        return this;\n    };\n    Tween.prototype.onUpdate = function (callback) {\n        this._onUpdateCallback = callback;\n        return this;\n    };\n    Tween.prototype.onRepeat = function (callback) {\n        this._onRepeatCallback = callback;\n        return this;\n    };\n    Tween.prototype.onComplete = function (callback) {\n        this._onCompleteCallback = callback;\n        return this;\n    };\n    Tween.prototype.onStop = function (callback) {\n        this._onStopCallback = callback;\n        return this;\n    };\n    /**\n     * @returns true if the tween is still playing after the update, false\n     * otherwise (calling update on a paused tween still returns true because\n     * it is still playing, just paused).\n     */\n    Tween.prototype.update = function (time, autoStart) {\n        if (time === void 0) { time = now$1(); }\n        if (autoStart === void 0) { autoStart = true; }\n        if (this._isPaused)\n            return true;\n        var property;\n        var elapsed;\n        var endTime = this._startTime + this._duration;\n        if (!this._goToEnd && !this._isPlaying) {\n            if (time > endTime)\n                return false;\n            if (autoStart)\n                this.start(time);\n        }\n        this._goToEnd = false;\n        if (time < this._startTime) {\n            return true;\n        }\n        if (this._onStartCallbackFired === false) {\n            if (this._onStartCallback) {\n                this._onStartCallback(this._object);\n            }\n            this._onStartCallbackFired = true;\n        }\n        elapsed = (time - this._startTime) / this._duration;\n        elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n        var value = this._easingFunction(elapsed);\n        // properties transformations\n        this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n        if (this._onUpdateCallback) {\n            this._onUpdateCallback(this._object, elapsed);\n        }\n        if (elapsed === 1) {\n            if (this._repeat > 0) {\n                if (isFinite(this._repeat)) {\n                    this._repeat--;\n                }\n                // Reassign starting values, restart by making startTime = now\n                for (property in this._valuesStartRepeat) {\n                    if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                        this._valuesStartRepeat[property] =\n                            // eslint-disable-next-line\n                            // @ts-ignore FIXME?\n                            this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                    }\n                    if (this._yoyo) {\n                        this._swapEndStartRepeatValues(property);\n                    }\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n                if (this._yoyo) {\n                    this._reversed = !this._reversed;\n                }\n                if (this._repeatDelayTime !== undefined) {\n                    this._startTime = time + this._repeatDelayTime;\n                }\n                else {\n                    this._startTime = time + this._delayTime;\n                }\n                if (this._onRepeatCallback) {\n                    this._onRepeatCallback(this._object);\n                }\n                return true;\n            }\n            else {\n                if (this._onCompleteCallback) {\n                    this._onCompleteCallback(this._object);\n                }\n                for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                    // Make the chained tweens start exactly at the time they should,\n                    // even if the `update()` method was called way past the duration of the tween\n                    this._chainedTweens[i].start(this._startTime + this._duration);\n                }\n                this._isPlaying = false;\n                return false;\n            }\n        }\n        return true;\n    };\n    Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n        for (var property in _valuesEnd) {\n            // Don't update properties that do not exist in the source object\n            if (_valuesStart[property] === undefined) {\n                continue;\n            }\n            var start = _valuesStart[property] || 0;\n            var end = _valuesEnd[property];\n            var startIsArray = Array.isArray(_object[property]);\n            var endIsArray = Array.isArray(end);\n            var isInterpolationList = !startIsArray && endIsArray;\n            if (isInterpolationList) {\n                _object[property] = this._interpolationFunction(end, value);\n            }\n            else if (typeof end === 'object' && end) {\n                // eslint-disable-next-line\n                // @ts-ignore FIXME?\n                this._updateProperties(_object[property], start, end, value);\n            }\n            else {\n                // Parses relative end values with start as base (e.g.: +10, -3)\n                end = this._handleRelativeValue(start, end);\n                // Protect against non numeric properties.\n                if (typeof end === 'number') {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    _object[property] = start + (end - start) * value;\n                }\n            }\n        }\n    };\n    Tween.prototype._handleRelativeValue = function (start, end) {\n        if (typeof end !== 'string') {\n            return end;\n        }\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n            return start + parseFloat(end);\n        }\n        else {\n            return parseFloat(end);\n        }\n    };\n    Tween.prototype._swapEndStartRepeatValues = function (property) {\n        var tmp = this._valuesStartRepeat[property];\n        var endValue = this._valuesEnd[property];\n        if (typeof endValue === 'string') {\n            this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n        }\n        else {\n            this._valuesStartRepeat[property] = this._valuesEnd[property];\n        }\n        this._valuesEnd[property] = tmp;\n    };\n    return Tween;\n}());\n\nvar VERSION = '18.6.4';\n\n/**\n * Tween.js - Licensed under the MIT license\n * https://github.com/tweenjs/tween.js\n * ----------------------------------------------\n *\n * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n * Thank you all, you're awesome!\n */\nvar nextId = Sequence.nextId;\n/**\n * Controlling groups of tweens\n *\n * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n * In these cases, you may want to create your own smaller groups of tweens.\n */\nvar TWEEN = mainGroup;\n// This is the best way to export things in a way that's compatible with both ES\n// Modules and CommonJS, without build hacks, and so as not to break the\n// existing API.\n// https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\nvar getAll = TWEEN.getAll.bind(TWEEN);\nvar removeAll = TWEEN.removeAll.bind(TWEEN);\nvar add = TWEEN.add.bind(TWEEN);\nvar remove = TWEEN.remove.bind(TWEEN);\nvar update = TWEEN.update.bind(TWEEN);\nvar exports = {\n    Easing: Easing,\n    Group: Group,\n    Interpolation: Interpolation,\n    now: now$1,\n    Sequence: Sequence,\n    nextId: nextId,\n    Tween: Tween,\n    VERSION: VERSION,\n    getAll: getAll,\n    removeAll: removeAll,\n    add: add,\n    remove: remove,\n    update: update,\n};\n\nexport default exports;\nexport { Easing, Group, Interpolation, Sequence, Tween, VERSION, add, getAll, nextId, now$1 as now, remove, removeAll, update };\n","import { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nimport {\n    WebGLRenderer,\n    Scene,\n    PerspectiveCamera,\n    AmbientLight,\n    DirectionalLight,\n    SphereGeometry,\n    BackSide,\n    Mesh,\n    MeshBasicMaterial,\n    Vector3,\n    MeshLambertMaterial,\n    PlaneGeometry,\n    TextureLoader,\n    Group,\n    RepeatWrapping\n} from 'three';\nimport { VRButton } from 'three/examples/jsm/webxr/VRButton.js';\nimport WebXRPolyfill from 'webxr-polyfill';\nimport TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\n\nconst sceneRadius = 500;\n\nconst cameraGroup = new Group();\n\nconst canvas = document.querySelector('canvas');\nconst renderer = new WebGLRenderer({ canvas: canvas, antialias: true });\nrenderer.xr.enabled = true;\nrenderer.logarithmicDepthBuffer = true;\nrenderer.setPixelRatio(window.devicePixelRatio);\n\nconst scene = new Scene();\nscene.name = \"xrGarden\";\nwindow.scene = scene;\nconst camera = new PerspectiveCamera();\ncamera.far = 1000;\ncameraGroup.add(camera);\nscene.add(cameraGroup);\n\nconst controls = new OrbitControls(camera, renderer.domElement);\ncontrols.maxPolarAngle = Math.PI * 0.5;\ncontrols.target = new Vector3(0, 1, -5);\ncamera.position.set(0, 1.6, 0);\ncontrols.update();\n\nfunction onWindowResize() {\n    const w = window.innerWidth;\n    const h = window.innerHeight;\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(w, h);\n}\nwindow.addEventListener('resize', onWindowResize, false);\nonWindowResize();\n\nconst light = new DirectionalLight(0xffaa33);\nlight.position.set(-sceneRadius, sceneRadius, sceneRadius);\nlight.intensity = 1.0;\nscene.add(light);\n// Add the sun\nlight.add(\n    new Mesh(new SphereGeometry(sceneRadius/10, 32, 32), new MeshBasicMaterial({\n        color: 0xffaa33\n    }))\n);\n\nconst light2 = new AmbientLight(0x003973);\nlight2.intensity = 1.0;\nscene.add(light2);\n\nconst skyGeometry = new SphereGeometry(sceneRadius, 50, 50, 0, 2 * Math.PI);\nconst skyMaterial = new MeshBasicMaterial({\n    side: BackSide,\n    depthWrite: false\n});\n\n// Nice sky with a bit of dithering to reduce banding.\nskyMaterial.onBeforeCompile = function (shader) {\n    shader.vertexShader = shader.vertexShader.replace('#include <common>', '#include <common>\\n#define USE_UV');\n    shader.fragmentShader = shader.fragmentShader.replace('#include <common>', `\n    #include <common>\n    #define USE_UV\n    float random (vec2 st) {\n        return fract(sin(dot(st.xy, vec2(12.9898,78.233)))* 43758.5453123);\n    }\n    `);\n    shader.fragmentShader = shader.fragmentShader.replace('#include <map_fragment>', `\n        vec4 col1;\n        vec4 col2;\n        float mixAmount;\n        if (vUv.y > 0.5) {\n            col1 = vec4( 249, 229, 180, 1 ) / 255.0;\n            col2 = vec4( 0, 57, 115, 1 ) / 255.0;\n            float newY = (vUv.y - 0.5) * 2.0;\n            mixAmount = sqrt(newY)*2.0;\n        } else {\n            col1 = vec4(0.6,0.6,0.6,1.0);\n        }\n        vec4 random4 = vec4((random(vUv)-0.5) * (1.4 / 255.0));\n        diffuseColor *= mix(col1, col2, mixAmount) + random4;\n    `);\n};\nconst skySphere = new Mesh(skyGeometry, skyMaterial);\nskySphere.name = 'skySphere';\nscene.add(skySphere);\n\nconst floorTexture = new TextureLoader().load('https://cdn.glitch.com/3423c223-e1e5-450d-8cfa-2f5215104916%2Fmemphis-mini.png?v=1579618577700');\nfloorTexture.repeat.multiplyScalar(sceneRadius);\nfloorTexture.wrapS = floorTexture.wrapT = RepeatWrapping;\nconst floor = new Mesh(\n    new PlaneGeometry(sceneRadius*2,sceneRadius*2,50,50),\n    new MeshLambertMaterial({\n        map: floorTexture\n    })\n);\nfloor.rotation.x = -Math.PI / 2;\nfloor.name = 'floor';\nscene.add(floor);\n\nnew WebXRPolyfill();\ndocument.body.appendChild( VRButton.createButton( renderer ) );\n\nconst rafCallbacks = new Set();\nrenderer.setAnimationLoop(function (time) {\n    TWEEN.update(time);\n    rafCallbacks.forEach(cb => cb(time));\n    renderer.render(scene, camera);\n});\n\nexport {\n    renderer,\n    scene,\n    rafCallbacks,\n    cameraGroup,\n    camera\n};","class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n}\n\nexport { VRButton };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tCanvasTexture,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet content;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tconst magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, - scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst source = json.images[ extension.source ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\tconst source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\nclass GLTFMeshStandardSGMaterial extends MeshStandardMaterial {\n\n\tconstructor( params ) {\n\n\t\tsuper();\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tconst specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tconst uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( const uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass GLTFMaterialsPbrSpecularGlossinessExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n\t\tthis.specularGlossinessParams = [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'normalMapType',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity',\n\t\t\t'refractionRatio',\n\t\t];\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn GLTFMeshStandardSGMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst pending = [];\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\tconst array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\tconst specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\tcreateMaterial( materialParams ) {\n\n\t\tconst material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\tmaterial.fog = true;\n\n\t\tmaterial.color = materialParams.color;\n\n\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\tmaterial.lightMap = null;\n\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\tmaterial.emissive = materialParams.emissive;\n\t\tmaterial.emissiveIntensity = 1.0;\n\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\tmaterial.bumpScale = 1;\n\n\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\tmaterial.displacementMap = null;\n\t\tmaterial.displacementScale = 1;\n\t\tmaterial.displacementBias = 0;\n\n\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\tmaterial.specular = materialParams.specular;\n\n\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\tmaterial.alphaMap = null;\n\n\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\tmaterial.envMapIntensity = 1.0;\n\n\t\tmaterial.refractionRatio = 0.98;\n\n\t\treturn material;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\tconst result = this.resultBuffer;\n\tconst values = this.sampleValues;\n\tconst stride = this.valueSize;\n\n\tconst stride2 = stride * 2;\n\tconst stride3 = stride * 3;\n\n\tconst td = t1 - t0;\n\n\tconst p = ( t - t0 ) / td;\n\tconst pp = p * p;\n\tconst ppp = pp * p;\n\n\tconst offset1 = i1 * stride3;\n\tconst offset0 = offset1 - stride3;\n\n\tconst s2 = - 2 * ppp + 3 * pp;\n\tconst s3 = ppp - pp;\n\tconst s0 = 1 - s2;\n\tconst s1 = s3 - pp + p;\n\n\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t}\n\n\treturn result;\n\n};\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/* UTILITY FUNCTIONS */\n\nfunction resolveURL( url, path ) {\n\n\t// Invalid URL\n\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t// Host Relative URL\n\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t}\n\n\t// Absolute URL http://,https://,//\n\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t// Data URI\n\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t// Blob URL\n\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t// Relative URL\n\treturn path + url;\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst source = json.images[ textureDef.source ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, source, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tconst cacheKey = ( source.uri || source.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = source.uri || '';\n\t\tlet isObjectURL = false;\n\t\tlet hasAlpha = true;\n\n\t\tconst isJPEG = sourceURI.search( /\\.jpe?g($|\\?)/i ) > 0 || sourceURI.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\tif ( source.mimeType === 'image/jpeg' || isJPEG ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative — the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tconst colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tassignTexture( materialParams, mapName, mapDef ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\t\tconst useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tconst useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useMorphTargets ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tif ( useVertexTangents ) {\n\n\t\t\t\t\tcachedMaterial.vertexTangents = true;\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tconst sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\tmaterialParams.normalScale = new Vector2( 1, - 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, - materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tlet material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst pending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tpending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\nfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\tconst nodeDef = json.nodes[ nodeId ];\n\n\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t// build skeleton here as well\n\n\t\tlet skinEntry;\n\n\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\tskinEntry = skin;\n\n\t\t\tconst pendingJoints = [];\n\n\t\t\tfor ( let i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pendingJoints );\n\n\t\t} ).then( function ( jointNodes ) {\n\n\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\tconst bones = [];\n\t\t\t\tconst boneInverses = [];\n\n\t\t\t\tfor ( let j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst jointNode = jointNodes[ j ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t} );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t} ).then( function ( node ) {\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tconst pending = [];\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tconst children = nodeDef.children;\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\nexport { GLTFLoader };\n","/**\n * @webxr-input-profiles/motion-controllers 1.0.0 https://github.com/immersive-web/webxr-input-profiles\n */\n\nconst Constants = {\n  Handedness: Object.freeze({\n    NONE: 'none',\n    LEFT: 'left',\n    RIGHT: 'right'\n  }),\n\n  ComponentState: Object.freeze({\n    DEFAULT: 'default',\n    TOUCHED: 'touched',\n    PRESSED: 'pressed'\n  }),\n\n  ComponentProperty: Object.freeze({\n    BUTTON: 'button',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    STATE: 'state'\n  }),\n\n  ComponentType: Object.freeze({\n    TRIGGER: 'trigger',\n    SQUEEZE: 'squeeze',\n    TOUCHPAD: 'touchpad',\n    THUMBSTICK: 'thumbstick',\n    BUTTON: 'button'\n  }),\n\n  ButtonTouchThreshold: 0.05,\n\n  AxisTouchThreshold: 0.1,\n\n  VisualResponseProperty: Object.freeze({\n    TRANSFORM: 'transform',\n    VISIBILITY: 'visibility'\n  })\n};\n\n/**\n * @description Static helper function to fetch a JSON file and turn it into a JS object\n * @param {string} path - Path to JSON file to be fetched\n */\nasync function fetchJsonFile(path) {\n  const response = await fetch(path);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  } else {\n    return response.json();\n  }\n}\n\nasync function fetchProfilesList(basePath) {\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  const profileListFileName = 'profilesList.json';\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\n  return profilesList;\n}\n\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\n  if (!xrInputSource) {\n    throw new Error('No xrInputSource supplied');\n  }\n\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  // Get the list of profiles\n  const supportedProfilesList = await fetchProfilesList(basePath);\n\n  // Find the relative path to the first requested profile that is recognized\n  let match;\n  xrInputSource.profiles.some((profileId) => {\n    const supportedProfile = supportedProfilesList[profileId];\n    if (supportedProfile) {\n      match = {\n        profileId,\n        profilePath: `${basePath}/${supportedProfile.path}`,\n        deprecated: !!supportedProfile.deprecated\n      };\n    }\n    return !!match;\n  });\n\n  if (!match) {\n    if (!defaultProfile) {\n      throw new Error('No matching profile name found');\n    }\n\n    const supportedProfile = supportedProfilesList[defaultProfile];\n    if (!supportedProfile) {\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\n    }\n\n    match = {\n      profileId: defaultProfile,\n      profilePath: `${basePath}/${supportedProfile.path}`,\n      deprecated: !!supportedProfile.deprecated\n    };\n  }\n\n  const profile = await fetchJsonFile(match.profilePath);\n\n  let assetPath;\n  if (getAssetPath) {\n    let layout;\n    if (xrInputSource.handedness === 'any') {\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\n    } else {\n      layout = profile.layouts[xrInputSource.handedness];\n    }\n    if (!layout) {\n      throw new Error(\n        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`\n      );\n    }\n\n    if (layout.assetPath) {\n      assetPath = match.profilePath.replace('profile.json', layout.assetPath);\n    }\n  }\n\n  return { profile, assetPath };\n}\n\n/** @constant {Object} */\nconst defaultComponentValues = {\n  xAxis: 0,\n  yAxis: 0,\n  button: 0,\n  state: Constants.ComponentState.DEFAULT\n};\n\n/**\n * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad\n * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within\n * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical\n * range of motion and touchpads do not report touch locations off their physical bounds.\n * @param {number} x The original x coordinate in the range -1 to 1\n * @param {number} y The original y coordinate in the range -1 to 1\n */\nfunction normalizeAxes(x = 0, y = 0) {\n  let xAxis = x;\n  let yAxis = y;\n\n  // Determine if the point is outside the bounds of the circle\n  // and, if so, place it on the edge of the circle\n  const hypotenuse = Math.sqrt((x * x) + (y * y));\n  if (hypotenuse > 1) {\n    const theta = Math.atan2(y, x);\n    xAxis = Math.cos(theta);\n    yAxis = Math.sin(theta);\n  }\n\n  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves\n  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.\n  const result = {\n    normalizedXAxis: (xAxis * 0.5) + 0.5,\n    normalizedYAxis: (yAxis * 0.5) + 0.5\n  };\n  return result;\n}\n\n/**\n * Contains the description of how the 3D model should visually respond to a specific user input.\n * This is accomplished by initializing the object with the name of a node in the 3D model and\n * property that need to be modified in response to user input, the name of the nodes representing\n * the allowable range of motion, and the name of the input which triggers the change. In response\n * to the named input changing, this object computes the appropriate weighting to use for\n * interpolating between the range of motion nodes.\n */\nclass VisualResponse {\n  constructor(visualResponseDescription) {\n    this.componentProperty = visualResponseDescription.componentProperty;\n    this.states = visualResponseDescription.states;\n    this.valueNodeName = visualResponseDescription.valueNodeName;\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\n\n    if (this.valueNodeProperty === Constants.VisualResponseProperty.TRANSFORM) {\n      this.minNodeName = visualResponseDescription.minNodeName;\n      this.maxNodeName = visualResponseDescription.maxNodeName;\n    }\n\n    // Initializes the response's current value based on default data\n    this.value = 0;\n    this.updateFromComponent(defaultComponentValues);\n  }\n\n  /**\n   * Computes the visual response's interpolation weight based on component state\n   * @param {Object} componentValues - The component from which to update\n   * @param {number} xAxis - The reported X axis value of the component\n   * @param {number} yAxis - The reported Y axis value of the component\n   * @param {number} button - The reported value of the component's button\n   * @param {string} state - The component's active state\n   */\n  updateFromComponent({\n    xAxis, yAxis, button, state\n  }) {\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\n    switch (this.componentProperty) {\n      case Constants.ComponentProperty.X_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.Y_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.BUTTON:\n        this.value = (this.states.includes(state)) ? button : 0;\n        break;\n      case Constants.ComponentProperty.STATE:\n        if (this.valueNodeProperty === Constants.VisualResponseProperty.VISIBILITY) {\n          this.value = (this.states.includes(state));\n        } else {\n          this.value = this.states.includes(state) ? 1.0 : 0.0;\n        }\n        break;\n      default:\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\n    }\n  }\n}\n\nclass Component {\n  /**\n   * @param {Object} componentId - Id of the component\n   * @param {Object} componentDescription - Description of the component to be created\n   */\n  constructor(componentId, componentDescription) {\n    if (!componentId\n     || !componentDescription\n     || !componentDescription.visualResponses\n     || !componentDescription.gamepadIndices\n     || Object.keys(componentDescription.gamepadIndices).length === 0) {\n      throw new Error('Invalid arguments supplied');\n    }\n\n    this.id = componentId;\n    this.type = componentDescription.type;\n    this.rootNodeName = componentDescription.rootNodeName;\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\n\n    // Build all the visual responses for this component\n    this.visualResponses = {};\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\n      this.visualResponses[responseName] = visualResponse;\n    });\n\n    // Set default values\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\n\n    this.values = {\n      state: Constants.ComponentState.DEFAULT,\n      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,\n      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,\n      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined\n    };\n  }\n\n  get data() {\n    const data = { id: this.id, ...this.values };\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\n   */\n  updateFromGamepad(gamepad) {\n    // Set the state to default before processing other data sources\n    this.values.state = Constants.ComponentState.DEFAULT;\n\n    // Get and normalize button\n    if (this.gamepadIndices.button !== undefined\n        && gamepad.buttons.length > this.gamepadIndices.button) {\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\n      this.values.button = gamepadButton.value;\n      this.values.button = (this.values.button < 0) ? 0 : this.values.button;\n      this.values.button = (this.values.button > 1) ? 1 : this.values.button;\n\n      // Set the state based on the button\n      if (gamepadButton.pressed || this.values.button === 1) {\n        this.values.state = Constants.ComponentState.PRESSED;\n      } else if (gamepadButton.touched || this.values.button > Constants.ButtonTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize x axis value\n    if (this.gamepadIndices.xAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.xAxis) {\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\n      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;\n      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;\n\n      // If the state is still default, check if the xAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.xAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize Y axis value\n    if (this.gamepadIndices.yAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.yAxis) {\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\n      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;\n      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;\n\n      // If the state is still default, check if the yAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.yAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Update the visual response weights based on the current component data\n    Object.values(this.visualResponses).forEach((visualResponse) => {\n      visualResponse.updateFromComponent(this.values);\n    });\n  }\n}\n\n/**\n  * @description Builds a motion controller with components and visual responses based on the\n  * supplied profile description. Data is polled from the xrInputSource's gamepad.\n  * @author Nell Waliczek / https://github.com/NellWaliczek\n*/\nclass MotionController {\n  /**\n   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around\n   * @param {Object} profile - The best matched profile description for the supplied xrInputSource\n   * @param {Object} assetUrl\n   */\n  constructor(xrInputSource, profile, assetUrl) {\n    if (!xrInputSource) {\n      throw new Error('No xrInputSource supplied');\n    }\n\n    if (!profile) {\n      throw new Error('No profile supplied');\n    }\n\n    this.xrInputSource = xrInputSource;\n    this.assetUrl = assetUrl;\n    this.id = profile.profileId;\n\n    // Build child components as described in the profile description\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\n    this.components = {};\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\n      const componentDescription = this.layoutDescription.components[componentId];\n      this.components[componentId] = new Component(componentId, componentDescription);\n    });\n\n    // Initialize components based on current gamepad state\n    this.updateFromGamepad();\n  }\n\n  get gripSpace() {\n    return this.xrInputSource.gripSpace;\n  }\n\n  get targetRaySpace() {\n    return this.xrInputSource.targetRaySpace;\n  }\n\n  /**\n   * @description Returns a subset of component data for simplified debugging\n   */\n  get data() {\n    const data = [];\n    Object.values(this.components).forEach((component) => {\n      data.push(component.data);\n    });\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   */\n  updateFromGamepad() {\n    Object.values(this.components).forEach((component) => {\n      component.updateFromGamepad(this.xrInputSource.gamepad);\n    });\n  }\n}\n\nexport { Constants, MotionController, fetchProfile, fetchProfilesList };\n","import {\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tSphereGeometry,\n} from 'three';\n\nimport { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nimport {\n\tConstants as MotionControllerConstants,\n\tfetchProfile,\n\tMotionController\n} from '../libs/motion-controllers.module.js';\n\nconst DEFAULT_PROFILES_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles';\nconst DEFAULT_PROFILE = 'generic-trigger';\n\nclass XRControllerModel extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.motionController = null;\n\t\tthis.envMap = null;\n\n\t}\n\n\tsetEnvironmentMap( envMap ) {\n\n\t\tif ( this.envMap == envMap ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.envMap = envMap;\n\t\tthis.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = this.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Polls data from the XRInputSource and updates the model's components to match\n\t * the real world data\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( ! this.motionController ) return;\n\n\t\t// Cause the MotionController to poll the Gamepad for data\n\t\tthis.motionController.updateFromGamepad();\n\n\t\t// Update the 3D model to reflect the button, thumbstick, and touchpad state\n\t\tObject.values( this.motionController.components ).forEach( ( component ) => {\n\n\t\t\t// Update node data based on the visual responses' current states\n\t\t\tObject.values( component.visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\t\tconst { valueNode, minNode, maxNode, value, valueNodeProperty } = visualResponse;\n\n\t\t\t\t// Skip if the visual response node is not found. No error is needed,\n\t\t\t\t// because it will have been reported at load time.\n\t\t\t\tif ( ! valueNode ) return;\n\n\t\t\t\t// Calculate the new properties based on the weight supplied\n\t\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY ) {\n\n\t\t\t\t\tvalueNode.visible = value;\n\n\t\t\t\t} else if ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\t\tvalueNode.quaternion.slerpQuaternions(\n\t\t\t\t\t\tminNode.quaternion,\n\t\t\t\t\t\tmaxNode.quaternion,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t\tvalueNode.position.lerpVectors(\n\t\t\t\t\t\tminNode.position,\n\t\t\t\t\t\tmaxNode.position,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Walks the model's tree to find the nodes needed to animate the components and\n * saves them to the motionContoller components for use in the frame loop. When\n * touchpads are found, attaches a touch dot to them.\n */\nfunction findNodes( motionController, scene ) {\n\n\t// Loop through the components and find the nodes needed for each components' visual responses\n\tObject.values( motionController.components ).forEach( ( component ) => {\n\n\t\tconst { type, touchPointNodeName, visualResponses } = component;\n\n\t\tif ( type === MotionControllerConstants.ComponentType.TOUCHPAD ) {\n\n\t\t\tcomponent.touchPointNode = scene.getObjectByName( touchPointNodeName );\n\t\t\tif ( component.touchPointNode ) {\n\n\t\t\t\t// Attach a touch dot to the touchpad.\n\t\t\t\tconst sphereGeometry = new SphereGeometry( 0.001 );\n\t\t\t\tconst material = new MeshBasicMaterial( { color: 0x0000FF } );\n\t\t\t\tconst sphere = new Mesh( sphereGeometry, material );\n\t\t\t\tcomponent.touchPointNode.add( sphere );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( `Could not find touch dot, ${component.touchPointNodeName}, in touchpad component ${component.id}` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Loop through all the visual responses to be applied to this component\n\t\tObject.values( visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\tconst { valueNodeName, minNodeName, maxNodeName, valueNodeProperty } = visualResponse;\n\n\t\t\t// If animating a transform, find the two nodes to be interpolated between.\n\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\tvisualResponse.minNode = scene.getObjectByName( minNodeName );\n\t\t\t\tvisualResponse.maxNode = scene.getObjectByName( maxNodeName );\n\n\t\t\t\t// If the extents cannot be found, skip this animation\n\t\t\t\tif ( ! visualResponse.minNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${minNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! visualResponse.maxNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${maxNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If the target node cannot be found, skip this animation\n\t\t\tvisualResponse.valueNode = scene.getObjectByName( valueNodeName );\n\t\t\tif ( ! visualResponse.valueNode ) {\n\n\t\t\t\tconsole.warn( `Could not find ${valueNodeName} in the model` );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n}\n\nfunction addAssetSceneToControllerModel( controllerModel, scene ) {\n\n\t// Find the nodes needed for animation and cache them on the motionController.\n\tfindNodes( controllerModel.motionController, scene );\n\n\t// Apply any environment map that the mesh already has set.\n\tif ( controllerModel.envMap ) {\n\n\t\tscene.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = controllerModel.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// Add the glTF scene to the controllerModel.\n\tcontrollerModel.add( scene );\n\n}\n\nclass XRControllerModelFactory {\n\n\tconstructor( gltfLoader = null ) {\n\n\t\tthis.gltfLoader = gltfLoader;\n\t\tthis.path = DEFAULT_PROFILES_PATH;\n\t\tthis._assetCache = {};\n\n\t\t// If a GLTFLoader wasn't supplied to the constructor create a new one.\n\t\tif ( ! this.gltfLoader ) {\n\n\t\t\tthis.gltfLoader = new GLTFLoader();\n\n\t\t}\n\n\t}\n\n\tcreateControllerModel( controller ) {\n\n\t\tconst controllerModel = new XRControllerModel();\n\t\tlet scene = null;\n\n\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\tconst xrInputSource = event.data;\n\n\t\t\tif ( xrInputSource.targetRayMode !== 'tracked-pointer' || ! xrInputSource.gamepad ) return;\n\n\t\t\tfetchProfile( xrInputSource, this.path, DEFAULT_PROFILE ).then( ( { profile, assetPath } ) => {\n\n\t\t\t\tcontrollerModel.motionController = new MotionController(\n\t\t\t\t\txrInputSource,\n\t\t\t\t\tprofile,\n\t\t\t\t\tassetPath\n\t\t\t\t);\n\n\t\t\t\tconst cachedAsset = this._assetCache[ controllerModel.motionController.assetUrl ];\n\t\t\t\tif ( cachedAsset ) {\n\n\t\t\t\t\tscene = cachedAsset.scene.clone();\n\n\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! this.gltfLoader ) {\n\n\t\t\t\t\t\tthrow new Error( 'GLTFLoader not set.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.gltfLoader.setPath( '' );\n\t\t\t\t\tthis.gltfLoader.load( controllerModel.motionController.assetUrl, ( asset ) => {\n\n\t\t\t\t\t\tthis._assetCache[ controllerModel.motionController.assetUrl ] = asset;\n\n\t\t\t\t\t\tscene = asset.scene.clone();\n\n\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t() => {\n\n\t\t\t\t\t\tthrow new Error( `Asset ${controllerModel.motionController.assetUrl} missing or malformed.` );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} ).catch( ( err ) => {\n\n\t\t\t\tconsole.warn( err );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\tcontrollerModel.motionController = null;\n\t\t\tcontrollerModel.remove( scene );\n\t\t\tscene = null;\n\n\t\t} );\n\n\t\treturn controllerModel;\n\n\t}\n\n}\n\nexport { XRControllerModelFactory };\n","import {\n\tDynamicDrawUsage,\n\tSphereGeometry,\n\tBoxGeometry,\n\tMeshStandardMaterial,\n\tInstancedMesh,\n\tMatrix4,\n\tVector3\n} from 'three';\n\nconst _matrix = new Matrix4();\nconst _vector = new Vector3();\n\nclass XRHandPrimitiveModel {\n\n\tconstructor( handModel, controller, path, handedness, options ) {\n\n\t\tthis.controller = controller;\n\t\tthis.handModel = handModel;\n\t\tthis.envMap = null;\n\n\t\tlet geometry;\n\n\t\tif ( ! options || ! options.primitive || options.primitive === 'sphere' ) {\n\n\t\t\tgeometry = new SphereGeometry( 1, 10, 10 );\n\n\t\t} else if ( options.primitive === 'box' ) {\n\n\t\t\tgeometry = new BoxGeometry( 1, 1, 1 );\n\n\t\t}\n\n\t\tconst material = new MeshStandardMaterial();\n\n\t\tthis.handMesh = new InstancedMesh( geometry, material, 30 );\n\t\tthis.handMesh.instanceMatrix.setUsage( DynamicDrawUsage ); // will be updated every frame\n\t\tthis.handMesh.castShadow = true;\n\t\tthis.handMesh.receiveShadow = true;\n\t\tthis.handModel.add( this.handMesh );\n\n\t\tthis.joints = [\n\t\t\t'wrist',\n\t\t\t'thumb-metacarpal',\n\t\t\t'thumb-phalanx-proximal',\n\t\t\t'thumb-phalanx-distal',\n\t\t\t'thumb-tip',\n\t\t\t'index-finger-metacarpal',\n\t\t\t'index-finger-phalanx-proximal',\n\t\t\t'index-finger-phalanx-intermediate',\n\t\t\t'index-finger-phalanx-distal',\n\t\t\t'index-finger-tip',\n\t\t\t'middle-finger-metacarpal',\n\t\t\t'middle-finger-phalanx-proximal',\n\t\t\t'middle-finger-phalanx-intermediate',\n\t\t\t'middle-finger-phalanx-distal',\n\t\t\t'middle-finger-tip',\n\t\t\t'ring-finger-metacarpal',\n\t\t\t'ring-finger-phalanx-proximal',\n\t\t\t'ring-finger-phalanx-intermediate',\n\t\t\t'ring-finger-phalanx-distal',\n\t\t\t'ring-finger-tip',\n\t\t\t'pinky-finger-metacarpal',\n\t\t\t'pinky-finger-phalanx-proximal',\n\t\t\t'pinky-finger-phalanx-intermediate',\n\t\t\t'pinky-finger-phalanx-distal',\n\t\t\t'pinky-finger-tip'\n\t\t];\n\n\t}\n\n\tupdateMesh() {\n\n\t\tconst defaultRadius = 0.008;\n\t\tconst joints = this.controller.joints;\n\n\t\tlet count = 0;\n\n\t\tfor ( let i = 0; i < this.joints.length; i ++ ) {\n\n\t\t\tconst joint = joints[ this.joints[ i ] ];\n\n\t\t\tif ( joint.visible ) {\n\n\t\t\t\t_vector.setScalar( joint.jointRadius || defaultRadius );\n\t\t\t\t_matrix.compose( joint.position, joint.quaternion, _vector );\n\t\t\t\tthis.handMesh.setMatrixAt( i, _matrix );\n\n\t\t\t\tcount ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.handMesh.count = count;\n\t\tthis.handMesh.instanceMatrix.needsUpdate = true;\n\n\t}\n\n}\n\nexport { XRHandPrimitiveModel };\n","import { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nconst DEFAULT_HAND_PROFILE_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/';\n\nclass XRHandMeshModel {\n\n\tconstructor( handModel, controller, path, handedness ) {\n\n\t\tthis.controller = controller;\n\t\tthis.handModel = handModel;\n\n\t\tthis.bones = [];\n\n\t\tconst loader = new GLTFLoader();\n\t\tloader.setPath( path || DEFAULT_HAND_PROFILE_PATH );\n\t\tloader.load( `${handedness}.glb`, gltf => {\n\n\t\t\tconst object = gltf.scene.children[ 0 ];\n\t\t\tthis.handModel.add( object );\n\n\t\t\tconst mesh = object.getObjectByProperty( 'type', 'SkinnedMesh' );\n\t\t\tmesh.frustumCulled = false;\n\t\t\tmesh.castShadow = true;\n\t\t\tmesh.receiveShadow = true;\n\n\t\t\tconst joints = [\n\t\t\t\t'wrist',\n\t\t\t\t'thumb-metacarpal',\n\t\t\t\t'thumb-phalanx-proximal',\n\t\t\t\t'thumb-phalanx-distal',\n\t\t\t\t'thumb-tip',\n\t\t\t\t'index-finger-metacarpal',\n\t\t\t\t'index-finger-phalanx-proximal',\n\t\t\t\t'index-finger-phalanx-intermediate',\n\t\t\t\t'index-finger-phalanx-distal',\n\t\t\t\t'index-finger-tip',\n\t\t\t\t'middle-finger-metacarpal',\n\t\t\t\t'middle-finger-phalanx-proximal',\n\t\t\t\t'middle-finger-phalanx-intermediate',\n\t\t\t\t'middle-finger-phalanx-distal',\n\t\t\t\t'middle-finger-tip',\n\t\t\t\t'ring-finger-metacarpal',\n\t\t\t\t'ring-finger-phalanx-proximal',\n\t\t\t\t'ring-finger-phalanx-intermediate',\n\t\t\t\t'ring-finger-phalanx-distal',\n\t\t\t\t'ring-finger-tip',\n\t\t\t\t'pinky-finger-metacarpal',\n\t\t\t\t'pinky-finger-phalanx-proximal',\n\t\t\t\t'pinky-finger-phalanx-intermediate',\n\t\t\t\t'pinky-finger-phalanx-distal',\n\t\t\t\t'pinky-finger-tip',\n\t\t\t];\n\n\t\t\tjoints.forEach( jointName => {\n\n\t\t\t\tconst bone = object.getObjectByName( jointName );\n\n\t\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\t\tbone.jointName = jointName;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( `Couldn't find ${jointName} in ${handedness} hand mesh` );\n\n\t\t\t\t}\n\n\t\t\t\tthis.bones.push( bone );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tupdateMesh() {\n\n\t\t// XR Joints\n\t\tconst XRJoints = this.controller.joints;\n\n\t\tfor ( let i = 0; i < this.bones.length; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tconst XRJoint = XRJoints[ bone.jointName ];\n\n\t\t\t\tif ( XRJoint.visible ) {\n\n\t\t\t\t\tconst position = XRJoint.position;\n\n\t\t\t\t\tif ( bone ) {\n\n\t\t\t\t\t\tbone.position.copy( position );\n\t\t\t\t\t\tbone.quaternion.copy( XRJoint.quaternion );\n\t\t\t\t\t\t// bone.scale.setScalar( XRJoint.jointRadius || defaultRadius );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { XRHandMeshModel };\n","import {\n\tObject3D\n} from 'three';\n\nimport {\n\tXRHandPrimitiveModel\n} from './XRHandPrimitiveModel.js';\n\nimport {\n\tXRHandMeshModel\n} from './XRHandMeshModel.js';\n\nclass XRHandModel extends Object3D {\n\n\tconstructor( controller ) {\n\n\t\tsuper();\n\n\t\tthis.controller = controller;\n\t\tthis.motionController = null;\n\t\tthis.envMap = null;\n\n\t\tthis.mesh = null;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.motionController ) {\n\n\t\t\tthis.motionController.updateMesh();\n\n\t\t}\n\n\t}\n\n}\n\nclass XRHandModelFactory {\n\n\tconstructor() {\n\n\t\tthis.path = null;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\n\t\treturn this;\n\n\t}\n\n\tcreateHandModel( controller, profile ) {\n\n\t\tconst handModel = new XRHandModel( controller );\n\n\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\tconst xrInputSource = event.data;\n\n\t\t\tif ( xrInputSource.hand && ! handModel.motionController ) {\n\n\t\t\t\thandModel.xrInputSource = xrInputSource;\n\n\t\t\t\t// @todo Detect profile if not provided\n\t\t\t\tif ( profile === undefined || profile === 'spheres' ) {\n\n\t\t\t\t\thandModel.motionController = new XRHandPrimitiveModel( handModel, controller, this.path, xrInputSource.handedness, { primitive: 'sphere' } );\n\n\t\t\t\t} else if ( profile === 'boxes' ) {\n\n\t\t\t\t\thandModel.motionController = new XRHandPrimitiveModel( handModel, controller, this.path, xrInputSource.handedness, { primitive: 'box' } );\n\n\t\t\t\t} else if ( profile === 'mesh' ) {\n\n\t\t\t\t\thandModel.motionController = new XRHandMeshModel( handModel, controller, this.path, xrInputSource.handedness );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\t// handModel.motionController = null;\n\t\t\t// handModel.remove( scene );\n\t\t\t// scene = null;\n\n\t\t} );\n\n\t\treturn handModel;\n\n\t}\n\n}\n\nexport { XRHandModelFactory };\n","import {\n    renderer, rafCallbacks\n} from '../scene.js';\n\nconst prevGamePads = new Map();\nconst gamepad = new EventTarget();\n\nfunction dispatchEvent(type, detail) {\n    const specificEvent = new CustomEvent(type, {detail});\n\n    const generalDetail = {type};\n    Object.assign(generalDetail, detail);\n    const generalEvent = new CustomEvent('gamepadInteraction', {detail: generalDetail});\n\n    gamepad.dispatchEvent(specificEvent);\n    gamepad.dispatchEvent(generalEvent);\n}\n\nrafCallbacks.add(() => {\n    const session = renderer.xr.getSession();\n    let i = 0;\n    if (session) for (const source of session.inputSources) {\n        if (!source.gamepad) continue;\n        const controller = renderer.xr.getController(i++);\n        const old = prevGamePads.get(source);\n        const data = {\n            buttons: source.gamepad.buttons.map(b => b.value),\n            axes: source.gamepad.axes.slice(0)\n        };\n        if (old) {\n            data.buttons.forEach((value,i)=>{\n                if (value !== old.buttons[i]) {\n                    if (value === 1) {\n                        dispatchEvent(`button${i}Down`, {value, source, controller,data});\n                    } else {\n                        dispatchEvent(`button${i}Up`, {value, source, controller,data});\n                    }\n                }\n            });\n            data.axes.forEach((value,i)=>{\n                if (value !== old.axes[i]) {\n                    dispatchEvent(`axes${i}Move`, {value, source, controller,data});\n                    if (old.axes[i] === 0) {\n                        dispatchEvent(`axes${i}MoveStart`, {value, source, controller,data});\n                    }\n                    if (Math.abs(old.axes[i]) < 0.5 && Math.abs(value) > 0.5) {\n                        dispatchEvent(`axes${i}MoveMiddle`, {value, source, controller,data});\n                    }\n                    if (value === 0) {\n                        dispatchEvent(`axes${i}MoveEnd`, {value, source, controller,data});\n                    }\n                }\n            });\n        }\n        prevGamePads.set(source, data);\n    }\n});\n\nexport {\n    gamepad\n}","import {\n    cameraGroup, camera\n} from '../../scene.js';\nimport {\n    Mesh,\n    MeshBasicMaterial,\n    SphereBufferGeometry,\n    BackSide\n} from  'three';\n\nimport TWEEN from '@tweenjs/tween.js/dist/tween.esm.js';\n\nfunction locomotion(offset) {\n\n    blinkerSphere.visible = true;\n    blinkerSphere.material.opacity = 0;\n    new TWEEN.Tween(blinkerSphere.material)\n        .to({opacity: 1}, 200)\n        .easing(TWEEN.Easing.Quadratic.Out)\n        .onComplete(function () {\n\n            // Do the teleport\n            cameraGroup.position.add(offset);\n\n            // Fade back\n            new TWEEN.Tween(blinkerSphere.material)\n            .to({opacity: 0}, 200)\n            .onComplete(() => blinkerSphere.visible = false)\n            .start();\n        })\n        .start();\n}\n\nconst blinkerSphereGeometry = new SphereBufferGeometry(0.3, 16, 16);\nblinkerSphereGeometry.translate(0,0.3,0);\nconst blinkerSphereMaterial = new MeshBasicMaterial({\n    side: BackSide,\n    color: 0x000000,\n    transparent: true\n});\nconst blinkerSphere = new Mesh( blinkerSphereGeometry, blinkerSphereMaterial );\nblinkerSphere.rotation.set(Math.PI/2, 0, 0);\nblinkerSphere.position.set(0, 0, -0.3);\nblinkerSphere.visible = false;\ncamera.add(blinkerSphere);\nblinkerSphereMaterial.renderOrder = -101;\n\nexport {\n    locomotion\n}","import {\n    scene, renderer, rafCallbacks, cameraGroup, camera\n} from '../scene.js';\nimport { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js'; \nimport { XRHandModelFactory } from 'three/examples/jsm/webxr/XRHandModelFactory.js'; \nimport {\n    Mesh,\n    MeshBasicMaterial,\n    Vector3,\n    PointLight,\n    PlaneGeometry,\n    TextureLoader,\n    BufferGeometry,\n    BufferAttribute,\n    LineBasicMaterial,\n    AdditiveBlending,\n    Line\n} from  'three';\nimport {\n    gamepad\n} from './gamepad.js';\n\nimport {\n    locomotion\n} from './locomotion/fade.js';\n\nfunction positionAtT(inVec,t,p,v,g) {\n    inVec.copy(p);\n    inVec.addScaledVector(v,t);\n    inVec.addScaledVector(g,0.5*t**2);\n    return inVec;\n}\n\n// Utility Vectors\nconst g = new Vector3(0,-9.8,0);\nconst tempVec = new Vector3();\nconst tempVec1 = new Vector3();\nconst tempVecP = new Vector3();\nconst tempVecV = new Vector3();\n\n// The guideline\nconst lineSegments=10;\nconst lineGeometry = new BufferGeometry();\nconst lineGeometryVertices = new Float32Array((lineSegments +1) * 3);\nlineGeometryVertices.fill(0);\nconst lineGeometryColors = new Float32Array((lineSegments +1) * 3);\nlineGeometryColors.fill(0.5);\nlineGeometry.setAttribute('position', new BufferAttribute(lineGeometryVertices, 3));\nlineGeometry.setAttribute('color', new BufferAttribute(lineGeometryColors, 3));\nconst lineMaterial = new LineBasicMaterial({ vertexColors: true, blending: AdditiveBlending });\nconst guideline = new Line( lineGeometry, lineMaterial );\n\n// The light at the end of the line\nconst guideLight = new PointLight(0xffeeaa, 0, 2);\n\n// The target on the ground\nconst guideSpriteTexture = new TextureLoader().load('./assets/target.png');\nconst guideSprite = new Mesh(\n    new PlaneGeometry(0.3, 0.3, 1, 1),\n    new MeshBasicMaterial({\n        map: guideSpriteTexture,\n        blending: AdditiveBlending,\n        color: 0x555555,\n        transparent: true\n    })\n);\nguideSprite.rotation.x = -Math.PI/2;\n\nlet guidingController = null;\nfunction onSelectStart() {\n    guidingController = this;\n    guideLight.intensity = 1;\n    this.add(guideline);\n    scene.add(guideSprite);\n}\n\nfunction onSelectEnd() {\n    if (guidingController === this) {\n\n        // first work out vector from feet to cursor\n\n        // feet position\n        const feetPos = renderer.xr.getCamera(camera).getWorldPosition(tempVec);\n        feetPos.y = 0;\n\n        // cursor position\n        const p = guidingController.getWorldPosition(tempVecP);\n        const v = guidingController.getWorldDirection(tempVecV);\n        v.multiplyScalar(6);\n        const t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\n        const cursorPos = positionAtT(tempVec1,t,p,v,g);\n\n        // Offset\n        const offset = cursorPos.addScaledVector(feetPos ,-1);\n\n        // Do the locomotion\n        locomotion(offset);\n\n        // clean up\n        guidingController = null;\n        guideLight.intensity = 0;\n        this.remove(guideline);\n        scene.remove(guideSprite);\n    }\n}\n\nconst controller1 = renderer.xr.getController(0);\ncontroller1.addEventListener('selectstart', onSelectStart);\ncontroller1.addEventListener('selectend', onSelectEnd);\ncameraGroup.add(controller1);\n\nconst controller2 = renderer.xr.getController(1);\ncontroller2.addEventListener('selectstart', onSelectStart);\ncontroller2.addEventListener('selectend', onSelectEnd);\ncameraGroup.add(controller2);\n\nconst controllerModelFactory = new XRControllerModelFactory();\nconst handModelFactory = new XRHandModelFactory();\n\nconst controllerGrip1 = renderer.xr.getControllerGrip(0);\nconst model1 = controllerModelFactory.createControllerModel( controllerGrip1 );\ncontrollerGrip1.add( model1 );\ncameraGroup.add( controllerGrip1 );\n\nconst controllerGrip2 = renderer.xr.getControllerGrip( 1 );\nconst model2 = controllerModelFactory.createControllerModel( controllerGrip2 );\ncontrollerGrip2.add( model2 );\ncameraGroup.add( controllerGrip2 );\n\nconst hand1 = renderer.xr.getHand( 0 );\nscene.add( hand1 );\nhand1.add( handModelFactory.createHandModel( hand1, \"mesh\" ) );\n\nconst hand2 = renderer.xr.getHand( 1 );\nscene.add( hand2 );\nhand2.add( handModelFactory.createHandModel( hand2, \"mesh\" ) );\n\nrafCallbacks.add(() => {\n    if (guidingController) {\n        // Controller start position\n        const p = guidingController.getWorldPosition(tempVecP);\n\n        // Set Vector V to the direction of the controller, at 1m/s\n        const v = guidingController.getWorldDirection(tempVecV);\n\n        // Scale the initial velocity to 6m/s\n        v.multiplyScalar(6);\n\n        // Time for tele ball to hit ground\n        const t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\n\n        const vertex = tempVec.set(0,0,0);\n        for (let i=1; i<=lineSegments; i++) {\n\n            // set vertex to current position of the virtual ball at time t\n            positionAtT(vertex,i*t/lineSegments,p,v,g);\n            guidingController.worldToLocal(vertex);\n            vertex.toArray(lineGeometryVertices,i*3);\n        }\n        guideline.geometry.attributes.position.needsUpdate = true;\n        \n        // Place the light and sprite near the end of the line\n        positionAtT(guideLight.position,t*0.98,p,v,g);\n        positionAtT(guideSprite.position,t*0.98,p,v,g);\n    }\n});\n\nfunction handleMove({detail}) {\n    // Turn left\n    if (detail.value > 0) {\n        cameraGroup.rotation.y -= Math.PI/4;\n    }\n    // Turn right\n    if (detail.value < 0) {\n        cameraGroup.rotation.y += Math.PI/4;\n    }\n}\ngamepad.addEventListener('axes0MoveMiddle', handleMove, true);\ngamepad.addEventListener('axes2MoveMiddle', handleMove, true);\n\nfunction handleUp({detail}) {\n    if (detail.value < 0) {\n        onSelectStart.bind(detail.controller)();\n    }\n}\nfunction handleUpEnd({detail}) {\n    onSelectEnd.bind(detail.controller)();\n}\ngamepad.addEventListener('axes1MoveMiddle', handleUp, true);\ngamepad.addEventListener('axes3MoveMiddle', handleUp, true);\ngamepad.addEventListener('axes1MoveEnd', handleUpEnd, true);\ngamepad.addEventListener('axes3MoveEnd', handleUpEnd, true);\n\nexport {\n    controller1,\n    controller2,\n    controllerGrip1,\n    controllerGrip2\n};","import {\n    renderer,\n    scene,\n    camera\n} from './lib/scene.js';\n\nimport {\n    controller1\n} from './lib/controllers/controllers.js';\n\nimport {\n    gamepad\n} from './lib/controllers/gamepad.js';\n\nimport {\n    Mesh,\n    MeshBasicMaterial,\n    PlaneGeometry,\n    TextureLoader,\n    AdditiveBlending,\n    CanvasTexture,\n    DoubleSide\n} from  'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\n\nconst loader = new GLTFLoader();\n\n// Red target on the floor\nconst targetTexture = new TextureLoader().load('./assets/target.png');\nconst target = new Mesh(\n    new PlaneGeometry(0.5, 0.5, 1, 1),\n    new MeshBasicMaterial({\n        map: targetTexture,\n        blending: AdditiveBlending,\n        color: 0x660000,\n        transparent: true\n    })\n);\ntarget.position.z = -5;\ntarget.position.y = 0.01;\ntarget.rotation.x = -Math.PI/2;\nscene.add(target);\n\n// Debugging \n\nconst canvas = document.createElement('canvas');\nconst canvasTexture = new CanvasTexture(canvas);\ncanvas.width = 1024;\ncanvas.height = 256;\nconst ctx = canvas.getContext('2d');\nfunction writeText(text) {\n    if (typeof text !== 'string') {\n        text = JSON.stringify(text,null,2);\n    }\n    ctx.font = \"120px fantasy\";\n    ctx.fillStyle = 'black';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = 'white';\n    text.split('\\n').forEach((str, i) => ctx.fillText(str, 0, (i+1)*120));\n    canvasTexture.needsUpdate = true;\n}\n\nconst geometry = new PlaneGeometry( 0.3 * canvas.width/1024, 0.3 * canvas.height/1024 );\nconst material = new MeshBasicMaterial( {map: canvasTexture, blending: AdditiveBlending, transparent: true} );\nconst consolePlane = new Mesh( geometry, material );\nconsolePlane.renderOrder = 1;\nconsolePlane.position.set(0, 0.5 * 0.3 * canvas.height/1024, -0.1);\nconsolePlane.rotation.set(-Math.PI/4,0,0);\ncontroller1.add( consolePlane );\nwriteText('hi');\n\ngamepad.addEventListener('gamepadInteraction', function (event) {\n    writeText(`${event.detail.type} ${event.detail.value}`);\n});\n\n(async function () {\n\n    // Forest from Google Poly, https://poly.google.com/view/2_fv3tn3NG_\n    const {scene: gltfScene} = await new Promise(resolve => loader.load('./assets/forest.glb', resolve));\n    const trees = gltfScene.children[0];\n    trees.position.z = -5;\n    trees.position.y = 2.5;\n    trees.scale.multiplyScalar(10);\n    trees.traverse(o => {\n        if (o.material) {\n            o.material.side = DoubleSide;\n            o.material.depthWrite = true;\n        }\n    });\n    scene.add(trees);\n}());\n\nwindow.renderer = renderer;\nwindow.camera = camera;"],"names":["_changeEvent","type","_startEvent","_endEvent","_global","global","self","window","PRIVATE","Symbol","EventTarget","[object Object]","this","listeners","Map","listener","Error","typedListeners","get","push","set","i","length","pop","event","queue","ARRAY_TYPE","Float32Array","Array","create","out","identity","invert","a","a00","a01","a02","a03","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","multiply","b","b0","b1","b2","b3","fromRotationTranslation","q","v","x","y","z","w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","getTranslation","mat","getRotation","trace","S","Math","sqrt","perspective","fovy","aspect","near","far","nf","f","tan","Infinity","create$1","clone$1","fromValues$1","copy$1","add$1","scale$1","normalize","len","dot","transformQuat","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","create$4","multiply$4","ax","ay","az","aw","bx","by","bz","bw","slerp","t","omega","cosom","sinom","scale0","scale1","acos","sin","invert$2","a0","a1","a2","a3","dot$$1","invDot","vec","create$3","clone$4","fromValues$4","copy$4","normalize$2","tmpvec3","xUnitVec3","yUnitVec3","temp1","temp2","matr","create$2","PRIVATE$1","XRRigidTransform$1","matrix","position","orientation","inverse","arguments","_getPoint","DOMPointReadOnly","fromPoint","arg","invMatrix","PRIVATE$2","XRSpace","specialType","inputSource","baseMatrix","inverseBaseMatrix","lastFrameId","_specialType","_inputSource","device","frameId","_onPoseUpdate","_baseMatrix","getBasePoseMatrix","_inverseBaseMatrix","space","PRIVATE$3","XRReferenceSpaceTypes","XRReferenceSpace","transform","includes","super","isFloor","originOffset","pose","transformMatrix","inverseOriginOffsetMatrix","_getSpaceRelativeTransform","_adjustForOriginOffset","XRRigidTransform","additionalOffset","newSpace","bounds","PRIVATE$4","XRSessionModes","DEFAULT_SESSION_OPTIONS","inline","requiredFeatures","optionalFeatures","immersive-vr","immersive-ar","now","startTime","Date","performance","now$1","PRIVATE$5","XRPose$1","emulatedPosition","PRIVATE$6","XRViewerPose","views","PRIVATE$7","XRViewport","target","width","height","XREyes","PRIVATE$8","XRView","eye","sessionId","temp","Object","viewport","projectionMatrix","getProjectionMatrix","layer","getViewport","PRIVATE$9","NON_ACTIVE_MSG","NEXT_FRAME_ID","XRFrame","session","id","active","animationFrame","referenceSpace","DOMException","PRIVATE$15","viewerSpace","_ensurePoseUpdated","viewerTransform","viewSpace","viewSpaces","viewTransform","view","baseSpace","getInputPose","XRPose","PRIVATE$10","XRRenderStateInit","freeze","depthNear","depthFar","inlineVerticalFieldOfView","baseLayer","XRRenderState","stateInit","config","assign","POLYFILLED_XR_COMPATIBLE","XR_COMPATIBLE","PRIVATE$11","XRWebGLLayerInit","antialias","depth","stencil","alpha","multiview","ignoreDepthValues","framebufferScaleFactor","PRIVATE$12","XRInputSourceEvent","Event","eventInitDict","frame","setPrototypeOf","prototype","PRIVATE$13","XRSessionEvent","PRIVATE$14","XRInputSourcesChangeEvent","added","removed","XRViewSpace","getBaseViewMatrix","XRSession$1","mode","immersive","initialRenderState","PI","ended","suspended","frameCallbacks","currentFrameCallbacks","frameHandle","deviceFrameHandle","activeRenderState","pendingRenderState","currentInputSources","onDeviceFrame","startDeviceFrameLoop","onBaseLayerSet","callbacks","onFrameStart","_checkInputSourcesChange","rightNow","cancelled","callback","err","console","error","onFrameEnd","requestAnimationFrame","stopDeviceFrameLoop","handle","cancelAnimationFrame","onPresentationEnd","dispatchEvent","removeEventListener","onPresentationStart","onSelectStart","onSelectEnd","addEventListener","evt","dispatchInputSourceEvent","onSqueezeStart","onSqueezeEnd","onblur","undefined","onfocus","onresetpose","onend","onselect","onselectstart","onselectend","renderState","environmentBlendMode","TypeError","doesSessionSupportReferenceSpace","requestFrameOfReferenceTransform","requestStageBounds","index","findIndex","d","splice","inputSources","getInputSources","endSession","newState","_session","min","max","newInputSources","oldInputSources","newInputSource","oldInputSource","PRIVATE$16","XRInputSource","impl","gripSpace","targetRaySpace","handedness","targetRayMode","profiles","gamepad","PRIVATE$17","XRReferenceSpaceEvent","API","XRSystem","devicePromise","immersiveSession","inlineSessions","Set","then","Promise","resolve","isSessionSupported","options","defaultOptions","concat","enabledFeatures","requirementsFailed","feature","isFeatureSupported","add","log","requestSession","XRSession","onSessionEnd","delete","XRWebGLLayer","context","layerInit","framebuffer","getParameter","FRAMEBUFFER_BINDING","framebufferWidth","drawingBufferWidth","framebufferHeight","drawingBufferHeight","_getViewport","polyfillMakeXRCompatible","Context","makeXRCompatible","polyfillGetContext","Canvas","getContext","contextType","glAttribs","ctx","call","xrCompatible","commonjsGlobal","module","cardboardVrDisplay","exports","observedWarnings","match","value","classCallCheck","instance","Constructor","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","iterator","next","done","isArray","MIN_TIMESTEP","MAX_TIMESTEP","dataUri","mimeType","svg","encodeURIComponent","lerp","isIOS","test","navigator","platform","isWebViewAndroid","userAgent","indexOf","isSafari","isFirefoxAndroid","getChromeVersion","parseInt","isSafariWithoutDeviceMotion","isChromeWithoutDeviceMotion","_match$1$split","split","_match$1$split2","branch","build","isR7","isLandscapeMode","rtn","isTimestampDeltaValid","timestampDeltaS","isNaN","getScreenWidth","screen","devicePixelRatio","getScreenHeight","requestFullscreen","element","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","document","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","getFullscreenElement","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","linkProgram","gl","vertexSource","fragmentSource","attribLocationMap","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attribName","attachShader","bindAttribLocation","deleteShader","getProgramUniforms","uniforms","uniformCount","getProgramParameter","ACTIVE_UNIFORMS","uniformName","getActiveUniform","name","replace","getUniformLocation","orthoMatrix","left","right","bottom","top","lr","bt","isMobile","check","vendor","opera","substr","extend","dest","src","hasOwnProperty","safariCssSizeWorkaround","canvas","style","setTimeout","frameDataFromPose","piOver180","rad45","mat4_perspectiveFromFieldOfView","fov","upTan","upDegrees","downTan","downDegrees","leftTan","leftDegrees","rightTan","rightDegrees","xScale","yScale","mat4_fromRotationTranslation","mat4_translate","mat4_invert","defaultOrientation","defaultPosition","updateEyeMatrices","projection","offset","vrDisplay","frameData","timestamp","leftProjectionMatrix","leftViewMatrix","_getFieldOfView","_getEyeOffset","rightProjectionMatrix","rightViewMatrix","isInsideCrossOriginIFrame","isFramed","refOrigin","getOriginFromUrl","referrer","thisOrigin","location","href","url","domainIdx","protoSepIdx","domainEndIdx","substring","getQuaternionAngle","quat","warn","warnOnce","message","deprecateWarning","deprecated","suggested","WGLUPreserveGLState","bindings","boundValues","activeTexture","binding","TEXTURE_BINDING_2D","TEXTURE_BINDING_CUBE_MAP","textureUnit","TEXTURE0","TEXTURE31","ACTIVE_TEXTURE","boundValue","ARRAY_BUFFER_BINDING","bindBuffer","ARRAY_BUFFER","COLOR_CLEAR_VALUE","clearColor","COLOR_WRITEMASK","colorMask","CURRENT_PROGRAM","useProgram","ELEMENT_ARRAY_BUFFER_BINDING","ELEMENT_ARRAY_BUFFER","bindFramebuffer","FRAMEBUFFER","RENDERBUFFER_BINDING","bindRenderbuffer","RENDERBUFFER","bindTexture","TEXTURE_2D","TEXTURE_CUBE_MAP","VIEWPORT","BLEND","CULL_FACE","DEPTH_TEST","SCISSOR_TEST","STENCIL_TEST","enable","disable","toString","glPreserveState","distortionVS","join","distortionFS","CardboardDistorter","cardboardUI","bufferScale","dirtySubmitFrameBindings","ctxAttribs","getContextAttributes","instanceExt","getExtension","meshWidth","meshHeight","bufferWidth","bufferHeight","realBindFramebuffer","realEnable","realDisable","realColorMask","realClearColor","realViewport","realCanvasWidth","getOwnPropertyDescriptor","__proto__","realCanvasHeight","isPatched","lastBoundFramebuffer","cullFace","depthTest","blend","scissorTest","stencilTest","attribs","texCoord","viewportOffsetScale","setTextureBounds","vertexBuffer","createBuffer","indexBuffer","indexCount","renderTarget","createTexture","createFramebuffer","depthStencilBuffer","depthBuffer","stencilBuffer","createRenderbuffer","patch","onResize","destroy","unpatch","deleteProgram","deleteBuffer","deleteTexture","deleteFramebuffer","deleteRenderbuffer","glState","clear","COLOR_BUFFER_BIT","texImage2D","RGBA","RGB","UNSIGNED_BYTE","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","framebufferTexture2D","COLOR_ATTACHMENT0","renderbufferStorage","DEPTH_STENCIL","framebufferRenderbuffer","DEPTH_STENCIL_ATTACHMENT","DEPTH_COMPONENT16","DEPTH_ATTACHMENT","STENCIL_INDEX8","STENCIL_ATTACHMENT","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","apply","pname","r","g","h","leftBounds","rightBounds","submitFrame","positionDivisor","texCoordDivisor","getVertexAttrib","VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE","enableVertexAttribArray","vertexAttribPointer","FLOAT","vertexAttribDivisorANGLE","uniform1i","diffuse","uniform4fv","drawElements","TRIANGLES","UNSIGNED_SHORT","renderNoState","preserveDrawingBuffer","updateDeviceInfo","deviceInfo","vertices","computeMeshVertices_","bufferData","STATIC_DRAW","indices","computeMeshIndices_","lensFrustum","getLeftEyeVisibleTanAngles","noLensFrustum","getLeftEyeNoLensTanAngles","getLeftEyeVisibleScreenRect","vidx","e","j","u","s","distortion","distortInverse","Uint16Array","halfwidth","halfheight","iidx","getOwnPropertyDescriptor_","proto","attrName","getAttribute","val","setAttribute","uiVS","uiFS","DEG2RAD","kAnglePerGearSection","kOuterRimEndAngle","kInnerRimBeginAngle","kOuterRadius","kMiddleRadius","kInnerRadius","kCenterLineThicknessDp","kButtonWidthDp","kTouchSlopFactor","CardboardUI","gearOffset","gearVertexCount","arrowOffset","arrowVertexCount","projMat","Distortion","coefficients","listen","optionsCallback","backCallback","midline","clientWidth","buttonSize","clientX","clientY","clientHeight","physicalPixels","dps","lineWidth","buttonScale","buttonBorder","addGearSegment","theta","angle","cos","segmentTheta","addArrowVertex","angledLineWidth","render","uniform4f","color","uniformMatrix4fv","projectionMat","drawArrays","TRIANGLE_STRIP","radius","r0","r1","dr0","distort","abs","dr1","r2","ret","degToRad","radToDeg","Vector3","constructor","copy","scalar","invScalar","multiplyScalar","applyQuaternion","ix","iy","iz","iw","crossVectors","v1","EPS","Quaternion","Device","params","widthMeters","heightMeters","bevelMeters","quaternion","setFromEulerXYZ","c1","c2","c3","s1","s2","s3","setFromEulerYXZ","setFromAxisAngle","axis","halfAngle","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","l","qb","cosHalfTheta","halfTheta","sinHalfTheta","ratioA","ratioB","setFromUnitVectors","vFrom","vTo","DEFAULT_ANDROID","DEFAULT_IOS","Viewers","CardboardV1","CardboardViewer","label","interLensDistance","baselineLensDistance","screenLensDistance","distortionCoefficients","inverseCoefficients","CardboardV2","DeviceInfo","deviceParams","additionalViewers","viewer","updateDeviceParams","determineDevice_","getDevice","setViewer","METERS_PER_INCH","metersPerPixelX","xdpi","metersPerPixelY","ydpi","bevelMm","getDistortedFieldOfViewLeftEye","eyeToScreenDistance","outerDist","innerDist","bottomDist","topDist","outerAngle","atan","innerAngle","bottomAngle","topAngle","fovLeft","fovTop","fovRight","fovBottom","halfWidth","halfHeight","verticalLensOffset","centerX","centerY","centerZ","screenLeft","screenTop","screenRight","screenBottom","result","undistortedFrustum","dist","eyeX","eyeY","getFieldOfViewLeftEye","opt_isUndistorted","getUndistortedFieldOfViewLeftEye","getFieldOfViewRightEye","p","getUndistortedParams_","getUndistortedViewportLeftEye","screenWidth","screenHeight","xPxPerTanAngle","yPxPerTanAngle","round","eyePosX","eyePosY","halfLensDistance","maxFov","viewerMax","DPDB_CACHE","format","last_updated","devices","rules","mdmh","ua","dpi","ac","res","Dpdb","onDeviceParamsUpdated","dpdb","recalculateDeviceParams_","xhr","XMLHttpRequest","obj","open","loading","status","JSON","parse","response","send","DeviceParams","SensorSample","sample","timestampS","ComplementaryFilter","kFilter","isDebug","currentAccelMeasurement","currentGyroMeasurement","previousGyroMeasurement","filterQ","previousFilterQ","accelQ","isOrientationInitialized","estimatedGravity","measuredGravity","gyroIntegralQ","PosePredictor","predictionTimeS","previousQ","previousTimestampS","deltaQ","outQ","FusionPoseSensor","predictionTime","yawOnly","accelerometer","gyroscope","filter","posePredictor","chromeVersion","isDeviceMotionInRadians","isWithoutDeviceMotion","filterToWorldQ","inverseWorldToScreenQ","worldToScreenQ","originalPoseAdjustQ","setScreenTransform_","resetQ","orientationOut_","start","getDeviceParams","newDeviceParams","calcDeviceParams_","db","matched","rule","ruleMatches_","resX","resY","sensorSample","addAccelMeasurement","vector","addGyroMeasurement","deltaT","run_","accelToQuaternion_","gyroDeltaQ","gyroToQuaternionDelta_","invFilterQ","toFixed","targetQ","getOrientation","accel","normAccel","gyro","dt","getPrediction","currentQ","angularSpeed","predictAngle","getPosition","_deviceOrientationQ","deviceOrientationFixQ","deviceOrientationFilterToWorldQ","filterOrientation","resetPose","onDeviceOrientation_","beta","gamma","onDeviceMotion_","deviceMotion","updateDeviceMotion_","accGravity","accelerationIncludingGravity","rotRate","rotationRate","timeStamp","deltaS","onOrientationChange_","screenOrientation","onMessage_","data","toLowerCase","deviceMotionEvent","onDeviceMotionCallback_","bind","onOrientationChangeCallback_","onMessageCallback_","onDeviceOrientationCallback_","stop","SENSOR_FREQUENCY","X_AXIS","Z_AXIS","SENSOR_TO_VR","PoseSensor","sensor","fusionSensor","_out","api","errors","_sensorQ","_outQ","_onSensorRead","_onSensorError","init","RelativeOrientationSensor","frequency","referenceFrame","useDeviceMotion","K_FILTER","PREDICTION_TIME_S","YAW_ONLY","DEBUG","rotateInstructionsAsset","RotateInstructions","loadIcon_","overlay","createElement","backgroundColor","fontFamily","zIndex","img","icon","marginLeft","marginTop","appendChild","text","textAlign","fontSize","lineHeight","margin","innerHTML","snackbar","padding","boxSizing","snackbarText","float","snackbarButton","fontWeight","textTransform","borderLeft","paddingLeft","textDecoration","hide","show","parent","parentElement","removeChild","body","display","querySelector","showTemporarily","ms","timer","disableShowTemporarily","clearTimeout","update","DEFAULT_VIEWER","VIEWER_KEY","CLASS_NAME","ViewerSelector","defaultViewer","selectedKey","localStorage","getItem","dialog","createDialog_","root","onChangeCallbacks_","unwrapExports$$1","__esModule","createCommonjsModule$$1","fn","checked","contains","getCurrentViewer","getSelectedKey_","input","onChange","cb","fireOnChange_","onSave_","setItem","container","classList","background","overflow","boxShadow","createH1_","createChoice_","createButton_","h1","marginBottom","div","onclick","button","letterSpacing","border","NoSleep$1","factory","commonjsGlobal$$1","modules","installedModules","__webpack_require__","moduleId","m","c","getter","o","n","object","property","_createClass","_classCallCheck","mediaFile","oldIOS","parseFloat","exec","MSStream","NoSleep","noSleepTimer","noSleepVideo","currentTime","random","setInterval","play","clearInterval","pause","nextDisplayId","defaultLeftBounds","defaultRightBounds","raf","caf","VRFrameData","VRDisplayCapabilities","hasPosition","hasExternalDisplay","canPresent","maxLayers","hasOrientation","VRDisplay","USE_WAKELOCK","wakelock","isPolyfilled","displayId","displayName","isPresenting","capabilities","stageParameters","waitingForPresent_","layer_","originalParent_","fullscreenElement_","fullscreenWrapper_","fullscreenElementCachedStyle_","fullscreenEventTarget_","fullscreenChangeHandler_","fullscreenErrorHandler_","wakelock_","getFrameData","_getPose","getPose","_resetPose","getImmediatePose","wrapForFullscreen","cssProperties","insertBefore","firstChild","applyFullscreenElementStyle","removeFullscreenWrapper","removeAttribute","requestPresent","layers","wasPresenting","reject","incomingLayer","source","updatePresent_","predistorted","slice","onFullscreenChange","actualFullscreenElement","lock","catch","beginPresent_","unlock","disableWakeLock","endPresent_","removeFullscreenListeners_","fireVRDisplayPresentChange_","onFullscreenError","addFullscreenListeners_","enableWakeLock","exitPresent","getLayers","CustomEvent","detail","fireVRDisplayConnect_","changeHandler","errorHandler","fullscreenEnabled","webkitFullscreenEnabled","mozFullScreenEnabled","msFullscreenEnabled","getEyeParameters","whichEye","ADDITIONAL_VIEWERS","MOBILE_WAKE_LOCK","DPDB_URL","CARDBOARD_UI_DISABLED","ROTATE_INSTRUCTIONS_DISABLED","BUFFER_SCALE","DIRTY_SUBMIT_FRAME_BINDINGS","Eye","LEFT","RIGHT","CardboardVRDisplay","config$$1","defaults","bufferScale_","poseSensor_","distorter_","cardboardUI_","dpdb_","onDeviceParamsUpdated_","deviceInfo_","viewerSelector_","onViewerChanged_","rotateInstructions_","onResize_","linearVelocity","linearAcceleration","angularVelocity","angularAcceleration","fieldOfView","eyeParams","renderWidth","renderHeight","newParams","updateBounds_","stopPropagation","preventDefault","orientationHandler","vrdisplaypresentchangeHandler","fireVRDisplayDeviceParamsChange_","lastWidth","lastHeight","vrdisplay","XRDevice","onWindowResize","featureDescriptor","coordinateSystem","poseType","oculusGo","mapping","buttons","0","1","2","gripTransform","oculusTouch","displayProfiles","Oculus Quest","axes","3","4","5","6","openVr","HTC Vive","HTC Vive DVT","Valve Index","targetRayTransform","userAgentOverrides","Firefox","samsungGearVR","samsungOdyssey","windowsMixedReality","GamepadMappings","Daydream Controller","Gear VR Controller","HTC Vive Focus Controller","Oculus Go Controller","Oculus Touch (Right)","Oculus Touch (Left)","OpenVR Gamepad","Spatial Controller (Spatial Interaction Source) 045E-065A","Spatial Controller (Spatial Interaction Source) 045E-065D","Windows Mixed Reality (Right)","Windows Mixed Reality (Left)","HEAD_ELBOW_OFFSET_RIGHTHANDED","HEAD_ELBOW_OFFSET_LEFTHANDED","ELBOW_WRIST_OFFSET","WRIST_CONTROLLER_OFFSET","ARM_EXTENSION_OFFSET","RAD_TO_DEG","OrientationArmModel","hand","headElbowOffset","controllerQ","lastControllerQ","headQ","headPos","elbowPos","wristPos","time","lastTime","rootQ","controllerOrientation","headPoseMatrix","headYawQ","getHeadYawOrientation_","angleDelta","quatAngle_","controllerForward","controllerDotY","extensionRatio","clamp_","controllerCameraQ","elbowOffset","totalAngleDeg","lerpValue","pow","wristQ","invWristQ","elbowQ","headEuler","order","clamp","min$$1","max$$1","sqx","sqy","sqz","sqw","atan2","asin","eulerFromQuaternion","halfToRad","sx","cx","sy","cy","sz","cz","fromEuler","q1","q2","vec1","vec2","tempA","tempB","cosine","PRIVATE$18","PLACEHOLDER_BUTTON","pressed","touched","XRRemappedGamepad","map","agent","override","_update","_profiles","connected","hapticActuators","GamepadXRInputSource","polyfill","primaryButtonIndex","primarySqueezeButtonIndex","nativeGamepad","lastPosition","basePoseMatrix","outputMatrix","primaryActionPressed","primarySqueezeActionPressed","armModel","setHandedness","updateBasePoseMatrix","_transformBasePoseMatrix","EXTRA_PRESENTATION_ATTRIBUTES","highRefreshRate","PRIMARY_BUTTON_MAP","oculus","openvr","spatial controller (spatial interaction source)","SESSION_ID","Session","polyfillOptions","outputContext","modifiedCanvasLayer","renderContextType","renderContext","WebVRDevice","sessions","baseModelMatrix","gamepadInputSources","tempVec3","onVRDisplayPresentChange","CAN_USE_GAMEPAD","HAS_BITMAP_SUPPORT","ImageBitmapRenderingContext","createImageBitmap","isImageBitmapSupported","attributes","applyCanvasStylesForMinimalRendering","primaryButton","prevInputSources","gamepads","getGamepads","inputSourceImpl","getPrimaryButtonIndex","updateFromGamepad","mirroring","iCanvas","iWidth","iHeight","oCanvas","oWidth","oHeight","transferToImageBitmap","transferFromImageBitmap","resizeWidth","resizeHeight","bitmap","drawImage","has","sizeX","sizeZ","sittingToStandingTransform","getXRPose","forEach","CardboardXRDevice","cardboardConfig","SESSION_ID$1","Session$1","InlineDevice","identityMatrix","requestXRDevice","async","webvr","xr","displays","getVRDisplays","getWebVRDevice","mobile","cardboard","allowCardboardOnDesktop","CONFIG_DEFAULTS","partials","Easing","Linear","None","amount","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Exponential","Circular","Elastic","Back","Bounce","process","hrtime","getTime","Group","_tweens","_tweensAddedDuringUpdate","getAll","_this","keys","tweenId","removeAll","tween","getId","remove","preserve","tweenIds","autoStart","Interpolation","k","floor","Utils","Bezier","pw","bn","Bernstein","CatmullRom","p0","p1","fc","Factorial","p2","p3","v0","t2","Sequence","nextId","_nextId","mainGroup","Tween","_object","_group","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","_goToEnd","isPlaying","isPaused","to","properties","duration","_swapEndStartRepeatValues","_setupProperties","startValue","startValueIsArray","propType","isInterpolationList","endValues","_handleRelativeValue","reverse","prop","stopChainedTweens","_onStopCallback","end","resume","numChainedTweens","group","delay","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easing","easingFunction","interpolation","interpolationFunction","chain","tweens","onStart","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","onComplete","_onCompleteCallback","onStop","elapsed","endTime","_updateProperties","isFinite","startIsArray","endIsArray","charAt","tmp","endValue","TWEEN","VERSION","cameraGroup","renderer","WebGLRenderer","enabled","logarithmicDepthBuffer","setPixelRatio","scene","Scene","camera","PerspectiveCamera","controls","EventDispatcher","domElement","minDistance","maxDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","UP","BOTTOM","mouseButtons","MOUSE","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TOUCH","TWO","DOLLY_PAN","target0","clone","position0","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","listenToKeyEvents","onKeyDown","saveState","scope","reset","updateProjectionMatrix","state","STATE","NONE","up","quatInverse","lastQuaternion","twoPI","sub","setFromVector3","rotateLeft","sphericalDelta","makeSafe","scale","addScaledVector","panOffset","setFromSpherical","lookAt","zoomChanged","distanceToSquared","dispose","onContextMenu","onPointerDown","onMouseWheel","onTouchStart","onTouchEnd","onTouchMove","ownerDocument","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","Spherical","rotateStart","Vector2","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","distance","objectMatrix","setFromMatrixColumn","panUp","pan","deltaX","deltaY","isPerspectiveCamera","targetDistance","isOrthographicCamera","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","dx","dy","handleTouchMoveRotate","subVectors","handleTouchMovePan","handleTouchMoveDolly","pointerType","mouseAction","focus","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","onMouseUp","handleMouseWheel","needsUpdate","code","handleKeyDown","handleTouchStartDollyPan","DOLLY_ROTATE","handleTouchStartDollyRotate","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","passive","innerWidth","innerHeight","setSize","light","DirectionalLight","intensity","Mesh","SphereGeometry","sceneRadius","MeshBasicMaterial","light2","AmbientLight","skyGeometry","skyMaterial","side","BackSide","depthWrite","onBeforeCompile","shader","skySphere","floorTexture","TextureLoader","load","wrapS","wrapT","RepeatWrapping","PlaneGeometry","MeshLambertMaterial","rotation","nativeWebXR","injected","_injectCompatibilityShims","_injectPolyfill","every","iface","className","WebGLRenderingContext","HTMLCanvasElement","OffscreenCanvas","WebGL2RenderingContext","isSecureContext","_patchNavigatorXR","originalSupportsSession","supportsSession","showWebXRNotFound","cursor","onmouseenter","onmouseleave","textContent","stylizeElement","borderRadius","font","opacity","outline","supported","currentSession","onSessionStarted","onSessionEnded","setSession","sessionInit","showEnterVR","createButton","rafCallbacks","setAnimationLoop","GLTFLoader","Loader","manager","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","register","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFMeshoptCompression","onLoad","onProgress","onError","resourcePath","path","LoaderUtils","extractUrlBase","itemStart","_onError","itemError","itemEnd","loader","FileLoader","setPath","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","gltf","content","extensions","plugins","decodeText","Uint8Array","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","asset","version","GLTFParser","crossOrigin","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","GLTFRegistry","objects","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","cache","refs","uses","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","_addNodeRef","lightIndex","cacheKey","dependency","lightDef","lights","lightNode","Color","fromArray","range","PointLight","SpotLight","spot","innerConeAngle","outerConeAngle","penumbra","decay","createUniqueName","_loadLight","_getNodeRef","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","array","baseColorTexture","assignTexture","all","materialIndex","materials","MeshPhysicalMaterial","extension","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","transmissionFactor","transmission","transmissionTexture","textureIndex","textureDef","textures","images","loadTextureImage","isSupported","textureLoader","uri","handler","getHandler","detectSupport","loadTexture","image","Image","onload","onerror","bufferView","bufferViews","extensionDef","buffer","getDependency","decoder","ready","byteOffset","byteLength","count","stride","byteStride","ArrayBuffer","decodeGltfBuffer","BINARY_EXTENSION_CHUNK_TYPES","headerView","DataView","header","magic","getUint32","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","geometry","attribute","texture","GLTFMeshStandardSGMaterial","MeshStandardMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","specular","setHex","glossiness","specularMap","glossinessMap","_extraUniforms","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","setValues","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","emissive","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","material","fog","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","TangentSpaceNormalMap","normalScale","displacementMap","displacementScale","displacementBias","alphaMap","envMap","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","values","valueSize","beforeStart_","copySampleValue_","afterEnd_","interpolate_","i1","t0","t1","stride2","stride3","td","pp","ppp","offset1","offset0","s0","m0","m1","WEBGL_CONSTANTS","5120","Int8Array","5121","5122","Int16Array","5123","5125","Uint32Array","5126","WEBGL_FILTERS","9728","NearestFilter","9729","LinearFilter","9984","NearestMipmapNearestFilter","9985","LinearMipmapNearestFilter","9986","NearestMipmapLinearFilter","9987","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","33071","ClampToEdgeWrapping","33648","MirroredRepeatWrapping","10497","WEBGL_TYPE_SIZES","SCALAR","VEC2","VEC3","VEC4","MAT2","MAT3","MAT4","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","weights","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","resolveURL","addUnknownExtensionsToUserData","knownExtensions","objectDef","userData","gltfExtensions","assignExtrasToUserData","gltfDef","extras","updateMorphTargets","mesh","meshDef","il","morphTargetInfluences","targetNames","morphTargetDictionary","createPrimitiveKey","primitiveDef","dracoExtension","geometryKey","createAttributesKey","attributesKey","sort","getNormalizedComponentScale","associations","primitiveCache","meshCache","cameraCache","lightCache","textureCache","nodeNamesUsed","ImageBitmapLoader","setCrossOrigin","_invokeAll","ext","_markDefs","beforeRoot","getDependencies","dependencies","scenes","animations","cameras","afterRoot","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","ref","func","unshift","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","buffers","bufferViewDef","accessorIndex","sparse","pendingBufferViews","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","bufferAttribute","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","BufferAttribute","itemSizeIndices","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sampler","URL","webkitURL","sourceURI","isObjectURL","hasAlpha","isJPEG","search","colorType","getUint8","blob","Blob","createObjectURL","promise","isImageBitmapLoader","imageBitmap","CanvasTexture","revokeObjectURL","flipY","RGBFormat","samplers","magFilter","minFilter","mapName","mapDef","gltfReference","extendTexture","useVertexTangents","tangent","useVertexColors","useFlatShading","normal","useMorphTargets","morphAttributes","useMorphNormals","isPoints","uuid","pointsMaterial","PointsMaterial","Material","sizeAttenuation","isLine","lineMaterial","LineBasicMaterial","cachedMaterial","vertexColors","flatShading","morphTargets","morphNormals","vertexTangents","uv2","uv","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","DoubleSide","alphaMode","transparent","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","encoding","sRGBEncoding","originalName","sanitizedName","PropertyBinding","sanitizeNodeName","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","cached","geometryPromise","BufferGeometry","meshIndex","FrontSide","loadGeometries","results","geometries","SkinnedMesh","skinWeight","normalizeSkinWeights","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","Line","LineLoop","Points","assignFinalMaterial","cameraIndex","cameraDef","MathUtils.radToDeg","yfov","aspectRatio","znear","zfar","OrthographicCamera","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","node","parameters","output","inputAccessors","outputAccessors","targets","tracks","inputAccessor","outputAccessor","TypedKeyframeTrack","updateMatrix","matrixAutoUpdate","NumberKeyframeTrack","QuaternionKeyframeTrack","VectorKeyframeTrack","targetName","traverse","isMesh","outputArray","scaled","jl","track","createInterpolant","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","AnimationClip","nodeName","meshPromise","createNodeMesh","createNodeAttachment","Bone","Object3D","Matrix4","applyMatrix4","sceneIndex","sceneDef","nodeIds","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","bones","boneInverses","jointNode","Skeleton","matrixWorld","children","child","assignAttributeAccessor","gltfAttributeName","setIndex","box","Box3","boxScale","maxDisplacement","expandByVector","boundingBox","sphere","Sphere","getCenter","center","distanceTo","boundingSphere","computeBounds","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","morphTargetsRelative","addMorphTargets","drawMode","getIndex","numberOfTriangles","newIndices","getX","newGeometry","Constants","Handedness","ComponentState","DEFAULT","TOUCHED","PRESSED","ComponentProperty","BUTTON","Y_AXIS","ComponentType","TRIGGER","SQUEEZE","TOUCHPAD","THUMBSTICK","ButtonTouchThreshold","AxisTouchThreshold","VisualResponseProperty","TRANSFORM","VISIBILITY","fetchJsonFile","fetch","ok","statusText","fetchProfile","xrInputSource","basePath","defaultProfile","getAssetPath","supportedProfilesList","fetchProfilesList","some","profileId","supportedProfile","profilePath","profile","assetPath","layout","layouts","defaultComponentValues","xAxis","yAxis","VisualResponse","visualResponseDescription","componentProperty","states","valueNodeName","valueNodeProperty","minNodeName","maxNodeName","updateFromComponent","normalizedXAxis","normalizedYAxis","normalizeAxes","Component","componentId","componentDescription","visualResponses","gamepadIndices","rootNodeName","touchPointNodeName","responseName","visualResponse","gamepadButton","MotionController","assetUrl","layoutDescription","components","component","XRControllerModel","motionController","force","updateMatrixWorld","valueNode","minNode","maxNode","MotionControllerConstants","visible","slerpQuaternions","lerpVectors","addAssetSceneToControllerModel","controllerModel","touchPointNode","getObjectByName","sphereGeometry","findNodes","_matrix","_vector","XRHandPrimitiveModel","handModel","controller","BoxGeometry","handMesh","InstancedMesh","instanceMatrix","setUsage","DynamicDrawUsage","castShadow","receiveShadow","joint","setScalar","jointRadius","compose","setMatrixAt","XRHandMeshModel","getObjectByProperty","frustumCulled","jointName","bone","XRJoints","XRJoint","XRHandModel","updateMesh","prevGamePads","specificEvent","generalDetail","generalEvent","getSession","getController","old","blinkerSphereGeometry","SphereBufferGeometry","translate","blinkerSphereMaterial","blinkerSphere","positionAtT","inVec","renderOrder","tempVec","tempVec1","tempVecP","tempVecV","lineGeometry","lineGeometryVertices","fill","lineGeometryColors","blending","AdditiveBlending","guideline","guideLight","guideSpriteTexture","guideSprite","guidingController","feetPos","getCamera","getWorldPosition","getWorldDirection","locomotion","controller1","controller2","controllerModelFactory","gltfLoader","_assetCache","cachedAsset","handModelFactory","controllerGrip1","getControllerGrip","model1","createControllerModel","controllerGrip2","model2","hand1","getHand","createHandModel","hand2","handleMove","handleUp","handleUpEnd","vertex","worldToLocal","toArray","targetTexture","canvasTexture","writeText","stringify","fillStyle","fillRect","str","fillText","consolePlane","gltfScene","trees"],"mappings":"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"}