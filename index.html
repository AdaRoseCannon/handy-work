<html>

<head>
	<script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@52136de6a863f32d8cb806b65c3c3223f6b0f8a3/dist/aframe-master.min.js"></script>
	<script src="aframe/handy-work-tracking-controls.js"></script>
	<script type="module">
		import {
			update as handyWorkUpdate,
			loadPose,
			dumpHands
		} from "../build/handy-work.js";
				
		window.handyWorkUpdate = handyWorkUpdate;

		loadPose('relax', '../poses/relax.handpose');
		loadPose('fist', '../poses/fist.handpose');
		loadPose('flat', '../poses/flat.handpose');
		loadPose('point', '../poses/point.handpose');
		loadPose('horns', '../poses/horns.handpose');
		loadPose('shaka', '../poses/shaka.handpose');
		loadPose('vulcan', '../poses/vulcan.handpose');

		//setTimeout(dumpHands, 10000);
	</script>
</head>

<body>
	<a-scene background="color: skyblue;" gltf-model="dracoDecoderPath: https://cdn.jsdelivr.net/npm/three@0.129.0/examples/js/libs/draco/gltf/;">
		<a-assets>
			<!--
				https://market.pmnd.rs/model/low-poly-farm
				Created by: Creative Trio
				License: CC0
			-->
			<a-asset-item id="farm" src="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/models/low-poly-farm/model.gltf"></a-asset-item>
			<a-asset-item id="truck" src="https://market-assets.fra1.cdn.digitaloceanspaces.com/market-assets/models/citroen-old-van/model.gltf"></a-asset-item>
		</a-assets>

		<a-gltf-model shadow="cast: true; receive: true;" src="#farm" scale="10 10 10" position="-5 0 -8"></a-gltf-model>
		<a-gltf-model shadow="cast: true; receive: false;" src="#truck" scale="1 1 1" position="2 0.9 -3" rotation="0 30 0"></a-gltf-model>
		<a-entity id="text1" text="value: Hello World;" position="0 1.6 -1.5" scale="3 3 3"></a-entity>
		<a-entity id="text2" text="value: Hello World;" position="0 1.4 -1.5" scale="3 3 3"></a-entity>
		<a-entity id="handleft" handy-work-tracking-controls="hand: left; model-color: hotpink;">
			<a-entity><a-box scale="0.1 0.1 0.1"></a-box></a-entity>
		</a-entity>
		<a-entity id="handright" handy-work-tracking-controls="hand: right; model-color: hotpink;">
			<a-entity><a-box scale="0.1 0.1 0.1"></a-box></a-entity>
		</a-entity>
		<a-entity id="leftHand" hand-controls="hand: left; handModelStyle: lowPoly; color: #20a0c0;"></a-entity>
		<a-entity id="rightHand" hand-controls="hand: right; handModelStyle: lowPoly; color: #20a0c0;"></a-entity>
	</a-scene>
	<script>
		document.getElementById('handleft').addEventListener('pose', function (e) {
			document.getElementById('text1').setAttribute('text', 'value', e.detail);
		});
		document.getElementById('handright').addEventListener('pose', function (e) {
			document.getElementById('text2').setAttribute('text', 'value', e.detail);
		});
	</script>
</body>

</html>
